import{B as He}from"./md-vendor_vite-plugin-node-polyfills-D-GpVLra.js";import{_ as Gt}from"./md-codemirror-b0nwQ0CX.js";import{C as dt}from"./md-vendor_npm_aws-crypto-D5NJRR1D.js";const mi=t=>({setHttpHandler(e){t.httpHandler=e},httpHandler(){return t.httpHandler},updateHttpClientConfig(e,r){t.httpHandler?.updateHttpClientConfig(e,r)},httpHandlerConfigs(){return t.httpHandler.httpHandlerConfigs()}}),gi=t=>({httpHandler:t.httpHandler()});var Y;(function(t){t.HTTP="http",t.HTTPS="https"})(Y||(Y={}));var ce;(function(t){t.MD5="md5",t.CRC32="crc32",t.CRC32C="crc32c",t.SHA1="sha1",t.SHA256="sha256"})(ce||(ce={}));const Ce="__smithy_context";class U{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?e.protocol.slice(-1)!==":"?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?e.path.charAt(0)!=="/"?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){const r=new U({...e,headers:{...e.headers}});return r.query&&(r.query=Wt(r.query)),r}static isInstance(e){if(!e)return!1;const r=e;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return U.clone(this)}}function Wt(t){return Object.keys(t).reduce((e,r)=>{const n=t[r];return{...e,[r]:Array.isArray(n)?[...n]:n}},{})}class ee{statusCode;reason;headers;body;constructor(e){this.statusCode=e.statusCode,this.reason=e.reason,this.headers=e.headers||{},this.body=e.body}static isInstance(e){if(!e)return!1;const r=e;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}const se=t=>t[Ce]||(t[Ce]={}),F=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},Jt=(t,e)=>{if(!e||e.length===0)return t;const r=[];for(const n of e)for(const s of t)s.schemeId.split("#")[1]===n&&r.push(s);for(const n of t)r.find(({schemeId:s})=>s===n.schemeId)||r.push(n);return r};function Qt(t){const e=new Map;for(const r of t)e.set(r.schemeId,r);return e}const Kt=(t,e)=>(r,n)=>async s=>{const i=t.httpAuthSchemeProvider(await e.httpAuthSchemeParametersProvider(t,n,s.input)),a=t.authSchemePreference?await t.authSchemePreference():[],o=Jt(i,a),c=Qt(t.httpAuthSchemes),u=se(n),h=[];for(const l of o){const d=c.get(l.schemeId);if(!d){h.push(`HttpAuthScheme \`${l.schemeId}\` was not enabled for this service.`);continue}const f=d.identityProvider(await e.identityProviderConfigProvider(t));if(!f){h.push(`HttpAuthScheme \`${l.schemeId}\` did not have an IdentityProvider configured.`);continue}const{identityProperties:m={},signingProperties:y={}}=l.propertiesExtractor?.(t,n)||{};l.identityProperties=Object.assign(l.identityProperties||{},m),l.signingProperties=Object.assign(l.signingProperties||{},y),u.selectedHttpAuthScheme={httpAuthOption:l,identity:await f(l.identityProperties),signer:d.signer};break}if(!u.selectedHttpAuthScheme)throw new Error(h.join(`
`));return r(s)},Xt={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},yi=(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(Kt(t,{httpAuthSchemeParametersProvider:e,identityProviderConfigProvider:r}),Xt)}}),Zt={name:"serializerMiddleware"},Yt=t=>e=>{throw e},er=(t,e)=>{},tr=t=>(e,r)=>async n=>{if(!U.isInstance(n.request))return e(n);const i=se(r).selectedHttpAuthScheme;if(!i)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:a={}},identity:o,signer:c}=i,u=await e({...n,request:await c.sign(n.request,o,a)}).catch((c.errorHandler||Yt)(a));return(c.successHandler||er)(u.response,a),u},rr={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},pi=t=>({applyToStack:e=>{e.addRelativeTo(tr(),rr)}}),wi=t=>{if(typeof t=="function")return t;const e=Promise.resolve(t);return()=>e},ht="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fe=Object.entries(ht).reduce((t,[e,r])=>(t[r]=Number(e),t),{}),nr=ht.split(""),G=6,K=8,sr=63,ue=t=>{let e=t.length/4*3;t.slice(-2)==="=="?e-=2:t.slice(-1)==="="&&e--;const r=new ArrayBuffer(e),n=new DataView(r);for(let s=0;s<t.length;s+=4){let i=0,a=0;for(let u=s,h=s+3;u<=h;u++)if(t[u]!=="="){if(!(t[u]in Fe))throw new TypeError(`Invalid character ${t[u]} in base64 string.`);i|=Fe[t[u]]<<(h-u)*G,a+=G}else i>>=G;const o=s/4*3;i>>=a%K;const c=Math.floor(a/K);for(let u=0;u<c;u++){const h=(c-u-1)*K;n.setUint8(o+u,(i&255<<h)>>h)}}return new Uint8Array(r)},L=t=>new TextEncoder().encode(t),te=t=>typeof t=="string"?L(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t),ie=t=>{if(typeof t=="string")return t;if(typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return new TextDecoder("utf-8").decode(t)};function re(t){let e;typeof t=="string"?e=L(t):e=t;const r=typeof e=="object"&&typeof e.length=="number",n=typeof e=="object"&&typeof e.byteOffset=="number"&&typeof e.byteLength=="number";if(!r&&!n)throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let s="";for(let i=0;i<e.length;i+=3){let a=0,o=0;for(let u=i,h=Math.min(i+3,e.length);u<h;u++)a|=e[u]<<(h-u-1)*K,o+=K;const c=Math.ceil(o/G);a<<=c*G-o;for(let u=1;u<=c;u++){const h=(c-u)*G;s+=nr[(a&sr<<h)>>h]}s+="==".slice(0,4-c)}return s}class j extends Uint8Array{static fromString(e,r="utf-8"){if(typeof e=="string")return r==="base64"?j.mutate(ue(e)):j.mutate(L(e));throw new Error(`Unsupported conversion from ${typeof e} to Uint8ArrayBlobAdapter.`)}static mutate(e){return Object.setPrototypeOf(e,j.prototype),e}transformToString(e="utf-8"){return e==="base64"?re(this):ie(this)}}const ir=typeof ReadableStream=="function"?ReadableStream:function(){};class ar extends ir{}const xe=t=>typeof ReadableStream=="function"&&(t?.constructor?.name===ReadableStream.name||t instanceof ReadableStream),bi=({expectedChecksum:t,checksum:e,source:r,checksumSourceLocation:n,base64Encoder:s})=>{if(!xe(r))throw new Error(`@smithy/util-stream: unsupported source type ${r?.constructor?.name??r} in ChecksumStream.`);const i=s??re;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");const a=new TransformStream({start(){},async transform(c,u){e.update(c),u.enqueue(c)},async flush(c){const u=await e.digest(),h=i(u);if(t!==h){const l=new Error(`Checksum mismatch: expected "${t}" but received "${h}" in response header "${n}".`);c.error(l)}else c.terminate()}});r.pipeThrough(a);const o=a.readable;return Object.setPrototypeOf(o,ar.prototype),o};class or{allocByteArray;byteLength=0;byteArrays=[];constructor(e){this.allocByteArray=e}push(e){this.byteArrays.push(e),this.byteLength+=e.byteLength}flush(){if(this.byteArrays.length===1){const n=this.byteArrays[0];return this.reset(),n}const e=this.allocByteArray(this.byteLength);let r=0;for(let n=0;n<this.byteArrays.length;++n){const s=this.byteArrays[n];e.set(s,r),r+=s.byteLength}return this.reset(),e}reset(){this.byteArrays=[],this.byteLength=0}}function cr(t,e,r){const n=t.getReader();let s=!1,i=0;const a=["",new or(u=>new Uint8Array(u))];let o=-1;const c=async u=>{const{value:h,done:l}=await n.read(),d=h;if(l){if(o!==-1){const f=me(a,o);X(f)>0&&u.enqueue(f)}u.close()}else{const f=lr(d,!1);if(o!==f&&(o>=0&&u.enqueue(me(a,o)),o=f),o===-1){u.enqueue(d);return}const m=X(d);i+=m;const y=X(a[o]);if(m>=e&&y===0)u.enqueue(d);else{const g=ur(a,o,d);!s&&i>e*2&&(s=!0,r?.warn(`@smithy/util-stream - stream chunk size ${m} is below threshold of ${e}, automatically buffering.`)),g>=e?u.enqueue(me(a,o)):await c(u)}}};return new ReadableStream({pull:c})}const Si=cr;function ur(t,e,r){switch(e){case 0:return t[0]+=r,X(t[0]);case 1:case 2:return t[e].push(r),X(t[e])}}function me(t,e){switch(e){case 0:const r=t[0];return t[0]="",r;case 1:case 2:return t[e].flush()}throw new Error(`@smithy/util-stream - invalid index ${e} given to flush()`)}function X(t){return t?.byteLength??t?.length??0}function lr(t,e=!0){return e&&typeof He<"u"&&t instanceof He?2:t instanceof Uint8Array?1:typeof t=="string"?0:-1}const Ti=(t,e)=>{const{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:a}=e,o=r!==void 0&&n!==void 0&&s!==void 0&&i!==void 0&&a!==void 0,c=o?a(s,t):void 0,u=t.getReader();return new ReadableStream({async pull(h){const{value:l,done:d}=await u.read();if(d){if(h.enqueue(`0\r
`),o){const f=r(await c);h.enqueue(`${i}:${f}\r
`),h.enqueue(`\r
`)}h.close()}else h.enqueue(`${(n(l)||0).toString(16)}\r
${l}\r
`)}})};async function Ri(t,e){let r=0;const n=[],s=t.getReader();let i=!1;for(;!i;){const{done:c,value:u}=await s.read();if(u&&(n.push(u),r+=u?.byteLength??0),r>=e)break;i=c}s.releaseLock();const a=new Uint8Array(Math.min(e,r));let o=0;for(const c of n){if(c.byteLength>a.byteLength-o){a.set(c.subarray(0,a.byteLength-o),o);break}else a.set(c,o);o+=c.length}return a}const q=t=>encodeURIComponent(t).replace(/[!'()*]/g,fr),fr=t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`;function dr(t){const e=[];for(let r of Object.keys(t).sort()){const n=t[r];if(r=q(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)e.push(`${r}=${q(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${q(n)}`),e.push(s)}}return e.join("&")}function je(t,e){return new Request(t,e)}function hr(t=0){return new Promise((e,r)=>{t&&setTimeout(()=>{const n=new Error(`Request did not complete within ${t} ms`);n.name="TimeoutError",r(n)},t)})}const ge={supported:void 0};class mt{config;configProvider;static create(e){return typeof e?.handle=="function"?e:new mt(e)}constructor(e){typeof e=="function"?this.configProvider=e().then(r=>r||{}):(this.config=e??{},this.configProvider=Promise.resolve(this.config)),ge.supported===void 0&&(ge.supported=typeof Request<"u"&&"keepalive"in je("https://[::1]"))}destroy(){}async handle(e,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);const s=n??this.config.requestTimeout,i=this.config.keepAlive===!0,a=this.config.credentials;if(r?.aborted){const p=new Error("Request aborted");return p.name="AbortError",Promise.reject(p)}let o=e.path;const c=dr(e.query||{});c&&(o+=`?${c}`),e.fragment&&(o+=`#${e.fragment}`);let u="";if(e.username!=null||e.password!=null){const p=e.username??"",b=e.password??"";u=`${p}:${b}@`}const{port:h,method:l}=e,d=`${e.protocol}//${u}${e.hostname}${h?`:${h}`:""}${o}`,f=l==="GET"||l==="HEAD"?void 0:e.body,m={body:f,headers:new Headers(e.headers),method:l,credentials:a};this.config?.cache&&(m.cache=this.config.cache),f&&(m.duplex="half"),typeof AbortController<"u"&&(m.signal=r),ge.supported&&(m.keepalive=i),typeof this.config.requestInit=="function"&&Object.assign(m,this.config.requestInit(e));let y=()=>{};const g=je(d,m),w=[fetch(g).then(p=>{const b=p.headers,S={};for(const R of b.entries())S[R[0]]=R[1];return p.body!=null?{response:new ee({headers:S,reason:p.statusText,statusCode:p.status,body:p.body})}:p.blob().then(R=>({response:new ee({headers:S,reason:p.statusText,statusCode:p.status,body:R})}))}),hr(s)];return r&&w.push(new Promise((p,b)=>{const S=()=>{const M=new Error("Request aborted");M.name="AbortError",b(M)};if(typeof r.addEventListener=="function"){const M=r;M.addEventListener("abort",S,{once:!0}),y=()=>M.removeEventListener("abort",S)}else r.onabort=S})),Promise.race(w).finally(y)}updateHttpClientConfig(e,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[e]=r,n))}httpHandlerConfigs(){return this.config??{}}}const mr=async t=>typeof Blob=="function"&&t instanceof Blob||t.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await t.arrayBuffer()):gr(t):yr(t);async function gr(t){const e=await pr(t),r=ue(e);return new Uint8Array(r)}async function yr(t){const e=[],r=t.getReader();let n=!1,s=0;for(;!n;){const{done:o,value:c}=await r.read();c&&(e.push(c),s+=c.length),n=o}const i=new Uint8Array(s);let a=0;for(const o of e)i.set(o,a),a+=o.length;return i}function pr(t){return new Promise((e,r)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));const s=n.result??"",i=s.indexOf(","),a=i>-1?i+1:s.length;e(s.substring(a))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(t)})}const gt={},Ae={};for(let t=0;t<256;t++){let e=t.toString(16).toLowerCase();e.length===1&&(e=`0${e}`),gt[t]=e,Ae[e]=t}function yt(t){if(t.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const e=new Uint8Array(t.length/2);for(let r=0;r<t.length;r+=2){const n=t.slice(r,r+2).toLowerCase();if(n in Ae)e[r/2]=Ae[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return e}function $(t){let e="";for(let r=0;r<t.byteLength;r++)e+=gt[t[r]];return e}const qe="The stream has already been transformed.",wr=t=>{if(!Ve(t)&&!xe(t)){const s=t?.__proto__?.constructor?.name||t;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${s}`)}let e=!1;const r=async()=>{if(e)throw new Error(qe);return e=!0,await mr(t)},n=s=>{if(typeof s.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return s.stream()};return Object.assign(t,{transformToByteArray:r,transformToString:async s=>{const i=await r();if(s==="base64")return re(i);if(s==="hex")return $(i);if(s===void 0||s==="utf8"||s==="utf-8")return ie(i);if(typeof TextDecoder=="function")return new TextDecoder(s).decode(i);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(e)throw new Error(qe);if(e=!0,Ve(t))return n(t);if(xe(t))return t;throw new Error(`Cannot transform payload to web stream, got ${t}`)}})},Ve=t=>typeof Blob=="function"&&t instanceof Blob;async function vi(t){return typeof t.stream=="function"&&(t=t.stream()),t.tee()}const ae=async(t=new Uint8Array,e)=>{if(t instanceof Uint8Array)return j.mutate(t);if(!t)return j.mutate(new Uint8Array);const r=e.streamCollector(t);return j.mutate(await r)};function Ge(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}const ye=t=>typeof t=="function"?t():t,pt=(t,e,r,n,s)=>({name:e,namespace:t,traits:r,input:n,output:s}),br=t=>(e,r)=>async n=>{const{response:s}=await e(n),{operationSchema:i}=se(r),[,a,o,c,u,h]=i??[];try{const l=await t.protocol.deserializeResponse(pt(a,o,c,u,h),{...t,...r},s);return{response:s,output:l}}catch(l){if(Object.defineProperty(l,"$response",{value:s,enumerable:!1,writable:!1,configurable:!1}),!("$metadata"in l)){const d="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{l.message+=`
  `+d}catch{!r.logger||r.logger?.constructor?.name==="NoOpLogger"?console.warn(d):r.logger?.warn?.(d)}typeof l.$responseBodyText<"u"&&l.$response&&(l.$response.body=l.$responseBodyText);try{if(ee.isInstance(s)){const{headers:f={}}=s,m=Object.entries(f);l.$metadata={httpStatusCode:s.statusCode,requestId:pe(/^x-[\w-]+-request-?id$/,m),extendedRequestId:pe(/^x-[\w-]+-id-2$/,m),cfId:pe(/^x-[\w-]+-cf-id$/,m)}}}catch{}}throw l}},pe=(t,e)=>(e.find(([r])=>r.match(t))||[void 0,void 0])[1],Sr=t=>(e,r)=>async n=>{const{operationSchema:s}=se(r),[,i,a,o,c,u]=s??[],h=r.endpointV2?.url&&t.urlParser?async()=>t.urlParser(r.endpointV2.url):t.endpoint,l=await t.protocol.serializeRequest(pt(i,a,o,c,u),n.input,{...t,...r,endpoint:h});return e({...n,request:l})},Tr={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Rr={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Ei(t){return{applyToStack:e=>{e.add(Sr(t),Rr),e.add(br(t),Tr),t.protocol.setSerdeContext(t)}}}function V(t){if(typeof t=="object")return t;t=t|0;const e={};let r=0;for(const n of["httpLabel","idempotent","idempotencyToken","sensitive","httpPayload","httpResponseCode","httpQueryParams"])(t>>r++&1)===1&&(e[n]=1);return e}const We={it:Symbol.for("@smithy/nor-struct-it")};class T{ref;memberName;static symbol=Symbol.for("@smithy/nor");symbol=T.symbol;name;schema;_isMemberSchema;traits;memberTraits;normalizedTraits;constructor(e,r){this.ref=e,this.memberName=r;const n=[];let s=e,i=e;for(this._isMemberSchema=!1;we(s);)n.push(s[1]),s=s[0],i=ye(s),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let a=n.length-1;a>=0;--a){const o=n[a];Object.assign(this.memberTraits,V(o))}}else this.memberTraits=0;if(i instanceof T){const a=this.memberTraits;Object.assign(this,i),this.memberTraits=Object.assign({},a,i.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.memberName=r??i.memberName;return}if(this.schema=ye(i),vr(this.schema)?(this.name=`${this.schema[1]}#${this.schema[2]}`,this.traits=this.schema[3]):(this.name=this.memberName??String(i),this.traits=0),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member init ${this.getName(!0)} missing member name.`)}static[Symbol.hasInstance](e){const r=this.prototype.isPrototypeOf(e);return!r&&typeof e=="object"&&e!==null?e.symbol===this.symbol:r}static of(e){const r=ye(e);if(r instanceof T)return r;if(we(r)){const[n,s]=r;if(n instanceof T)return Object.assign(n.getMergedTraits(),V(s)),n;throw new Error(`@smithy/core/schema - may not init unwrapped member schema=${JSON.stringify(e,null,2)}.`)}return new T(r)}getSchema(){const e=this.schema;return Array.isArray(e)&&e[0]===0?e[4]:e}getName(e=!1){const{name:r}=this;return!e&&r&&r.includes("#")?r.split("#")[1]:r||void 0}getMemberName(){return this.memberName}isMemberSchema(){return this._isMemberSchema}isListSchema(){const e=this.getSchema();return typeof e=="number"?e>=64&&e<128:e[0]===1}isMapSchema(){const e=this.getSchema();return typeof e=="number"?e>=128&&e<=255:e[0]===2}isStructSchema(){const e=this.getSchema();if(typeof e!="object")return!1;const r=e[0];return r===3||r===-3||r===4}isUnionSchema(){const e=this.getSchema();return typeof e!="object"?!1:e[0]===4}isBlobSchema(){const e=this.getSchema();return e===21||e===42}isTimestampSchema(){const e=this.getSchema();return typeof e=="number"&&e>=4&&e<=7}isUnitSchema(){return this.getSchema()==="unit"}isDocumentSchema(){return this.getSchema()===15}isStringSchema(){return this.getSchema()===0}isBooleanSchema(){return this.getSchema()===2}isNumericSchema(){return this.getSchema()===1}isBigIntegerSchema(){return this.getSchema()===17}isBigDecimalSchema(){return this.getSchema()===19}isStreaming(){const{streaming:e}=this.getMergedTraits();return!!e||this.getSchema()===42}isIdempotencyToken(){return!!this.getMergedTraits().idempotencyToken}getMergedTraits(){return this.normalizedTraits??(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()})}getMemberTraits(){return V(this.memberTraits)}getOwnTraits(){return V(this.traits)}getKeySchema(){const[e,r]=[this.isDocumentSchema(),this.isMapSchema()];if(!e&&!r)throw new Error(`@smithy/core/schema - cannot get key for non-map: ${this.getName(!0)}`);const n=this.getSchema(),s=e?15:n[4]??0;return J([s,0],"key")}getValueSchema(){const e=this.getSchema(),[r,n,s]=[this.isDocumentSchema(),this.isMapSchema(),this.isListSchema()],i=typeof e=="number"?63&e:e&&typeof e=="object"&&(n||s)?e[3+e[0]]:r?15:void 0;if(i!=null)return J([i,0],n?"value":"member");throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no value member.`)}getMemberSchema(e){const r=this.getSchema();if(this.isStructSchema()&&r[4].includes(e)){const n=r[4].indexOf(e),s=r[5][n];return J(we(s)?s:[s,0],e)}if(this.isDocumentSchema())return J([15,0],e);throw new Error(`@smithy/core/schema - ${this.getName(!0)} has no no member=${e}.`)}getMemberSchemas(){const e={};try{for(const[r,n]of this.structIterator())e[r]=n}catch{}return e}getEventStreamMember(){if(this.isStructSchema()){for(const[e,r]of this.structIterator())if(r.isStreaming()&&r.isStructSchema())return e}return""}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot iterate non-struct schema.");const e=this.getSchema(),r=e[4].length;let n=e[We.it];if(n&&r===n.length){yield*n;return}n=Array(r);for(let s=0;s<r;++s){const i=e[4][s],a=J([e[5][s],0],i);yield n[s]=[i,a]}e[We.it]=n}}function J(t,e){if(t instanceof T)return Object.assign(t,{memberName:e,_isMemberSchema:!0});const r=T;return new r(t,e)}const we=t=>Array.isArray(t)&&t.length===2,vr=t=>Array.isArray(t)&&t.length>=5;class O{namespace;schemas;exceptions;static registries=new Map;constructor(e,r=new Map,n=new Map){this.namespace=e,this.schemas=r,this.exceptions=n}static for(e){return O.registries.has(e)||O.registries.set(e,new O(e)),O.registries.get(e)}copyFrom(e){const{schemas:r,exceptions:n}=this;for(const[s,i]of e.schemas)r.has(s)||r.set(s,i);for(const[s,i]of e.exceptions)n.has(s)||n.set(s,i)}register(e,r){const n=this.normalizeShapeId(e);for(const s of[this,O.for(n.split("#")[0])])s.schemas.set(n,r)}getSchema(e){const r=this.normalizeShapeId(e);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}registerError(e,r){const n=e,s=n[1];for(const i of[this,O.for(s)])i.schemas.set(s+"#"+n[2],n),i.exceptions.set(n,r)}getErrorCtor(e){const r=e;return this.exceptions.has(r)?this.exceptions.get(r):O.for(r[1]).exceptions.get(r)}getBaseException(){for(const e of this.exceptions.keys())if(Array.isArray(e)){const[,r,n]=e,s=r+"#"+n;if(s.startsWith("smithy.ts.sdk.synthetic.")&&s.endsWith("ServiceException"))return e}}find(e){return[...this.schemas.values()].find(e)}clear(){this.schemas.clear(),this.exceptions.clear()}normalizeShapeId(e){return e.includes("#")?e:this.namespace+"#"+e}}const Er=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Cr=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function xr(t){const e=t.getUTCFullYear(),r=t.getUTCMonth(),n=t.getUTCDay(),s=t.getUTCDate(),i=t.getUTCHours(),a=t.getUTCMinutes(),o=t.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,h=a<10?`0${a}`:`${a}`,l=o<10?`0${o}`:`${o}`;return`${Er[n]}, ${c} ${Cr[r]} ${e} ${u}:${h}:${l} GMT`}const Je=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),v=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),wt=()=>{if(Je)return Je();const t=new Uint8Array(16);return crypto.getRandomValues(t),t[6]=t[6]&15|64,t[8]=t[8]&63|128,v[t[0]]+v[t[1]]+v[t[2]]+v[t[3]]+"-"+v[t[4]]+v[t[5]]+"-"+v[t[6]]+v[t[7]]+"-"+v[t[8]]+v[t[9]]+"-"+v[t[10]]+v[t[11]]+v[t[12]]+v[t[13]]+v[t[14]]+v[t[15]]},B=function(e){return Object.assign(new String(e),{deserializeJSON(){return JSON.parse(String(e))},toString(){return String(e)},toJSON(){return String(e)}})};B.from=t=>t&&typeof t=="object"&&(t instanceof B||"deserializeJSON"in t)?t:typeof t=="string"||Object.getPrototypeOf(t)===String.prototype?B(String(t)):B(JSON.stringify(t));B.fromObject=B.from;function Ar(t){return(t.includes(",")||t.includes('"'))&&(t=`"${t.replace(/"/g,'\\"')}"`),t}const Ne="(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)(?:[ne|u?r]?s?day)?",ke="(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)",Pe="(\\d?\\d):(\\d{2}):(\\d{2})(?:\\.(\\d+))?",bt="(\\d?\\d)",St="(\\d{4})",Mr=new RegExp(/^(\d{4})-(\d\d)-(\d\d)[tT](\d\d):(\d\d):(\d\d)(\.(\d+))?(([-+]\d\d:\d\d)|[zZ])$/),$r=new RegExp(`^${Ne}, ${bt} ${ke} ${St} ${Pe} GMT$`),Ir=new RegExp(`^${Ne}, ${bt}-${ke}-(\\d\\d) ${Pe} GMT$`),Ur=new RegExp(`^${Ne} ${ke} ( [1-9]|\\d\\d) ${Pe} ${St}$`),Or=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Nr=t=>{if(t==null)return;let e=NaN;if(typeof t=="number")e=t;else if(typeof t=="string"){if(!/^-?\d*\.?\d+$/.test(t))throw new TypeError("parseEpochTimestamp - numeric string invalid.");e=Number.parseFloat(t)}else typeof t=="object"&&t.tag===1&&(e=t.value);if(isNaN(e)||Math.abs(e)===1/0)throw new TypeError("Epoch timestamps must be valid finite numbers.");return new Date(Math.round(e*1e3))},kr=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC3339 timestamps must be strings");const e=Mr.exec(t);if(!e)throw new TypeError(`Invalid RFC3339 timestamp format ${t}`);const[,r,n,s,i,a,o,,c,u]=e;N(n,1,12),N(s,1,31),N(i,0,23),N(a,0,59),N(o,0,60);const h=new Date(Date.UTC(Number(r),Number(n)-1,Number(s),Number(i),Number(a),Number(o),Number(c)?Math.round(parseFloat(`0.${c}`)*1e3):0));if(h.setUTCFullYear(Number(r)),u.toUpperCase()!="Z"){const[,l,d,f]=/([+-])(\d\d):(\d\d)/.exec(u)||[void 0,"+",0,0],m=l==="-"?1:-1;h.setTime(h.getTime()+m*(Number(d)*60*60*1e3+Number(f)*60*1e3))}return h},Pr=t=>{if(t==null)return;if(typeof t!="string")throw new TypeError("RFC7231 timestamps must be strings.");let e,r,n,s,i,a,o,c;if((c=$r.exec(t))?[,e,r,n,s,i,a,o]=c:(c=Ir.exec(t))?([,e,r,n,s,i,a,o]=c,n=(Number(n)+1900).toString()):(c=Ur.exec(t))&&([,r,e,s,i,a,o,n]=c),n&&a){const u=Date.UTC(Number(n),Or.indexOf(r),Number(e),Number(s),Number(i),Number(a),o?Math.round(parseFloat(`0.${o}`)*1e3):0);N(e,1,31),N(s,0,23),N(i,0,59),N(a,0,60);const h=new Date(u);return h.setUTCFullYear(Number(n)),h}throw new TypeError(`Invalid RFC7231 date-time value ${t}.`)};function N(t,e,r){const n=Number(t);if(n<e||n>r)throw new Error(`Value ${n} out of range [${e}, ${r}]`)}function Dr(t,e,r){if(!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");const n=t.split(e),s=[];let i="";for(let a=0;a<n.length;a++)i===""?i=n[a]:i+=e+n[a],(a+1)%r===0&&(s.push(i),i="");return i!==""&&s.push(i),s}const Tt=t=>{const e=t.length,r=[];let n=!1,s,i=0;for(let a=0;a<e;++a){const o=t[a];switch(o){case'"':s!=="\\"&&(n=!n);break;case",":n||(r.push(t.slice(i,a)),i=a+1);break}s=o}return r.push(t.slice(i)),r.map(a=>{a=a.trim();const o=a.length;return o<2?a:(a[0]==='"'&&a[o-1]==='"'&&(a=a.slice(1,o-1)),a.replace(/\\"/g,'"'))})},Qe=/^-?\d*(\.\d+)?$/;class De{string;type;constructor(e,r){if(this.string=e,this.type=r,!Qe.test(e))throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}toString(){return this.string}static[Symbol.hasInstance](e){if(!e||typeof e!="object")return!1;const r=e;return De.prototype.isPrototypeOf(e)||r.type==="bigDecimal"&&Qe.test(r.string)}}class fe{serdeContext;setSerdeContext(e){this.serdeContext=e}}class Br extends fe{options;compositeErrorRegistry;constructor(e){super(),this.options=e,this.compositeErrorRegistry=O.for(e.defaultNamespace);for(const r of e.errorTypeRegistries??[])this.compositeErrorRegistry.copyFrom(r)}getRequestType(){return U}getResponseType(){return ee}setSerdeContext(e){this.serdeContext=e,this.serializer.setSerdeContext(e),this.deserializer.setSerdeContext(e),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(e)}updateServiceEndpoint(e,r){if("url"in r){e.protocol=r.url.protocol,e.hostname=r.url.hostname,e.port=r.url.port?Number(r.url.port):void 0,e.path=r.url.pathname,e.fragment=r.url.hash||void 0,e.username=r.url.username||void 0,e.password=r.url.password||void 0,e.query||(e.query={});for(const[n,s]of r.url.searchParams.entries())e.query[n]=s;return e}else return e.protocol=r.protocol,e.hostname=r.hostname,e.port=r.port?Number(r.port):void 0,e.path=r.path,e.query={...r.query},e}setHostPrefix(e,r,n){if(this.serdeContext?.disableHostPrefix)return;const s=T.of(r.input),i=V(r.traits??{});if(i.endpoint){let a=i.endpoint?.[0];if(typeof a=="string"){const o=[...s.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(const[c]of o){const u=n[c];if(typeof u!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);a=a.replace(`{${c}}`,u)}e.hostname=a+e.hostname}}}deserializeMetadata(e){return{httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){return(await this.loadEventStreamCapability()).serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){return(await this.loadEventStreamCapability()).deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n})}async loadEventStreamCapability(){const{EventStreamSerde:e}=await Gt(async()=>{const{EventStreamSerde:r}=await Promise.resolve().then(()=>li);return{EventStreamSerde:r}},void 0);return new e({marshaller:this.getEventStreamMarshaller(),serializer:this.serializer,deserializer:this.deserializer,serdeContext:this.serdeContext,defaultContentType:this.getDefaultContentType()})}getDefaultContentType(){throw new Error(`@smithy/core/protocols - ${this.constructor.name} getDefaultContentType() implementation missing.`)}async deserializeHttpMessage(e,r,n,s,i){return[]}getEventStreamMarshaller(){const e=this.serdeContext;if(!e.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");return e.eventStreamMarshaller}}class Ci extends Br{async serializeRequest(e,r,n){const s={...r??{}},i=this.serializer,a={},o={},c=await n.endpoint(),u=T.of(e?.input),h=u.getSchema();let l=!1,d;const f=new U({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:a,headers:o,body:void 0});if(c){this.updateServiceEndpoint(f,c),this.setHostPrefix(f,e,s);const m=V(e.traits);if(m.http){f.method=m.http[0];const[y,g]=m.http[1].split("?");f.path=="/"?f.path=y:f.path+=y;const w=new URLSearchParams(g??"");Object.assign(a,Object.fromEntries(w))}}for(const[m,y]of u.structIterator()){const g=y.getMergedTraits()??{},w=s[m];if(w==null&&!y.isIdempotencyToken()){if(g.httpLabel&&(f.path.includes(`{${m}+}`)||f.path.includes(`{${m}}`)))throw new Error(`No value provided for input HTTP label: ${m}.`);continue}if(g.httpPayload)y.isStreaming()?y.isStructSchema()?s[m]&&(d=await this.serializeEventStream({eventStream:s[m],requestSchema:u})):d=w:(i.write(y,w),d=i.flush()),delete s[m];else if(g.httpLabel){i.write(y,w);const p=i.flush();f.path.includes(`{${m}+}`)?f.path=f.path.replace(`{${m}+}`,p.split("/").map(Ge).join("/")):f.path.includes(`{${m}}`)&&(f.path=f.path.replace(`{${m}}`,Ge(p))),delete s[m]}else if(g.httpHeader)i.write(y,w),o[g.httpHeader.toLowerCase()]=String(i.flush()),delete s[m];else if(typeof g.httpPrefixHeaders=="string"){for(const[p,b]of Object.entries(w)){const S=g.httpPrefixHeaders+p;i.write([y.getValueSchema(),{httpHeader:S}],b),o[S.toLowerCase()]=i.flush()}delete s[m]}else g.httpQuery||g.httpQueryParams?(this.serializeQuery(y,w,a),delete s[m]):l=!0}return l&&s&&(i.write(h,s),d=i.flush()),f.headers=o,f.query=a,f.body=d,f}serializeQuery(e,r,n){const s=this.serializer,i=e.getMergedTraits();if(i.httpQueryParams){for(const[a,o]of Object.entries(r))if(!(a in n)){const c=e.getValueSchema();Object.assign(c.getMergedTraits(),{...i,httpQuery:a,httpQueryParams:void 0}),this.serializeQuery(c,o,n)}return}if(e.isListSchema()){const a=!!e.getMergedTraits().sparse,o=[];for(const c of r){s.write([e.getValueSchema(),i],c);const u=s.flush();(a||u!==void 0)&&o.push(u)}n[i.httpQuery]=o}else s.write([e,i],r),n[i.httpQuery]=s.flush()}async deserializeResponse(e,r,n){const s=this.deserializer,i=T.of(e.output),a={};if(n.statusCode>=300){const c=await ae(n.body,r);throw c.byteLength>0&&Object.assign(a,await s.read(15,c)),await this.handleError(e,r,n,a,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(const c in n.headers){const u=n.headers[c];delete n.headers[c],n.headers[c.toLowerCase()]=u}const o=await this.deserializeHttpMessage(i,r,n,a);if(o.length){const c=await ae(n.body,r);if(c.byteLength>0){const u=await s.read(i,c);for(const h of o)a[h]=u[h]}}else o.discardResponseBody&&await ae(n.body,r);return a.$metadata=this.deserializeMetadata(n),a}async deserializeHttpMessage(e,r,n,s,i){let a;s instanceof Set?a=i:a=s;let o=!0;const c=this.deserializer,u=T.of(e),h=[];for(const[l,d]of u.structIterator()){const f=d.getMemberTraits();if(f.httpPayload){if(o=!1,d.isStreaming())d.isStructSchema()?a[l]=await this.deserializeEventStream({response:n,responseSchema:u}):a[l]=wr(n.body);else if(n.body){const y=await ae(n.body,r);y.byteLength>0&&(a[l]=await c.read(d,y))}}else if(f.httpHeader){const m=String(f.httpHeader).toLowerCase(),y=n.headers[m];if(y!=null)if(d.isListSchema()){const g=d.getValueSchema();g.getMergedTraits().httpHeader=m;let w;g.isTimestampSchema()&&g.getSchema()===4?w=Dr(y,",",2):w=Tt(y);const p=[];for(const b of w)p.push(await c.read(g,b.trim()));a[l]=p}else a[l]=await c.read(d,y)}else if(f.httpPrefixHeaders!==void 0){a[l]={};for(const[m,y]of Object.entries(n.headers))if(m.startsWith(f.httpPrefixHeaders)){const g=d.getValueSchema();g.getMergedTraits().httpHeader=m,a[l][m.slice(f.httpPrefixHeaders.length)]=await c.read(g,y)}}else f.httpResponseCode?a[l]=n.statusCode:h.push(l)}return h.discardResponseBody=o,h}}function Rt(t,e){if(e.timestampFormat.useTrait&&t.isTimestampSchema()&&(t.getSchema()===5||t.getSchema()===6||t.getSchema()===7))return t.getSchema();const{httpLabel:r,httpPrefixHeaders:n,httpHeader:s,httpQuery:i}=t.getMergedTraits();return(e.httpBindings?typeof n=="string"||s?6:i||r?5:void 0:void 0)??e.timestampFormat.default}class Lr extends fe{settings;constructor(e){super(),this.settings=e}read(e,r){const n=T.of(e);if(n.isListSchema())return Tt(r).map(s=>this.read(n.getValueSchema(),s));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??ue)(r);if(n.isTimestampSchema())switch(Rt(n,this.settings)){case 5:return kr(r);case 6:return Pr(r);case 7:return Nr(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){const s=n.getMergedTraits().mediaType;let i=r;if(s)return n.getMergedTraits().httpHeader&&(i=this.base64ToUtf8(i)),(s==="application/json"||s.endsWith("+json"))&&(i=B.from(i)),i}return n.isNumericSchema()?Number(r):n.isBigIntegerSchema()?BigInt(r):n.isBigDecimalSchema()?new De(r,"bigDecimal"):n.isBooleanSchema()?String(r).toLowerCase()==="true":r}base64ToUtf8(e){return(this.serdeContext?.utf8Encoder??ie)((this.serdeContext?.base64Decoder??ue)(e))}}class xi extends fe{codecDeserializer;stringDeserializer;constructor(e,r){super(),this.codecDeserializer=e,this.stringDeserializer=new Lr(r)}setSerdeContext(e){this.stringDeserializer.setSerdeContext(e),this.codecDeserializer.setSerdeContext(e),this.serdeContext=e}read(e,r){const n=T.of(e),s=n.getMergedTraits(),i=this.serdeContext?.utf8Encoder??ie;if(s.httpHeader||s.httpResponseCode)return this.stringDeserializer.read(n,i(r));if(s.httpPayload){if(n.isBlobSchema()){const a=this.serdeContext?.utf8Decoder??L;return typeof r=="string"?a(r):r}else if(n.isStringSchema())return"byteLength"in r?i(r):r}return this.codecDeserializer.read(n,r)}}class zr extends fe{settings;stringBuffer="";constructor(e){super(),this.settings=e}write(e,r){const n=T.of(e);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(Rt(n,this.settings)){case 5:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case 6:this.stringBuffer=xr(r);break;case 7:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??re)(r);return}if(n.isListSchema()&&Array.isArray(r)){let a="";for(const o of r){this.write([n.getValueSchema(),n.getMergedTraits()],o);const c=this.flush(),u=n.getValueSchema().isTimestampSchema()?c:Ar(c);a!==""&&(a+=", "),a+=u}this.stringBuffer=a;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":const s=n.getMergedTraits().mediaType;let i=r;if(s&&((s==="application/json"||s.endsWith("+json"))&&(i=B.from(i)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??re)(i.toString());return}this.stringBuffer=r;break;default:n.isIdempotencyToken()?this.stringBuffer=wt():this.stringBuffer=String(r)}}flush(){const e=this.stringBuffer;return this.stringBuffer="",e}}class Ai{codecSerializer;stringSerializer;buffer;constructor(e,r,n=new zr(r)){this.codecSerializer=e,this.stringSerializer=n}setSerdeContext(e){this.codecSerializer.setSerdeContext(e),this.stringSerializer.setSerdeContext(e)}write(e,r){const n=T.of(e),s=n.getMergedTraits();if(s.httpHeader||s.httpLabel||s.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){const e=this.buffer;return this.buffer=void 0,e}return this.codecSerializer.flush()}}function _r(t,e,r){t.__smithy_context?t.__smithy_context.features||(t.__smithy_context.features={}):t.__smithy_context={features:{}},t.__smithy_context.features[e]=r}class Mi{authSchemes=new Map;constructor(e){for(const[r,n]of Object.entries(e))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(e){return this.authSchemes.get(e)}}const Hr=t=>function(r){return jr(r)&&r.expiration.getTime()-Date.now()<t},Fr=3e5,$i=Hr(Fr),jr=t=>t.expiration!==void 0,Ii=(t,e,r)=>{if(t===void 0)return;const n=typeof t!="function"?async()=>Promise.resolve(t):t;let s,i,a,o=!1;const c=async u=>{i||(i=n(u));try{s=await i,a=!0,o=!1}finally{i=void 0}return s};return e===void 0?async u=>((!a||u?.forceRefresh)&&(s=await c(u)),s):async u=>((!a||u?.forceRefresh)&&(s=await c(u)),o?s:r(s)?(e(s)&&await c(u),s):(o=!0,s))},qr=(t,e,r)=>{let n,s,i,a=!1;const o=async()=>{s||(s=t());try{n=await s,i=!0,a=!1}finally{s=void 0}return n};return async c=>((!i||c?.forceRefresh)&&(n=await o()),n)},Vr="X-Amz-Algorithm",Gr="X-Amz-Credential",vt="X-Amz-Date",Wr="X-Amz-SignedHeaders",Jr="X-Amz-Expires",Et="X-Amz-Signature",Ct="X-Amz-Security-Token",xt="authorization",At=vt.toLowerCase(),Qr="date",Kr=[xt,At,Qr],Xr=Et.toLowerCase(),Me="x-amz-content-sha256",Zr=Ct.toLowerCase(),Yr={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},en=/^proxy-/,tn=/^sec-/,be="AWS4-HMAC-SHA256",rn="AWS4-HMAC-SHA256-PAYLOAD",nn="UNSIGNED-PAYLOAD",sn=50,Mt="aws4_request",an=3600*24*7,oe={},Se=[],Te=(t,e,r)=>`${t}/${e}/${r}/${Mt}`,on=async(t,e,r,n,s)=>{const i=await Ke(t,e.secretAccessKey,e.accessKeyId),a=`${r}:${n}:${s}:${$(i)}:${e.sessionToken}`;if(a in oe)return oe[a];for(Se.push(a);Se.length>sn;)delete oe[Se.shift()];let o=`AWS4${e.secretAccessKey}`;for(const c of[r,n,s,Mt])o=await Ke(t,o,c);return oe[a]=o},Ke=(t,e,r)=>{const n=new t(e);return n.update(te(r)),n.digest()},Xe=({headers:t},e,r)=>{const n={};for(const s of Object.keys(t).sort()){if(t[s]==null)continue;const i=s.toLowerCase();(i in Yr||e?.has(i)||en.test(i)||tn.test(i))&&(!r||r&&!r.has(i))||(n[i]=t[s].trim().replace(/\s+/g," "))}return n},cn=t=>typeof ArrayBuffer=="function"&&t instanceof ArrayBuffer||Object.prototype.toString.call(t)==="[object ArrayBuffer]",Re=async({headers:t,body:e},r)=>{for(const n of Object.keys(t))if(n.toLowerCase()===Me)return t[n];if(e==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof e=="string"||ArrayBuffer.isView(e)||cn(e)){const n=new r;return n.update(te(e)),$(await n.digest())}return nn};class un{format(e){const r=[];for(const i of Object.keys(e)){const a=L(i);r.push(Uint8Array.from([a.byteLength]),a,this.formatHeaderValue(e[i]))}const n=new Uint8Array(r.reduce((i,a)=>i+a.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const a=new Uint8Array(i.buffer);return a.set(e.value,3),a;case"string":const o=L(e.value),c=new DataView(new ArrayBuffer(3+o.byteLength));c.setUint8(0,7),c.setUint16(1,o.byteLength,!1);const u=new Uint8Array(c.buffer);return u.set(o,3),u;case"timestamp":const h=new Uint8Array(9);return h[0]=8,h.set(fn.fromNumber(e.value.valueOf()).bytes,1),h;case"uuid":if(!ln.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const l=new Uint8Array(17);return l[0]=9,l.set(yt(e.value.replace(/\-/g,"")),1),l}}}var Ze;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(Ze||(Ze={}));const ln=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;let fn=class $t{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&Ye(r),new $t(r)}valueOf(){const e=this.bytes.slice(0),r=e[0]&128;return r&&Ye(e),parseInt($(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Ye(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}const dn=(t,e)=>{t=t.toLowerCase();for(const r of Object.keys(e))if(t===r.toLowerCase())return!0;return!1},hn=(t,e={})=>{const{headers:r,query:n={}}=U.clone(t);for(const s of Object.keys(r)){const i=s.toLowerCase();(i.slice(0,6)==="x-amz-"&&!e.unhoistableHeaders?.has(i)||e.hoistableHeaders?.has(i))&&(n[s]=r[s],delete r[s])}return{...t,headers:r,query:n}},et=t=>{t=U.clone(t);for(const e of Object.keys(t.headers))Kr.indexOf(e.toLowerCase())>-1&&delete t.headers[e];return t},mn=({query:t={}})=>{const e=[],r={};for(const n of Object.keys(t)){if(n.toLowerCase()===Xr)continue;const s=q(n);e.push(s);const i=t[n];typeof i=="string"?r[s]=`${s}=${q(i)}`:Array.isArray(i)&&(r[s]=i.slice(0).reduce((a,o)=>a.concat([`${s}=${q(o)}`]),[]).sort().join("&"))}return e.sort().map(n=>r[n]).filter(n=>n).join("&")},gn=t=>yn(t).toISOString().replace(/\.\d{3}Z$/,"Z"),yn=t=>typeof t=="number"?new Date(t*1e3):typeof t=="string"?Number(t)?new Date(Number(t)*1e3):new Date(t):t;class pn{service;regionProvider;credentialProvider;sha256;uriEscapePath;applyChecksum;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:a=!0}){this.service=s,this.sha256=i,this.uriEscapePath=a,this.applyChecksum=typeof e=="boolean"?e:!0,this.regionProvider=F(n),this.credentialProvider=F(r)}createCanonicalRequest(e,r,n){const s=Object.keys(r).sort();return`${e.method}
${this.getCanonicalPath(e)}
${mn(e)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(e,r,n,s){const i=new this.sha256;i.update(te(n));const a=await i.digest();return`${s}
${e}
${r}
${$(a)}`}getCanonicalPath({path:e}){if(this.uriEscapePath){const r=[];for(const i of e.split("/"))i?.length!==0&&i!=="."&&(i===".."?r.pop():r.push(i));const n=`${e?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&e?.endsWith("/")?"/":""}`;return q(n).replace(/%2F/g,"/")}return e}validateResolvedCredentials(e){if(typeof e!="object"||typeof e.accessKeyId!="string"||typeof e.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(e){const r=gn(e).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(e){return Object.keys(e).sort().join(";")}}class Ui extends pn{headerFormatter=new un;constructor({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:a=!0}){super({applyChecksum:e,credentials:r,region:n,service:s,sha256:i,uriEscapePath:a})}async presign(e,r={}){const{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:a,signableHeaders:o,hoistableHeaders:c,signingRegion:u,signingService:h}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);const d=u??await this.regionProvider(),{longDate:f,shortDate:m}=this.formatDate(n);if(s>an)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const y=Te(m,d,h??this.service),g=hn(et(e),{unhoistableHeaders:a,hoistableHeaders:c});l.sessionToken&&(g.query[Ct]=l.sessionToken),g.query[Vr]=be,g.query[Gr]=`${l.accessKeyId}/${y}`,g.query[vt]=f,g.query[Jr]=s.toString(10);const w=Xe(g,i,o);return g.query[Wr]=this.getCanonicalHeaderList(w),g.query[Et]=await this.getSignature(f,y,this.getSigningKey(l,d,m,h),this.createCanonicalRequest(g,w,await Re(e,this.sha256))),g}async sign(e,r){return typeof e=="string"?this.signString(e,r):e.headers&&e.payload?this.signEvent(e,r):e.message?this.signMessage(e,r):this.signRequest(e,r)}async signEvent({headers:e,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:i,signingService:a}){const o=i??await this.regionProvider(),{shortDate:c,longDate:u}=this.formatDate(n),h=Te(c,o,a??this.service),l=await Re({headers:{},body:r},this.sha256),d=new this.sha256;d.update(e);const f=$(await d.digest()),m=[rn,u,h,s,f,l].join(`
`);return this.signString(m,{signingDate:n,signingRegion:o,signingService:a})}async signMessage(e,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerFormatter.format(e.message.headers),payload:e.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:e.priorSignature}).then(a=>({message:e.message,signature:a}))}async signString(e,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const a=n??await this.regionProvider(),{shortDate:o}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(i,a,o,s));return c.update(te(e)),$(await c.digest())}async signRequest(e,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:i,signingService:a}={}){const o=await this.credentialProvider();this.validateResolvedCredentials(o);const c=i??await this.regionProvider(),u=et(e),{longDate:h,shortDate:l}=this.formatDate(r),d=Te(l,c,a??this.service);u.headers[At]=h,o.sessionToken&&(u.headers[Zr]=o.sessionToken);const f=await Re(u,this.sha256);!dn(Me,u.headers)&&this.applyChecksum&&(u.headers[Me]=f);const m=Xe(u,s,n),y=await this.getSignature(h,d,this.getSigningKey(o,c,l,a),this.createCanonicalRequest(u,m,f));return u.headers[xt]=`${be} Credential=${o.accessKeyId}/${d}, SignedHeaders=${this.getCanonicalHeaderList(m)}, Signature=${y}`,u}async getSignature(e,r,n,s){const i=await this.createStringToSign(e,r,s,be),a=new this.sha256(await n);return a.update(te(i)),$(await a.digest())}getSigningKey(e,r,n,s){return on(this.sha256,e,n,r,s||this.service)}}const tt=typeof TextEncoder=="function"?new TextEncoder:null,Oi=t=>{if(typeof t=="string"){if(tt)return tt.encode(t).byteLength;let e=t.length;for(let r=e-1;r>=0;r--){const n=t.charCodeAt(r);n>127&&n<=2047?e++:n>2047&&n<=65535&&(e+=2),n>=56320&&n<=57343&&r--}return e}else{if(typeof t.byteLength=="number")return t.byteLength;if(typeof t.size=="number")return t.size}throw new Error(`Body Length computation failed for ${t}`)},_=(t,e)=>{const r=[];if(t&&r.push(t),e)for(const n of e)r.push(n);return r},k=(t,e)=>`${t||"anonymous"}${e&&e.length>0?` (a.k.a. ${e.join(",")})`:""}`,le=()=>{let t=[],e=[],r=!1;const n=new Set,s=l=>l.sort((d,f)=>rt[f.step]-rt[d.step]||nt[f.priority||"normal"]-nt[d.priority||"normal"]),i=l=>{let d=!1;const f=m=>{const y=_(m.name,m.aliases);if(y.includes(l)){d=!0;for(const g of y)n.delete(g);return!1}return!0};return t=t.filter(f),e=e.filter(f),d},a=l=>{let d=!1;const f=m=>{if(m.middleware===l){d=!0;for(const y of _(m.name,m.aliases))n.delete(y);return!1}return!0};return t=t.filter(f),e=e.filter(f),d},o=l=>(t.forEach(d=>{l.add(d.middleware,{...d})}),e.forEach(d=>{l.addRelativeTo(d.middleware,{...d})}),l.identifyOnResolve?.(h.identifyOnResolve()),l),c=l=>{const d=[];return l.before.forEach(f=>{f.before.length===0&&f.after.length===0?d.push(f):d.push(...c(f))}),d.push(l),l.after.reverse().forEach(f=>{f.before.length===0&&f.after.length===0?d.push(f):d.push(...c(f))}),d},u=(l=!1)=>{const d=[],f=[],m={};return t.forEach(g=>{const w={...g,before:[],after:[]};for(const p of _(w.name,w.aliases))m[p]=w;d.push(w)}),e.forEach(g=>{const w={...g,before:[],after:[]};for(const p of _(w.name,w.aliases))m[p]=w;f.push(w)}),f.forEach(g=>{if(g.toMiddleware){const w=m[g.toMiddleware];if(w===void 0){if(l)return;throw new Error(`${g.toMiddleware} is not found when adding ${k(g.name,g.aliases)} middleware ${g.relation} ${g.toMiddleware}`)}g.relation==="after"&&w.after.push(g),g.relation==="before"&&w.before.push(g)}}),s(d).map(c).reduce((g,w)=>(g.push(...w),g),[])},h={add:(l,d={})=>{const{name:f,override:m,aliases:y}=d,g={step:"initialize",priority:"normal",middleware:l,...d},w=_(f,y);if(w.length>0){if(w.some(p=>n.has(p))){if(!m)throw new Error(`Duplicate middleware name '${k(f,y)}'`);for(const p of w){const b=t.findIndex(M=>M.name===p||M.aliases?.some(R=>R===p));if(b===-1)continue;const S=t[b];if(S.step!==g.step||g.priority!==S.priority)throw new Error(`"${k(S.name,S.aliases)}" middleware with ${S.priority} priority in ${S.step} step cannot be overridden by "${k(f,y)}" middleware with ${g.priority} priority in ${g.step} step.`);t.splice(b,1)}}for(const p of w)n.add(p)}t.push(g)},addRelativeTo:(l,d)=>{const{name:f,override:m,aliases:y}=d,g={middleware:l,...d},w=_(f,y);if(w.length>0){if(w.some(p=>n.has(p))){if(!m)throw new Error(`Duplicate middleware name '${k(f,y)}'`);for(const p of w){const b=e.findIndex(M=>M.name===p||M.aliases?.some(R=>R===p));if(b===-1)continue;const S=e[b];if(S.toMiddleware!==g.toMiddleware||S.relation!==g.relation)throw new Error(`"${k(S.name,S.aliases)}" middleware ${S.relation} "${S.toMiddleware}" middleware cannot be overridden by "${k(f,y)}" middleware ${g.relation} "${g.toMiddleware}" middleware.`);e.splice(b,1)}}for(const p of w)n.add(p)}e.push(g)},clone:()=>o(le()),use:l=>{l.applyToStack(h)},remove:l=>typeof l=="string"?i(l):a(l),removeByTag:l=>{let d=!1;const f=m=>{const{tags:y,name:g,aliases:w}=m;if(y&&y.includes(l)){const p=_(g,w);for(const b of p)n.delete(b);return d=!0,!1}return!0};return t=t.filter(f),e=e.filter(f),d},concat:l=>{const d=o(le());return d.use(l),d.identifyOnResolve(r||d.identifyOnResolve()||(l.identifyOnResolve?.()??!1)),d},applyToStack:o,identify:()=>u(!0).map(l=>{const d=l.step??l.relation+" "+l.toMiddleware;return k(l.name,l.aliases)+" - "+d}),identifyOnResolve(l){return typeof l=="boolean"&&(r=l),r},resolve:(l,d)=>{for(const f of u().map(m=>m.middleware).reverse())l=f(l,d);return r&&console.log(h.identify()),l}};return h},rt={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},nt={high:3,normal:2,low:1};class Ni{config;middlewareStack=le();initConfig;handlers;constructor(e){this.config=e;const{protocol:r,protocolSettings:n}=e;n&&typeof r=="function"&&(e.protocol=new r(n))}send(e,r,n){const s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,a=s===void 0&&this.config.cacheMiddleware===!0;let o;if(a){this.handlers||(this.handlers=new WeakMap);const c=this.handlers;c.has(e.constructor)?o=c.get(e.constructor):(o=e.resolveMiddleware(this.middlewareStack,this.config,s),c.set(e.constructor,o))}else delete this.handlers,o=e.resolveMiddleware(this.middlewareStack,this.config,s);if(i)o(e).then(c=>i(null,c.output),c=>i(c)).catch(()=>{});else return o(e).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}}const ve="***SensitiveInformation***";function $e(t,e){if(e==null)return e;const r=T.of(t);if(r.getMergedTraits().sensitive)return ve;if(r.isListSchema()){if(!!r.getValueSchema().getMergedTraits().sensitive)return ve}else if(r.isMapSchema()){if(!!r.getKeySchema().getMergedTraits().sensitive||!!r.getValueSchema().getMergedTraits().sensitive)return ve}else if(r.isStructSchema()&&typeof e=="object"){const n=e,s={};for(const[i,a]of r.structIterator())n[i]!=null&&(s[i]=$e(a,n[i]));return s}return e}class wn{middlewareStack=le();schema;static classBuilder(){return new bn}resolveMiddlewareWithContext(e,r,n,{middlewareFn:s,clientName:i,commandName:a,inputFilterSensitiveLog:o,outputFilterSensitiveLog:c,smithyContext:u,additionalContext:h,CommandCtor:l}){for(const g of s.bind(this)(l,e,r,n))this.middlewareStack.use(g);const d=e.concat(this.middlewareStack),{logger:f}=r,m={logger:f,clientName:i,commandName:a,inputFilterSensitiveLog:o,outputFilterSensitiveLog:c,[Ce]:{commandInstance:this,...u},...h},{requestHandler:y}=r;return d.resolve(g=>y.handle(g.request,n||{}),m)}}class bn{_init=()=>{};_ep={};_middlewareFn=()=>[];_commandName="";_clientName="";_additionalContext={};_smithyContext={};_inputFilterSensitiveLog=void 0;_outputFilterSensitiveLog=void 0;_serializer=null;_deserializer=null;_operationSchema;init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,r,n={}){return this._smithyContext={service:e,operation:r,...n},this}c(e={}){return this._additionalContext=e,this}n(e,r){return this._clientName=e,this._commandName=r,this}f(e=n=>n,r=n=>n){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=r,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let r;return r=class extends wn{input;static getEndpointParameterInstructions(){return e._ep}constructor(...[n]){super(),this.input=n??{},e._init(this),this.schema=e._operationSchema}resolveMiddleware(n,s,i){const a=e._operationSchema,o=a?.[4]??a?.input,c=a?.[5]??a?.output;return this.resolveMiddlewareWithContext(n,s,i,{CommandCtor:r,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(a?$e.bind(null,o):u=>u),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(a?$e.bind(null,c):u=>u),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}serialize=e._serializer;deserialize=e._deserializer}}}class Q extends Error{$fault;$response;$retryable;$metadata;constructor(e){super(e.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=e.name,this.$fault=e.$fault,this.$metadata=e.$metadata}static isInstance(e){if(!e)return!1;const r=e;return Q.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](e){if(!e)return!1;const r=e;return this===Q?Q.isInstance(e):Q.isInstance(e)?r.name&&this.name?this.prototype.isPrototypeOf(e)||r.name===this.name:this.prototype.isPrototypeOf(e):!1}}const ki=(t,e={})=>{Object.entries(e).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(t[n]==null||t[n]==="")&&(t[n]=s)});const r=t.message||t.Message||"UnknownError";return t.message=r,delete t.Message,t},Pi=t=>{switch(t){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},Sn=t=>{const e=[];for(const r in ce){const n=ce[r];t[n]!==void 0&&e.push({algorithmId:()=>n,checksumConstructor:()=>t[n]})}return{addChecksumAlgorithm(r){e.push(r)},checksumAlgorithms(){return e}}},Tn=t=>{const e={};return t.checksumAlgorithms().forEach(r=>{e[r.algorithmId()]=r.checksumConstructor()}),e},Rn=t=>({setRetryStrategy(e){t.retryStrategy=e},retryStrategy(){return t.retryStrategy}}),vn=t=>{const e={};return e.retryStrategy=t.retryStrategy(),e},Di=t=>Object.assign(Sn(t),Rn(t)),Bi=t=>Object.assign(Tn(t),vn(t)),En=t=>{const e="#text";for(const r in t)t.hasOwnProperty(r)&&t[r][e]!==void 0?t[r]=t[r][e]:typeof t[r]=="object"&&t[r]!==null&&(t[r]=En(t[r]));return t};class Cn{trace(){}debug(){}info(){}warn(){}error(){}}class Li{capacity;data=new Map;parameters=[];constructor({size:e,params:r}){this.capacity=e??50,r&&(this.parameters=r)}get(e,r){const n=this.hash(e);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){const s=this.data.keys();let i=0;for(;;){const{value:a,done:o}=s.next();if(this.data.delete(a),o||++i>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(e){let r="";const{parameters:n}=this;if(n.length===0)return!1;for(const s of n){const i=String(e[s]??"");if(i.includes("|;"))return!1;r+=i+"|;"}return r}}const xn=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),An=t=>xn.test(t)||t.startsWith("[")&&t.endsWith("]"),Mn=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Be=(t,e=!1)=>{if(!e)return Mn.test(t);const r=t.split(".");for(const n of r)if(!Be(n))return!1;return!0},st={},ne="endpoints";function z(t){return typeof t!="object"||t==null?t:"ref"in t?`$${z(t.ref)}`:"fn"in t?`${t.fn}(${(t.argv||[]).map(z).join(", ")})`:JSON.stringify(t,null,2)}class I extends Error{constructor(e){super(e),this.name="EndpointError"}}const $n=(t,e)=>t===e,In=t=>{const e=t.split("."),r=[];for(const n of e){const s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new I(`Path: '${t}' does not end with ']'`);const i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new I(`Invalid array index: '${i}' in path: '${t}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},It=(t,e)=>In(e).reduce((r,n)=>{if(typeof r!="object")throw new I(`Index '${n}' in '${e}' not found in '${JSON.stringify(t)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},t),Un=t=>t!=null,On=t=>!t,Ee={[Y.HTTP]:80,[Y.HTTPS]:443},Nn=t=>{const e=(()=>{try{if(t instanceof URL)return t;if(typeof t=="object"&&"hostname"in t){const{hostname:d,port:f,protocol:m="",path:y="",query:g={}}=t,w=new URL(`${m}//${d}${f?`:${f}`:""}${y}`);return w.search=Object.entries(g).map(([p,b])=>`${p}=${b}`).join("&"),w}return new URL(t)}catch{return null}})();if(!e)return console.error(`Unable to parse ${JSON.stringify(t)} as a whatwg URL.`),null;const r=e.href,{host:n,hostname:s,pathname:i,protocol:a,search:o}=e;if(o)return null;const c=a.slice(0,-1);if(!Object.values(Y).includes(c))return null;const u=An(s),h=r.includes(`${n}:${Ee[c]}`)||typeof t=="string"&&t.includes(`${n}:${Ee[c]}`),l=`${n}${h?`:${Ee[c]}`:""}`;return{scheme:c,authority:l,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},kn=(t,e)=>t===e,Pn=(t,e,r,n)=>e>=r||t.length<r?null:n?t.substring(t.length-r,t.length-e):t.substring(e,r),Dn=t=>encodeURIComponent(t).replace(/[!*'()]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),Bn={booleanEquals:$n,getAttr:It,isSet:Un,isValidHostLabel:Be,not:On,parseURL:Nn,stringEquals:kn,substring:Pn,uriEncode:Dn},Ut=(t,e)=>{const r=[],n={...e.endpointParams,...e.referenceRecord};let s=0;for(;s<t.length;){const i=t.indexOf("{",s);if(i===-1){r.push(t.slice(s));break}r.push(t.slice(s,i));const a=t.indexOf("}",i);if(a===-1){r.push(t.slice(i));break}t[i+1]==="{"&&t[a+1]==="}"&&(r.push(t.slice(i+1,a)),s=a+2);const o=t.substring(i+1,a);if(o.includes("#")){const[c,u]=o.split("#");r.push(It(n[c],u))}else r.push(n[o]);s=a+1}return r.join("")},Ln=({ref:t},e)=>({...e.endpointParams,...e.referenceRecord})[t],de=(t,e,r)=>{if(typeof t=="string")return Ut(t,r);if(t.fn)return Nt.callFunction(t,r);if(t.ref)return Ln(t,r);throw new I(`'${e}': ${String(t)} is not a string, function or reference.`)},Ot=({fn:t,argv:e},r)=>{const n=e.map(i=>["boolean","number"].includes(typeof i)?i:Nt.evaluateExpression(i,"arg",r)),s=t.split(".");return s[0]in st&&s[1]!=null?st[s[0]][s[1]](...n):Bn[t](...n)},Nt={evaluateExpression:de,callFunction:Ot},zn=({assign:t,...e},r)=>{if(t&&t in r.referenceRecord)throw new I(`'${t}' is already defined in Reference Record.`);const n=Ot(e,r);return r.logger?.debug?.(`${ne} evaluateCondition: ${z(e)} = ${z(n)}`),{result:n===""?!0:!!n,...t!=null&&{toAssign:{name:t,value:n}}}},Le=(t=[],e)=>{const r={};for(const n of t){const{result:s,toAssign:i}=zn(n,{...e,referenceRecord:{...e.referenceRecord,...r}});if(!s)return{result:s};i&&(r[i.name]=i.value,e.logger?.debug?.(`${ne} assign: ${i.name} := ${z(i.value)}`))}return{result:!0,referenceRecord:r}},_n=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{const a=de(i,"Header value entry",e);if(typeof a!="string")throw new I(`Header '${n}' value '${a}' is not a string`);return a})}),{}),kt=(t,e)=>Object.entries(t).reduce((r,[n,s])=>({...r,[n]:Dt.getEndpointProperty(s,e)}),{}),Pt=(t,e)=>{if(Array.isArray(t))return t.map(r=>Pt(r,e));switch(typeof t){case"string":return Ut(t,e);case"object":if(t===null)throw new I(`Unexpected endpoint property: ${t}`);return Dt.getEndpointProperties(t,e);case"boolean":return t;default:throw new I(`Unexpected endpoint property type: ${typeof t}`)}},Dt={getEndpointProperty:Pt,getEndpointProperties:kt},Hn=(t,e)=>{const r=de(t,"Endpoint URL",e);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new I(`Endpoint URL must be a string, got ${typeof r}`)},Fn=(t,e)=>{const{conditions:r,endpoint:n}=t,{result:s,referenceRecord:i}=Le(r,e);if(!s)return;const a={...e,referenceRecord:{...e.referenceRecord,...i}},{url:o,properties:c,headers:u}=n;return e.logger?.debug?.(`${ne} Resolving endpoint from template: ${z(n)}`),{...u!=null&&{headers:_n(u,a)},...c!=null&&{properties:kt(c,a)},url:Hn(o,a)}},jn=(t,e)=>{const{conditions:r,error:n}=t,{result:s,referenceRecord:i}=Le(r,e);if(s)throw new I(de(n,"Error",{...e,referenceRecord:{...e.referenceRecord,...i}}))},Bt=(t,e)=>{for(const r of t)if(r.type==="endpoint"){const n=Fn(r,e);if(n)return n}else if(r.type==="error")jn(r,e);else if(r.type==="tree"){const n=Lt.evaluateTreeRule(r,e);if(n)return n}else throw new I(`Unknown endpoint rule: ${r}`);throw new I("Rules evaluation failed")},qn=(t,e)=>{const{conditions:r,rules:n}=t,{result:s,referenceRecord:i}=Le(r,e);if(s)return Lt.evaluateRules(n,{...e,referenceRecord:{...e.referenceRecord,...i}})},Lt={evaluateRules:Bt,evaluateTreeRule:qn},zi=(t,e)=>{const{endpointParams:r,logger:n}=e,{parameters:s,rules:i}=t;e.logger?.debug?.(`${ne} Initial EndpointParams: ${z(r)}`);const a=Object.entries(s).filter(([,u])=>u.default!=null).map(([u,h])=>[u,h.default]);if(a.length>0)for(const[u,h]of a)r[u]=r[u]??h;const o=Object.entries(s).filter(([,u])=>u.required).map(([u])=>u);for(const u of o)if(r[u]==null)throw new I(`Missing required parameter: '${u}'`);const c=Bt(i,{endpointParams:r,logger:n,referenceRecord:{}});return e.logger?.debug?.(`${ne} Resolved endpoint: ${z(c)}`),c};function Vn(t){const e={};if(t=t.replace(/^\?/,""),t)for(const r of t.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in e?Array.isArray(e[n])?e[n].push(s):e[n]=[e[n],s]:e[n]=s}return e}const Ie=t=>{if(typeof t=="string")return Ie(new URL(t));const{hostname:e,pathname:r,port:n,protocol:s,search:i}=t;let a;return i&&(a=Vn(i)),{hostname:e,port:n?parseInt(n):void 0,protocol:s,path:r,query:a}},_i=!1,Hi=!1,it=new Set,Gn=(t,e=Be)=>{if(!it.has(t)&&!e(t))if(t==="*")console.warn('@smithy/config-resolver WARN - Please use the caller region instead of "*". See "sigv4a" in https://github.com/aws/aws-sdk-js-v3/blob/main/supplemental-docs/CLIENTS.md.');else throw new Error(`Region not accepted: region="${t}" is not a valid hostname component.`);else it.add(t)},zt=t=>typeof t=="string"&&(t.startsWith("fips-")||t.endsWith("-fips")),Wn=t=>zt(t)?["fips-aws-global","aws-fips"].includes(t)?"us-east-1":t.replace(/fips-(dkr-|prod-)?|-fips/,""):t,Fi=t=>{const{region:e,useFipsEndpoint:r}=t;if(!e)throw new Error("Region is missing");return Object.assign(t,{region:async()=>{const n=typeof e=="function"?await e():e,s=Wn(n);return Gn(s),s},useFipsEndpoint:async()=>{const n=typeof e=="string"?e:await e();return zt(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},ji=t=>Object.assign(t,{eventStreamMarshaller:t.eventStreamSerdeProvider(t)}),at="content-length";function Jn(t){return e=>async r=>{const n=r.request;if(U.isInstance(n)){const{body:s,headers:i}=n;if(s&&Object.keys(i).map(a=>a.toLowerCase()).indexOf(at)===-1)try{const a=t(s);n.headers={...n.headers,[at]:String(a)}}catch{}}return e({...r,request:n})}}const Qn={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},qi=t=>({applyToStack:e=>{e.add(Jn(t.bodyLengthChecker),Qn)}}),Kn=async t=>{const e=t?.Bucket||"";if(typeof t.Bucket=="string"&&(t.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),ts(e)){if(t.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!es(e)||e.indexOf(".")!==-1&&!String(t.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(t.ForcePathStyle=!0);return t.DisableMultiRegionAccessPoints&&(t.disableMultiRegionAccessPoints=!0,t.DisableMRAP=!0),t},Xn=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Zn=/(\d+\.){3}\d+/,Yn=/\.\./,es=t=>Xn.test(t)&&!Zn.test(t)&&!Yn.test(t),ts=t=>{const[e,r,n,,,s]=t.split(":"),i=e==="arn"&&t.split(":").length>=6,a=!!(i&&r&&n&&s);if(i&&!a)throw new Error(`Invalid ARN: ${t} was an invalid ARN.`);return a},rs=(t,e,r,n=!1)=>{const s=async()=>{let i;return n?i=r.clientContextParams?.[t]??r[t]??r[e]:i=r[t]??r[e],typeof i=="function"?i():i};return t==="credentialScope"||e==="CredentialScope"?async()=>{const i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.credentialScope??i?.CredentialScope}:t==="accountId"||e==="AccountId"?async()=>{const i=typeof r.credentials=="function"?await r.credentials():r.credentials;return i?.accountId??i?.AccountId}:t==="endpoint"||e==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;const i=await s();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){const{protocol:a,hostname:o,port:c,path:u}=i;return`${a}//${o}${c?":"+c:""}${u}`}}return i}:s},_t=async t=>{},Ht=t=>typeof t=="object"?"url"in t?Ie(t.url):t:Ie(t),ns=async(t,e,r,n)=>{if(!r.isCustomEndpoint){let a;r.serviceConfiguredEndpoint?a=await r.serviceConfiguredEndpoint():a=await _t(r.serviceId),a&&(r.endpoint=()=>Promise.resolve(Ht(a)),r.isCustomEndpoint=!0)}const s=await ss(t,e,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},ss=async(t,e,r)=>{const n={},s=e?.getEndpointParameterInstructions?.()||{};for(const[i,a]of Object.entries(s))switch(a.type){case"staticContextParams":n[i]=a.value;break;case"contextParams":n[i]=t[a.name];break;case"clientContextParams":case"builtInParams":n[i]=await rs(a.name,i,r,a.type!=="builtInParams")();break;case"operationContextParams":n[i]=a.get(t);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(s).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await Kn(n),n},is=({config:t,instructions:e})=>(r,n)=>async s=>{t.isCustomEndpoint&&_r(n,"ENDPOINT_OVERRIDE","N");const i=await ns(s.input,{getEndpointParameterInstructions(){return e}},{...t},n);n.endpointV2=i,n.authSchemes=i.properties?.authSchemes;const a=n.authSchemes?.[0];if(a){n.signing_region=a.signingRegion,n.signing_service=a.signingName;const c=se(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:a.signingRegion,signingRegion:a.signingRegion,signing_service:a.signingName,signingName:a.signingName,signingRegionSet:a.signingRegionSet},a.properties))}return r({...s})},as={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Zt.name},Vi=(t,e)=>({applyToStack:r=>{r.addRelativeTo(is({config:t,instructions:e}),as)}}),Gi=t=>{const e=t.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:s}=t,i=r!=null?async()=>Ht(await F(r)()):void 0,o=Object.assign(t,{endpoint:i,tls:e,isCustomEndpoint:!!r,useDualstackEndpoint:F(n??!1),useFipsEndpoint:F(s??!1)});let c;return o.serviceConfiguredEndpoint=async()=>(t.serviceId&&!c&&(c=_t(t.serviceId)),c),o};var W;(function(t){t.STANDARD="standard",t.ADAPTIVE="adaptive"})(W||(W={}));const Ue=3,Wi=W.STANDARD,os=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],cs=["TimeoutError","RequestTimeout","RequestTimeoutException"],us=[500,502,503,504],ls=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],fs=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],ds=t=>t?.$retryable!==void 0,hs=t=>t.$metadata?.clockSkewCorrected,ms=t=>{const e=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return t&&t instanceof TypeError?e.has(t.message):!1},Ft=t=>t.$metadata?.httpStatusCode===429||os.includes(t.name)||t.$retryable?.throttling==!0,ze=(t,e=0)=>ds(t)||hs(t)||cs.includes(t.name)||ls.includes(t?.code||"")||fs.includes(t?.code||"")||us.includes(t.$metadata?.httpStatusCode||0)||ms(t)||t.cause!==void 0&&e<=10&&ze(t.cause,e+1),gs=t=>{if(t.$metadata?.httpStatusCode!==void 0){const e=t.$metadata.httpStatusCode;return 500<=e&&e<=599&&!ze(t)}return!1};class _e{static setTimeoutFn=setTimeout;beta;minCapacity;minFillRate;scaleConstant;smooth;currentCapacity=0;enabled=!1;lastMaxRate=0;measuredTxRate=0;requestCount=0;fillRate;lastThrottleTime;lastTimestamp=0;lastTxRateBucket;maxCapacity;timeWindow=0;constructor(e){this.beta=e?.beta??.7,this.minCapacity=e?.minCapacity??1,this.minFillRate=e?.minFillRate??.5,this.scaleConstant=e?.scaleConstant??.4,this.smooth=e?.smooth??.8;const r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(e){if(this.enabled){if(this.refillTokenBucket(),e>this.currentCapacity){const r=(e-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>_e.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-e}}refillTokenBucket(){const e=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=e;return}const r=(e-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=e}updateClientSendingRate(e){let r;if(this.updateMeasuredRate(),Ft(e)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(e){return this.getPrecise(e*this.beta)}cubicSuccess(e){return this.getPrecise(this.scaleConstant*Math.pow(e-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(e){this.refillTokenBucket(),this.fillRate=Math.max(e,this.minFillRate),this.maxCapacity=Math.max(e,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const e=this.getCurrentTimeInSeconds(),r=Math.floor(e*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){const n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(e){return parseFloat(e.toFixed(8))}}const Oe=100,jt=20*1e3,ys=500,ot=500,ps=5,ws=10,bs=1,Ss="amz-sdk-invocation-id",Ts="amz-sdk-request",Rs=()=>{let t=Oe;return{computeNextBackoffDelay:n=>Math.floor(Math.min(jt,Math.random()*2**n*t)),setDelayBase:n=>{t=n}}},ct=({retryDelay:t,retryCount:e,retryCost:r})=>({getRetryCount:()=>e,getRetryDelay:()=>Math.min(jt,t),getRetryCost:()=>r});class qt{maxAttempts;mode=W.STANDARD;capacity=ot;retryBackoffStrategy=Rs();maxAttemptsProvider;constructor(e){this.maxAttempts=e,this.maxAttemptsProvider=typeof e=="function"?e:async()=>e}async acquireInitialRetryToken(e){return ct({retryDelay:Oe,retryCount:0})}async refreshRetryTokenForRetry(e,r){const n=await this.getMaxAttempts();if(this.shouldRetry(e,r,n)){const s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?ys:Oe);const i=this.retryBackoffStrategy.computeNextBackoffDelay(e.getRetryCount()),a=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,o=this.getCapacityCost(s);return this.capacity-=o,ct({retryDelay:a,retryCount:e.getRetryCount()+1,retryCost:o})}throw new Error("No retry token available")}recordSuccess(e){this.capacity=Math.max(ot,this.capacity+(e.getRetryCost()??bs))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Ue}`),Ue}}shouldRetry(e,r,n){return e.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(e){return e==="TRANSIENT"?ws:ps}isRetryableError(e){return e==="THROTTLING"||e==="TRANSIENT"}}class vs{maxAttemptsProvider;rateLimiter;standardRetryStrategy;mode=W.ADAPTIVE;constructor(e,r){this.maxAttemptsProvider=e;const{rateLimiter:n}=r??{};this.rateLimiter=n??new _e,this.standardRetryStrategy=new qt(e)}async acquireInitialRetryToken(e){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(e)}async refreshRetryTokenForRetry(e,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(e,r)}recordSuccess(e){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(e)}}const Es=t=>t instanceof Error?t:t instanceof Object?Object.assign(new Error,t):typeof t=="string"?new Error(t):new Error(`AWS SDK error wrapper for ${t}`),Ji=t=>{const{retryStrategy:e,retryMode:r,maxAttempts:n}=t,s=F(n??Ue);return Object.assign(t,{maxAttempts:s,retryStrategy:async()=>e||(await F(r)()===W.ADAPTIVE?new vs(s):new qt(s))})},Cs=t=>t?.body instanceof ReadableStream,xs=t=>(e,r)=>async n=>{let s=await t.retryStrategy();const i=await t.maxAttempts();if(As(s)){s=s;let a=await s.acquireInitialRetryToken(r.partition_id),o=new Error,c=0,u=0;const{request:h}=n,l=U.isInstance(h);for(l&&(h.headers[Ss]=wt());;)try{l&&(h.headers[Ts]=`attempt=${c+1}; max=${i}`);const{response:d,output:f}=await e(n);return s.recordSuccess(a),f.$metadata.attempts=c+1,f.$metadata.totalRetryDelay=u,{response:d,output:f}}catch(d){const f=Ms(d);if(o=Es(d),l&&Cs(h))throw(r.logger instanceof Cn?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),o;try{a=await s.refreshRetryTokenForRetry(a,f)}catch{throw o.$metadata||(o.$metadata={}),o.$metadata.attempts=c+1,o.$metadata.totalRetryDelay=u,o}c=a.getRetryCount();const m=a.getRetryDelay();u+=m,await new Promise(y=>setTimeout(y,m))}}else return s=s,s?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(e,n)},As=t=>typeof t.acquireInitialRetryToken<"u"&&typeof t.refreshRetryTokenForRetry<"u"&&typeof t.recordSuccess<"u",Ms=t=>{const e={error:t,errorType:$s(t)},r=Us(t.$response);return r&&(e.retryAfterHint=r),e},$s=t=>Ft(t)?"THROTTLING":ze(t)?"TRANSIENT":gs(t)?"SERVER_ERROR":"CLIENT_ERROR",Is={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Qi=t=>({applyToStack:e=>{e.add(xs(t),Is)}}),Us=t=>{if(!ee.isInstance(t))return;const e=Object.keys(t.headers).find(i=>i.toLowerCase()==="retry-after");if(!e)return;const r=t.headers[e],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};class Z{bytes;constructor(e){if(this.bytes=e,e.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(e){if(e>9223372036854776e3||e<-9223372036854776e3)throw new Error(`${e} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(e));n>-1&&s>0;n--,s/=256)r[n]=s;return e<0&&ut(r),new Z(r)}valueOf(){const e=this.bytes.slice(0),r=e[0]&128;return r&&ut(e),parseInt($(e),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function ut(t){for(let e=0;e<8;e++)t[e]^=255;for(let e=7;e>-1&&(t[e]++,t[e]===0);e--);}class Os{toUtf8;fromUtf8;constructor(e,r){this.toUtf8=e,this.fromUtf8=r}format(e){const r=[];for(const i of Object.keys(e)){const a=this.fromUtf8(i);r.push(Uint8Array.from([a.byteLength]),a,this.formatHeaderValue(e[i]))}const n=new Uint8Array(r.reduce((i,a)=>i+a.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,e.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(e.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);const a=new Uint8Array(i.buffer);return a.set(e.value,3),a;case"string":const o=this.fromUtf8(e.value),c=new DataView(new ArrayBuffer(3+o.byteLength));c.setUint8(0,7),c.setUint16(1,o.byteLength,!1);const u=new Uint8Array(c.buffer);return u.set(o,3),u;case"timestamp":const h=new Uint8Array(9);return h[0]=8,h.set(Z.fromNumber(e.value.valueOf()).bytes,1),h;case"uuid":if(!Hs.test(e.value))throw new Error(`Invalid UUID received: ${e.value}`);const l=new Uint8Array(17);return l[0]=9,l.set(yt(e.value.replace(/\-/g,"")),1),l}}parse(e){const r={};let n=0;for(;n<e.byteLength;){const s=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,s));switch(n+=s,e.getUint8(n++)){case 0:r[i]={type:ft,value:!0};break;case 1:r[i]={type:ft,value:!1};break;case 2:r[i]={type:Ns,value:e.getInt8(n++)};break;case 3:r[i]={type:ks,value:e.getInt16(n,!1)},n+=2;break;case 4:r[i]={type:Ps,value:e.getInt32(n,!1)},n+=4;break;case 5:r[i]={type:Ds,value:new Z(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:const a=e.getUint16(n,!1);n+=2,r[i]={type:Bs,value:new Uint8Array(e.buffer,e.byteOffset+n,a)},n+=a;break;case 7:const o=e.getUint16(n,!1);n+=2,r[i]={type:Ls,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,o))},n+=o;break;case 8:r[i]={type:zs,value:new Date(new Z(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:const c=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,r[i]={type:_s,value:`${$(c.subarray(0,4))}-${$(c.subarray(4,6))}-${$(c.subarray(6,8))}-${$(c.subarray(8,10))}-${$(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}}var lt;(function(t){t[t.boolTrue=0]="boolTrue",t[t.boolFalse=1]="boolFalse",t[t.byte=2]="byte",t[t.short=3]="short",t[t.integer=4]="integer",t[t.long=5]="long",t[t.byteArray=6]="byteArray",t[t.string=7]="string",t[t.timestamp=8]="timestamp",t[t.uuid=9]="uuid"})(lt||(lt={}));const ft="boolean",Ns="byte",ks="short",Ps="integer",Ds="long",Bs="binary",Ls="string",zs="timestamp",_s="uuid",Hs=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Vt=4,D=Vt*2,H=4,Fs=D+H*2;function js({byteLength:t,byteOffset:e,buffer:r}){if(t<Fs)throw new Error("Provided message too short to accommodate event stream message overhead");const n=new DataView(r,e,t),s=n.getUint32(0,!1);if(t!==s)throw new Error("Reported message length does not match received message length");const i=n.getUint32(Vt,!1),a=n.getUint32(D,!1),o=n.getUint32(t-H,!1),c=new dt().update(new Uint8Array(r,e,D));if(a!==c.digest())throw new Error(`The prelude checksum specified in the message (${a}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,e+D,t-(D+H))),o!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${o}`);return{headers:new DataView(r,e+D+H,i),body:new Uint8Array(r,e+D+H+i,s-i-(D+H+H))}}class qs{headerMarshaller;messageBuffer;isEndOfStream;constructor(e,r){this.headerMarshaller=new Os(e,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(e){this.messageBuffer.push(this.decode(e))}endOfStream(){this.isEndOfStream=!0}getMessage(){const e=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return e},isEndOfStream(){return r}}}getAvailableMessages(){const e=this.messageBuffer;this.messageBuffer=[];const r=this.isEndOfStream;return{getMessages(){return e},isEndOfStream(){return r}}}encode({headers:e,body:r}){const n=this.headerMarshaller.format(e),s=n.byteLength+r.byteLength+16,i=new Uint8Array(s),a=new DataView(i.buffer,i.byteOffset,i.byteLength),o=new dt;return a.setUint32(0,s,!1),a.setUint32(4,n.byteLength,!1),a.setUint32(8,o.update(i.subarray(0,8)).digest(),!1),i.set(n,12),i.set(r,n.byteLength+12),a.setUint32(s-4,o.update(i.subarray(8,s-4)).digest(),!1),i}decode(e){const{headers:r,body:n}=js(e);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(e){return this.headerMarshaller.format(e)}}class Vs{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.decoder.decode(e)}}class Gs{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream)yield this.options.encoder.encode(e);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class Ws{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.messageStream){const r=await this.options.deserializer(e);r!==void 0&&(yield r)}}}class Js{options;constructor(e){this.options=e}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const e of this.options.inputStream)yield this.options.serializer(e)}}function Qs(t){let e=0,r=0,n=null,s=null;const i=o=>{if(typeof o!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+o);e=o,r=4,n=new Uint8Array(o),new DataView(n.buffer).setUint32(0,o,!1)},a=async function*(){const o=t[Symbol.asyncIterator]();for(;;){const{value:c,done:u}=await o.next();if(u){if(e)if(e===r)yield n;else throw new Error("Truncated event message received.");else return;return}const h=c.length;let l=0;for(;l<h;){if(!n){const f=h-l;s||(s=new Uint8Array(4));const m=Math.min(4-r,f);if(s.set(c.slice(l,l+m),r),r+=m,l+=m,r<4)break;i(new DataView(s.buffer).getUint32(0,!1)),s=null}const d=Math.min(e-r,h-l);n.set(c.slice(l,l+d),r),r+=d,l+=d,e&&e===r&&(yield n,n=null,e=0,r=0)}}};return{[Symbol.asyncIterator]:a}}function Ks(t,e){return async function(r){const{value:n}=r.headers[":message-type"];if(n==="error"){const s=new Error(r.headers[":error-message"].value||"UnknownError");throw s.name=r.headers[":error-code"].value,s}else if(n==="exception"){const s=r.headers[":exception-type"].value,i={[s]:r},a=await t(i);if(a.$unknown){const o=new Error(e(r.body));throw o.name=s,o}throw a[s]}else if(n==="event"){const s={[r.headers[":event-type"].value]:r},i=await t(s);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}let Xs=class{eventStreamCodec;utfEncoder;constructor({utf8Encoder:e,utf8Decoder:r}){this.eventStreamCodec=new qs(e,r),this.utfEncoder=e}deserialize(e,r){const n=Qs(e);return new Ws({messageStream:new Vs({inputStream:n,decoder:this.eventStreamCodec}),deserializer:Ks(r,this.utfEncoder)})}serialize(e,r){return new Gs({messageStream:new Js({inputStream:e,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const Zs=t=>({[Symbol.asyncIterator]:async function*(){const e=t.getReader();try{for(;;){const{done:r,value:n}=await e.read();if(r)return;yield n}}finally{e.releaseLock()}}}),Ys=t=>{const e=t[Symbol.asyncIterator]();return new ReadableStream({async pull(r){const{done:n,value:s}=await e.next();if(n)return r.close();r.enqueue(s)}})};class ei{universalMarshaller;constructor({utf8Encoder:e,utf8Decoder:r}){this.universalMarshaller=new Xs({utf8Decoder:r,utf8Encoder:e})}deserialize(e,r){const n=ti(e)?Zs(e):e;return this.universalMarshaller.deserialize(n,r)}serialize(e,r){const n=this.universalMarshaller.serialize(e,r);return typeof ReadableStream=="function"?Ys(n):n}}const ti=t=>typeof ReadableStream=="function"&&t instanceof ReadableStream,Xi=t=>new ei(t);async function ri(t,e,r=1024*1024){const n=t.size;let s=0;for(;s<n;){const i=t.slice(s,Math.min(n,s+r));e(new Uint8Array(await i.arrayBuffer())),s+=i.size}}const Zi=async function(e,r){const n=new e;return await ri(r,s=>{n.update(s)}),n.digest()},Yi=t=>()=>Promise.reject(t),P=64,ni=16,si=[1732584193,4023233417,2562383102,271733878];class ea{state;buffer;bufferLength;bytesHashed;finished;constructor(){this.reset()}update(e){if(ii(e))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const r=ai(e);let n=0,{byteLength:s}=r;for(this.bytesHashed+=s;s>0;)this.buffer.setUint8(this.bufferLength++,r[n++]),s--,this.bufferLength===P&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:r,bufferLength:n,bytesHashed:s}=this,i=s*8;if(r.setUint8(this.bufferLength++,128),n%P>=P-8){for(let a=this.bufferLength;a<P;a++)r.setUint8(a,0);this.hashBuffer(),this.bufferLength=0}for(let a=this.bufferLength;a<P-8;a++)r.setUint8(a,0);r.setUint32(P-8,i>>>0,!0),r.setUint32(P-4,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}const e=new DataView(new ArrayBuffer(ni));for(let r=0;r<4;r++)e.setUint32(r*4,this.state[r],!0);return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}hashBuffer(){const{buffer:e,state:r}=this;let n=r[0],s=r[1],i=r[2],a=r[3];n=E(n,s,i,a,e.getUint32(0,!0),7,3614090360),a=E(a,n,s,i,e.getUint32(4,!0),12,3905402710),i=E(i,a,n,s,e.getUint32(8,!0),17,606105819),s=E(s,i,a,n,e.getUint32(12,!0),22,3250441966),n=E(n,s,i,a,e.getUint32(16,!0),7,4118548399),a=E(a,n,s,i,e.getUint32(20,!0),12,1200080426),i=E(i,a,n,s,e.getUint32(24,!0),17,2821735955),s=E(s,i,a,n,e.getUint32(28,!0),22,4249261313),n=E(n,s,i,a,e.getUint32(32,!0),7,1770035416),a=E(a,n,s,i,e.getUint32(36,!0),12,2336552879),i=E(i,a,n,s,e.getUint32(40,!0),17,4294925233),s=E(s,i,a,n,e.getUint32(44,!0),22,2304563134),n=E(n,s,i,a,e.getUint32(48,!0),7,1804603682),a=E(a,n,s,i,e.getUint32(52,!0),12,4254626195),i=E(i,a,n,s,e.getUint32(56,!0),17,2792965006),s=E(s,i,a,n,e.getUint32(60,!0),22,1236535329),n=C(n,s,i,a,e.getUint32(4,!0),5,4129170786),a=C(a,n,s,i,e.getUint32(24,!0),9,3225465664),i=C(i,a,n,s,e.getUint32(44,!0),14,643717713),s=C(s,i,a,n,e.getUint32(0,!0),20,3921069994),n=C(n,s,i,a,e.getUint32(20,!0),5,3593408605),a=C(a,n,s,i,e.getUint32(40,!0),9,38016083),i=C(i,a,n,s,e.getUint32(60,!0),14,3634488961),s=C(s,i,a,n,e.getUint32(16,!0),20,3889429448),n=C(n,s,i,a,e.getUint32(36,!0),5,568446438),a=C(a,n,s,i,e.getUint32(56,!0),9,3275163606),i=C(i,a,n,s,e.getUint32(12,!0),14,4107603335),s=C(s,i,a,n,e.getUint32(32,!0),20,1163531501),n=C(n,s,i,a,e.getUint32(52,!0),5,2850285829),a=C(a,n,s,i,e.getUint32(8,!0),9,4243563512),i=C(i,a,n,s,e.getUint32(28,!0),14,1735328473),s=C(s,i,a,n,e.getUint32(48,!0),20,2368359562),n=x(n,s,i,a,e.getUint32(20,!0),4,4294588738),a=x(a,n,s,i,e.getUint32(32,!0),11,2272392833),i=x(i,a,n,s,e.getUint32(44,!0),16,1839030562),s=x(s,i,a,n,e.getUint32(56,!0),23,4259657740),n=x(n,s,i,a,e.getUint32(4,!0),4,2763975236),a=x(a,n,s,i,e.getUint32(16,!0),11,1272893353),i=x(i,a,n,s,e.getUint32(28,!0),16,4139469664),s=x(s,i,a,n,e.getUint32(40,!0),23,3200236656),n=x(n,s,i,a,e.getUint32(52,!0),4,681279174),a=x(a,n,s,i,e.getUint32(0,!0),11,3936430074),i=x(i,a,n,s,e.getUint32(12,!0),16,3572445317),s=x(s,i,a,n,e.getUint32(24,!0),23,76029189),n=x(n,s,i,a,e.getUint32(36,!0),4,3654602809),a=x(a,n,s,i,e.getUint32(48,!0),11,3873151461),i=x(i,a,n,s,e.getUint32(60,!0),16,530742520),s=x(s,i,a,n,e.getUint32(8,!0),23,3299628645),n=A(n,s,i,a,e.getUint32(0,!0),6,4096336452),a=A(a,n,s,i,e.getUint32(28,!0),10,1126891415),i=A(i,a,n,s,e.getUint32(56,!0),15,2878612391),s=A(s,i,a,n,e.getUint32(20,!0),21,4237533241),n=A(n,s,i,a,e.getUint32(48,!0),6,1700485571),a=A(a,n,s,i,e.getUint32(12,!0),10,2399980690),i=A(i,a,n,s,e.getUint32(40,!0),15,4293915773),s=A(s,i,a,n,e.getUint32(4,!0),21,2240044497),n=A(n,s,i,a,e.getUint32(32,!0),6,1873313359),a=A(a,n,s,i,e.getUint32(60,!0),10,4264355552),i=A(i,a,n,s,e.getUint32(24,!0),15,2734768916),s=A(s,i,a,n,e.getUint32(52,!0),21,1309151649),n=A(n,s,i,a,e.getUint32(16,!0),6,4149444226),a=A(a,n,s,i,e.getUint32(44,!0),10,3174756917),i=A(i,a,n,s,e.getUint32(8,!0),15,718787259),s=A(s,i,a,n,e.getUint32(36,!0),21,3951481745),r[0]=n+r[0]&4294967295,r[1]=s+r[1]&4294967295,r[2]=i+r[2]&4294967295,r[3]=a+r[3]&4294967295}reset(){this.state=Uint32Array.from(si),this.buffer=new DataView(new ArrayBuffer(P)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function he(t,e,r,n,s,i){return e=(e+t&4294967295)+(n+i&4294967295)&4294967295,(e<<s|e>>>32-s)+r&4294967295}function E(t,e,r,n,s,i,a){return he(e&r|~e&n,t,e,s,i,a)}function C(t,e,r,n,s,i,a){return he(e&n|r&~n,t,e,s,i,a)}function x(t,e,r,n,s,i,a){return he(e^r^n,t,e,s,i,a)}function A(t,e,r,n,s,i,a){return he(r^(e|~n),t,e,s,i,a)}function ii(t){return typeof t=="string"?t.length===0:t.byteLength===0}function ai(t){return typeof t=="string"?L(t):ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(t)}const oi=["in-region","cross-region","mobile","standard","legacy"],ta=({defaultsMode:t}={})=>qr(async()=>{const e=typeof t=="function"?await t():t;switch(e?.toLowerCase()){case"auto":return Promise.resolve(ci()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(e?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${oi.join(", ")}, got ${e}`)}}),ci=()=>{const t=window?.navigator;if(t?.connection){const{effectiveType:e,rtt:r,downlink:n}=t?.connection;if(typeof e=="string"&&e!=="4g"||Number(r)>100||Number(n)<10)return!0}return t?.userAgentData?.mobile||typeof t?.maxTouchPoints=="number"&&t?.maxTouchPoints>1};class ui{marshaller;serializer;deserializer;serdeContext;defaultContentType;constructor({marshaller:e,serializer:r,deserializer:n,serdeContext:s,defaultContentType:i}){this.marshaller=e,this.serializer=r,this.deserializer=n,this.serdeContext=s,this.defaultContentType=i}async serializeEventStream({eventStream:e,requestSchema:r,initialRequest:n}){const s=this.marshaller,i=r.getEventStreamMember(),a=r.getMemberSchema(i),o=this.serializer,c=this.defaultContentType,u=Symbol("initialRequestMarker"),h={async*[Symbol.asyncIterator](){if(n){const l={":event-type":{type:"string",value:"initial-request"},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:c}};o.write(r,n);const d=o.flush();yield{[u]:!0,headers:l,body:d}}for await(const l of e)yield l}};return s.serialize(h,l=>{if(l[u])return{headers:l.headers,body:l.body};const d=Object.keys(l).find(p=>p!=="__type")??"",{additionalHeaders:f,body:m,eventType:y,explicitPayloadContentType:g}=this.writeEventBody(d,a,l);return{headers:{":event-type":{type:"string",value:y},":message-type":{type:"string",value:"event"},":content-type":{type:"string",value:g??c},...f},body:m}})}async deserializeEventStream({response:e,responseSchema:r,initialResponseContainer:n}){const s=this.marshaller,i=r.getEventStreamMember(),o=r.getMemberSchema(i).getMemberSchemas(),c=Symbol("initialResponseMarker"),u=s.deserialize(e.body,async d=>{const f=Object.keys(d).find(y=>y!=="__type")??"",m=d[f].body;if(f==="initial-response"){const y=await this.deserializer.read(r,m);return delete y[i],{[c]:!0,...y}}else if(f in o){const y=o[f];if(y.isStructSchema()){const g={};let w=!1;for(const[p,b]of y.structIterator()){const{eventHeader:S,eventPayload:M}=b.getMergedTraits();if(w=w||!!(S||M),M)b.isBlobSchema()?g[p]=m:b.isStringSchema()?g[p]=(this.serdeContext?.utf8Encoder??ie)(m):b.isStructSchema()&&(g[p]=await this.deserializer.read(b,m));else if(S){const R=d[f].headers[p]?.value;R!=null&&(b.isNumericSchema()?R&&typeof R=="object"&&"bytes"in R?g[p]=BigInt(R.toString()):g[p]=Number(R):g[p]=R)}}if(w)return{[f]:g};if(m.byteLength===0)return{[f]:{}}}return{[f]:await this.deserializer.read(y,m)}}else return{$unknown:d}}),h=u[Symbol.asyncIterator](),l=await h.next();if(l.done)return u;if(l.value?.[c]){if(!r)throw new Error("@smithy::core/protocols - initial-response event encountered in event stream but no response schema given.");for(const[d,f]of Object.entries(l.value))n[d]=f}return{async*[Symbol.asyncIterator](){for(l?.value?.[c]||(yield l.value);;){const{done:d,value:f}=await h.next();if(d)break;yield f}}}}writeEventBody(e,r,n){const s=this.serializer;let i=e,a=null,o;const c=r.getSchema()[4].includes(e),u={};if(c){const d=r.getMemberSchema(e);if(d.isStructSchema()){for(const[f,m]of d.structIterator()){const{eventHeader:y,eventPayload:g}=m.getMergedTraits();if(g)a=f;else if(y){const w=n[e][f];let p="binary";m.isNumericSchema()?(-2)**31<=w&&w<=2**31-1?p="integer":p="long":m.isTimestampSchema()?p="timestamp":m.isStringSchema()?p="string":m.isBooleanSchema()&&(p="boolean"),w!=null&&(u[f]={type:p,value:w},delete n[e][f])}}if(a!==null){const f=d.getMemberSchema(a);f.isBlobSchema()?o="application/octet-stream":f.isStringSchema()&&(o="text/plain"),s.write(f,n[e][a])}else s.write(d,n[e])}else throw new Error("@smithy/core/event-streams - non-struct member not supported in event stream union.")}else{const[d,f]=n[e];i=d,s.write(15,f)}const h=s.flush();return{body:typeof h=="string"?(this.serdeContext?.utf8Decoder??L)(h):h,eventType:i,explicitPayloadContentType:o,additionalHeaders:u}}}const li=Object.freeze(Object.defineProperty({__proto__:null,EventStreamSerde:ui},Symbol.toStringTag,{value:"Module"}));export{Hi as $,Ri as A,Be as B,An as C,st as D,Li as E,Lr as F,zi as G,U as H,ss as I,Q as J,wn as K,Vi as L,L as M,T as N,Ie as O,wr as P,Ti as Q,ta as R,Ui as S,O as T,Zi as U,mr as V,Wi as W,ea as X,Ue as Y,Xi as Z,Oi as _,ee as a,_i as a0,mt as a1,Yi as a2,Pi as a3,Di as a4,mi as a5,Bi as a6,gi as a7,Ni as a8,Ji as a9,Fi as aa,Gi as ab,ji as ac,Ei as ad,Qi as ae,qi as af,yi as ag,pi as ah,Mi as ai,dr as aj,ns as ak,ki as b,re as c,jr as d,Rt as e,ue as f,En as g,xr as h,$i as i,De as j,Ci as k,Ai as l,Ii as m,wi as n,xi as o,cn as p,te as q,Si as r,bi as s,ie as t,F as u,wt as v,Cn as w,rr as x,se as y,vi as z};
