import{H as ye,a as gr,n as Oe,S as Vt,m as fi,d as Si,i as Ei,T as We,b as Us,N as _e,F as yi,t as hr,g as wi,f as mr,c as fr,e as bi,h as Bs,j as Ci,v as Ai,k as xi,l as ki,o as Ri,p as vi,q as _i,r as Pi,s as Ii,u as st,w as Sr,x as Ni,y as as,z as Ti,A as Mi,B as Oi,C as Di,D as Er,E as Hi,G as Ui,I as Bi,J as Li,K as yr,L as wr,M as $i,O as zi,P as Fi,Q as ji,R as qi,U as Vi,V as Wi,W as Ki,X as Gi,Y as Xi,Z as Zi,_ as Yi,$ as Qi,a0 as Ji,a1 as eo,a2 as to,a3 as so,a4 as no,a5 as ro,a6 as io,a7 as oo,a8 as ao,a9 as co,aa as uo,ab as lo,ac as po,ad as go,ae as ho,af as mo,ag as fo,ah as So,ai as Eo,aj as yo,ak as wo}from"./md-vendor_npm_smithy-DIyP5Xov.js";import{A as bo,a as Co,S as Ao,b as xo}from"./md-vendor_npm_aws-crypto-D5NJRR1D.js";function ko(t){return e=>async s=>{const{request:n}=s;if(t.expectContinueHeader!==!1&&ye.isInstance(n)&&n.body&&t.runtime==="node"&&t.requestHandler?.constructor?.name!=="FetchHttpHandler"){let r=!0;if(typeof t.expectContinueHeader=="number")try{r=(Number(n.headers?.["content-length"])??t.bodyLengthChecker?.(n.body)??1/0)>=t.expectContinueHeader}catch{}else r=!!t.expectContinueHeader;r&&(n.headers.Expect="100-continue")}return e({...s,request:n})}}const Ro={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},vo=t=>({applyToStack:e=>{e.add(ko(t),Ro)}}),De={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},_o=De.WHEN_SUPPORTED,ft={WHEN_SUPPORTED:"WHEN_SUPPORTED",WHEN_REQUIRED:"WHEN_REQUIRED"},Po=De.WHEN_SUPPORTED;var $;(function(t){t.MD5="MD5",t.CRC32="CRC32",t.CRC32C="CRC32C",t.CRC64NVME="CRC64NVME",t.SHA1="SHA1",t.SHA256="SHA256"})($||($={}));var Ls;(function(t){t.HEADER="header",t.TRAILER="trailer"})(Ls||(Ls={}));const Wt=$.CRC32;function Io(t,e,s){return t.$source||(t.$source={}),t.$source[e]=s,t}function G(t,e,s){t.__aws_sdk_context?t.__aws_sdk_context.features||(t.__aws_sdk_context.features={}):t.__aws_sdk_context={features:{}},t.__aws_sdk_context.features[e]=s}const $s=t=>gr.isInstance(t)?t.headers?.date??t.headers?.Date:void 0,cs=t=>new Date(Date.now()+t),No=(t,e)=>Math.abs(cs(e).getTime()-t)>=3e5,zs=(t,e)=>{const s=Date.parse(t);return No(s,e)?s-Date.now():e},ze=(t,e)=>{if(!e)throw new Error(`Property \`${t}\` is not resolved for AWS SDK SigV4Auth`);return e},br=async t=>{const e=ze("context",t.context),s=ze("config",t.config),n=e.endpointV2?.properties?.authSchemes?.[0],a=await ze("signer",s.signer)(n),c=t?.signingRegion,l=t?.signingRegionSet,p=t?.signingName;return{config:s,signer:a,signingRegion:c,signingRegionSet:l,signingName:p}};class Cr{async sign(e,s,n){if(!ye.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const r=await br(n),{config:a,signer:c}=r;let{signingRegion:l,signingName:p}=r;const f=n.context;if(f?.authSchemes?.length??!1){const[S,y]=f.authSchemes;S?.name==="sigv4a"&&y?.name==="sigv4"&&(l=y?.signingRegion??l,p=y?.signingName??p)}return await c.sign(e,{signingDate:cs(a.systemClockOffset),signingRegion:l,signingService:p})}errorHandler(e){return s=>{const n=s.ServerTime??$s(s.$response);if(n){const r=ze("config",e.config),a=r.systemClockOffset;r.systemClockOffset=zs(n,r.systemClockOffset),r.systemClockOffset!==a&&s.$metadata&&(s.$metadata.clockSkewCorrected=!0)}throw s}}successHandler(e,s){const n=$s(e);if(n){const r=ze("config",s.config);r.systemClockOffset=zs(n,r.systemClockOffset)}}}class To extends Cr{async sign(e,s,n){if(!ye.isInstance(e))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");const{config:r,signer:a,signingRegion:c,signingRegionSet:l,signingName:p}=await br(n),E=(await r.sigv4aSigningRegionSet?.()??l??[c]).join(",");return await a.sign(e,{signingDate:cs(r.systemClockOffset),signingRegion:E,signingService:p})}}const Mo=t=>(t.sigv4aSigningRegionSet=Oe(t.sigv4aSigningRegionSet),t),Oo=t=>{let e=t.credentials,s=!!t.credentials,n;Object.defineProperty(t,"credentials",{set(f){f&&f!==e&&f!==n&&(s=!0),e=f;const E=Do(t,{credentials:e,credentialDefaultProvider:t.credentialDefaultProvider}),S=Ho(t,E);if(s&&!S.attributed){const y=typeof e=="object"&&e!==null;n=async x=>{const H=await S(x);return y&&(!H.$source||Object.keys(H.$source).length===0)?Io(H,"CREDENTIALS_CODE","e"):H},n.memoized=S.memoized,n.configBound=S.configBound,n.attributed=!0}else n=S},get(){return n},enumerable:!0,configurable:!0}),t.credentials=e;const{signingEscapePath:r=!0,systemClockOffset:a=t.systemClockOffset||0,sha256:c}=t;let l;return t.signer?l=Oe(t.signer):t.regionInfoProvider?l=()=>Oe(t.region)().then(async f=>[await t.regionInfoProvider(f,{useFipsEndpoint:await t.useFipsEndpoint(),useDualstackEndpoint:await t.useDualstackEndpoint()})||{},f]).then(([f,E])=>{const{signingRegion:S,signingService:y}=f;t.signingRegion=t.signingRegion||S||E,t.signingName=t.signingName||y||t.serviceId;const x={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:c,uriEscapePath:r},_=t.signerConstructor||Vt;return new _(x)}):l=async f=>{f=Object.assign({},{name:"sigv4",signingName:t.signingName||t.defaultSigningName,signingRegion:await Oe(t.region)(),properties:{}},f);const E=f.signingRegion,S=f.signingName;t.signingRegion=t.signingRegion||E,t.signingName=t.signingName||S||t.serviceId;const y={...t,credentials:t.credentials,region:t.signingRegion,service:t.signingName,sha256:c,uriEscapePath:r},x=t.signerConstructor||Vt;return new x(y)},Object.assign(t,{systemClockOffset:a,signingEscapePath:r,signer:l})};function Do(t,{credentials:e,credentialDefaultProvider:s}){let n;return e?e?.memoized?n=e:n=fi(e,Ei,Si):s?n=Oe(s(Object.assign({},t,{parentClientConfig:t}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function Ho(t,e){if(e.configBound)return e;const s=async n=>e({...n,callerClientConfig:t});return s.memoized=e.memoized,s.configBound=!0,s}class Uo{queryCompat;constructor(e=!1){this.queryCompat=e}resolveRestContentType(e,s){const n=s.getMemberSchemas(),r=Object.values(n).find(a=>!!a.getMergedTraits().httpPayload);if(r){const a=r.getMergedTraits().mediaType;return a||(r.isStringSchema()?"text/plain":r.isBlobSchema()?"application/octet-stream":e)}else if(!s.isUnitSchema()&&Object.values(n).find(c=>{const{httpQuery:l,httpQueryParams:p,httpHeader:f,httpLabel:E,httpPrefixHeaders:S}=c.getMergedTraits();return!l&&!p&&!f&&!E&&S===void 0}))return e}async getErrorSchemaOrThrowBaseException(e,s,n,r,a,c){let l=s,p=e;e.includes("#")&&([l,p]=e.split("#"));const f={$metadata:a,$fault:n.statusCode<500?"client":"server"},E=We.for(l);try{return{errorSchema:c?.(E,p)??E.getSchema(e),errorMetadata:f}}catch{r.message=r.message??r.Message??"UnknownError";const y=We.for("smithy.ts.sdk.synthetic."+l),x=y.getBaseException();if(x){const _=y.getErrorCtor(x)??Error;throw this.decorateServiceException(Object.assign(new _({name:p}),f),r)}throw this.decorateServiceException(Object.assign(new Error(p),f),r)}}decorateServiceException(e,s={}){if(this.queryCompat){const n=e.Message??s.Message,r=Us(e,s);n&&(r.message=n),r.Error={...r.Error,Type:r.Error.Type,Code:r.Error.Code,Message:r.Error.message??r.Error.Message??n};const a=r.$metadata.requestId;return a&&(r.RequestId=a),r}return Us(e,s)}setQueryCompatError(e,s){const n=s.headers?.["x-amzn-query-error"];if(e!==void 0&&n!=null){const[r,a]=n.split(";"),c=Object.entries(e),l={Code:r,Type:a};Object.assign(e,l);for(const[p,f]of c)l[p==="message"?"Message":p]=f;delete l.__type,e.Error=l}}queryCompatOutput(e,s){e.Error&&(s.Error=e.Error),e.Type&&(s.Type=e.Type),e.Code&&(s.Code=e.Code)}findQueryCompatibleError(e,s){try{return e.getSchema(s)}catch{return e.find(r=>_e.of(r).getMergedTraits().awsQueryError?.[0]===s)}}}class us{serdeContext;setSerdeContext(e){this.serdeContext=e}}class Bo{from;to;keys;constructor(e,s){this.from=e,this.to=s,this.keys=new Set(Object.keys(this.from).filter(n=>n!=="__type"))}mark(e){this.keys.delete(e)}hasUnknown(){return this.keys.size===1&&Object.keys(this.to).length===0}writeUnknown(){if(this.hasUnknown()){const e=this.keys.values().next().value,s=this.from[e];this.to.$unknown=[e,s]}}}function Lo(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function $o(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}class Kt{value;constructor(e){this.value=e}toString(){return $o(""+this.value)}}class ue{name;children;attributes={};static of(e,s,n){const r=new ue(e);return s!==void 0&&r.addChildNode(new Kt(s)),n!==void 0&&r.withName(n),r}constructor(e,s=[]){this.name=e,this.children=s}withName(e){return this.name=e,this}addAttribute(e,s){return this.attributes[e]=s,this}addChildNode(e){return this.children.push(e),this}removeAttribute(e){return delete this.attributes[e],this}n(e){return this.name=e,this}c(e){return this.children.push(e),this}a(e,s){return s!=null&&(this.attributes[e]=s),this}cc(e,s,n=s){if(e[s]!=null){const r=ue.of(s,e[s]).withName(n);this.c(r)}}l(e,s,n,r){e[s]!=null&&r().map(c=>{c.withName(n),this.c(c)})}lc(e,s,n,r){if(e[s]!=null){const a=r(),c=new ue(n);a.map(l=>{c.c(l)}),this.c(c)}}toString(){const e=!!this.children.length;let s=`<${this.name}`;const n=this.attributes;for(const r of Object.keys(n)){const a=n[r];a!=null&&(s+=` ${r}="${Lo(""+a)}"`)}return s+=e?`>${this.children.map(r=>r.toString()).join("")}</${this.name}>`:"/>"}}let St;function zo(t){St||(St=new DOMParser);const e=St.parseFromString(t,"application/xml");if(e.getElementsByTagName("parsererror").length>0)throw new Error("DOMParser XML parsing error.");const s=n=>{if(n.nodeType===Node.TEXT_NODE&&n.textContent?.trim())return n.textContent;if(n.nodeType===Node.ELEMENT_NODE){const r=n;if(r.attributes.length===0&&r.childNodes.length===0)return"";const a={},c=Array.from(r.attributes);for(const p of c)a[`${p.name}`]=p.value;const l=Array.from(r.childNodes);for(const p of l){const f=s(p);if(f!=null){const E=p.nodeName;if(l.length===1&&c.length===0&&E==="#text")return f;a[E]?Array.isArray(a[E])?a[E].push(f):a[E]=[a[E],f]:a[E]=f}else if(l.length===1&&c.length===0)return r.textContent}return a}return null};return{[e.documentElement.nodeName]:s(e.documentElement)}}class Fo extends us{settings;stringDeserializer;constructor(e){super(),this.settings=e,this.stringDeserializer=new yi(e)}setSerdeContext(e){this.serdeContext=e,this.stringDeserializer.setSerdeContext(e)}read(e,s,n){const r=_e.of(e),a=r.getMemberSchemas();if(r.isStructSchema()&&r.isMemberSchema()&&!!Object.values(a).find(f=>!!f.getMemberTraits().eventPayload)){const f={},E=Object.keys(a)[0];return a[E].isBlobSchema()?f[E]=s:f[E]=this.read(a[E],s),f}const l=(this.serdeContext?.utf8Encoder??hr)(s),p=this.parseXml(l);return this.readSchema(e,n?p[n]:p)}readSchema(e,s){const n=_e.of(e);if(n.isUnitSchema())return;const r=n.getMergedTraits();if(n.isListSchema()&&!Array.isArray(s))return this.readSchema(n,[s]);if(s==null)return s;if(typeof s=="object"){const a=!!r.sparse,c=!!r.xmlFlattened;if(n.isListSchema()){const p=n.getValueSchema(),f=[],E=p.getMergedTraits().xmlName??"member",S=c?s:(s[0]??s)[E],y=Array.isArray(S)?S:[S];for(const x of y)(x!=null||a)&&f.push(this.readSchema(p,x));return f}const l={};if(n.isMapSchema()){const p=n.getKeySchema(),f=n.getValueSchema();let E;c?E=Array.isArray(s)?s:[s]:E=Array.isArray(s.entry)?s.entry:[s.entry];const S=p.getMergedTraits().xmlName??"key",y=f.getMergedTraits().xmlName??"value";for(const x of E){const _=x[S],H=x[y];(H!=null||a)&&(l[_]=this.readSchema(f,H))}return l}if(n.isStructSchema()){const p=n.isUnionSchema();let f;p&&(f=new Bo(s,l));for(const[E,S]of n.structIterator()){const y=S.getMergedTraits(),x=y.httpPayload?y.xmlName??S.getName():S.getMemberTraits().xmlName??E;p&&f.mark(x),s[x]!=null&&(l[E]=this.readSchema(S,s[x]))}return p&&f.writeUnknown(),l}if(n.isDocumentSchema())return s;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${n.getName(!0)}`)}return n.isListSchema()?[]:n.isMapSchema()||n.isStructSchema()?{}:this.stringDeserializer.read(n,s)}parseXml(e){if(e.length){let s;try{s=zo(e)}catch(c){throw c&&typeof c=="object"&&Object.defineProperty(c,"$responseBodyText",{value:e}),c}const n="#text",r=Object.keys(s)[0],a=s[r];return a[n]&&(a[r]=a[n],delete a[n]),wi(a)}return{}}}const jo=(t,e)=>{if(e?.Error?.Code!==void 0)return e.Error.Code;if(e?.Code!==void 0)return e.Code;if(t.statusCode==404)return"NotFound"};class qo extends us{settings;stringBuffer;byteBuffer;buffer;constructor(e){super(),this.settings=e}write(e,s){const n=_e.of(e);if(n.isStringSchema()&&typeof s=="string")this.stringBuffer=s;else if(n.isBlobSchema())this.byteBuffer="byteLength"in s?s:(this.serdeContext?.base64Decoder??mr)(s);else{this.buffer=this.writeStruct(n,s,void 0);const r=n.getMergedTraits();r.httpPayload&&!r.xmlName&&this.buffer.withName(n.getName())}}flush(){if(this.byteBuffer!==void 0){const s=this.byteBuffer;return delete this.byteBuffer,s}if(this.stringBuffer!==void 0){const s=this.stringBuffer;return delete this.stringBuffer,s}const e=this.buffer;return this.settings.xmlNamespace&&(e?.attributes?.xmlns||e.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,e.toString()}writeStruct(e,s,n){const r=e.getMergedTraits(),a=e.isMemberSchema()&&!r.httpPayload?e.getMemberTraits().xmlName??e.getMemberName():r.xmlName??e.getName();if(!a||!e.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${e.getName(!0)}.`);const c=ue.of(a),[l,p]=this.getXmlnsAttribute(e,n);for(const[E,S]of e.structIterator()){const y=s[E];if(y!=null||S.isIdempotencyToken()){if(S.getMergedTraits().xmlAttribute){c.addAttribute(S.getMergedTraits().xmlName??E,this.writeSimple(S,y));continue}if(S.isListSchema())this.writeList(S,y,c,p);else if(S.isMapSchema())this.writeMap(S,y,c,p);else if(S.isStructSchema())c.addChildNode(this.writeStruct(S,y,p));else{const x=ue.of(S.getMergedTraits().xmlName??S.getMemberName());this.writeSimpleInto(S,y,x,p),c.addChildNode(x)}}}const{$unknown:f}=s;if(f&&e.isUnionSchema()&&Array.isArray(f)&&Object.keys(s).length===1){const[E,S]=f,y=ue.of(E);if(typeof S!="string")if(s instanceof ue||s instanceof Kt)c.addChildNode(s);else throw new Error("@aws-sdk - $unknown union member in XML requires value of type string, @aws-sdk/xml-builder::XmlNode or XmlText.");this.writeSimpleInto(0,S,y,p),c.addChildNode(y)}return p&&c.addAttribute(l,p),c}writeList(e,s,n,r){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${e.getName(!0)}`);const a=e.getMergedTraits(),c=e.getValueSchema(),l=c.getMergedTraits(),p=!!l.sparse,f=!!a.xmlFlattened,[E,S]=this.getXmlnsAttribute(e,r),y=(x,_)=>{if(c.isListSchema())this.writeList(c,Array.isArray(_)?_:[_],x,S);else if(c.isMapSchema())this.writeMap(c,_,x,S);else if(c.isStructSchema()){const H=this.writeStruct(c,_,S);x.addChildNode(H.withName(f?a.xmlName??e.getMemberName():l.xmlName??"member"))}else{const H=ue.of(f?a.xmlName??e.getMemberName():l.xmlName??"member");this.writeSimpleInto(c,_,H,S),x.addChildNode(H)}};if(f)for(const x of s)(p||x!=null)&&y(n,x);else{const x=ue.of(a.xmlName??e.getMemberName());S&&x.addAttribute(E,S);for(const _ of s)(p||_!=null)&&y(x,_);n.addChildNode(x)}}writeMap(e,s,n,r,a=!1){if(!e.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${e.getName(!0)}`);const c=e.getMergedTraits(),l=e.getKeySchema(),f=l.getMergedTraits().xmlName??"key",E=e.getValueSchema(),S=E.getMergedTraits(),y=S.xmlName??"value",x=!!S.sparse,_=!!c.xmlFlattened,[H,W]=this.getXmlnsAttribute(e,r),xe=(ie,Q,pe)=>{const ke=ue.of(f,Q),[mt,Hs]=this.getXmlnsAttribute(l,W);Hs&&ke.addAttribute(mt,Hs),ie.addChildNode(ke);let Ue=ue.of(y);E.isListSchema()?this.writeList(E,pe,Ue,W):E.isMapSchema()?this.writeMap(E,pe,Ue,W,!0):E.isStructSchema()?Ue=this.writeStruct(E,pe,W):this.writeSimpleInto(E,pe,Ue,W),ie.addChildNode(Ue)};if(_){for(const[ie,Q]of Object.entries(s))if(x||Q!=null){const pe=ue.of(c.xmlName??e.getMemberName());xe(pe,ie,Q),n.addChildNode(pe)}}else{let ie;a||(ie=ue.of(c.xmlName??e.getMemberName()),W&&ie.addAttribute(H,W),n.addChildNode(ie));for(const[Q,pe]of Object.entries(s))if(x||pe!=null){const ke=ue.of("entry");xe(ke,Q,pe),(a?n:ie).addChildNode(ke)}}}writeSimple(e,s){if(s===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");const n=_e.of(e);let r=null;if(s&&typeof s=="object")if(n.isBlobSchema())r=(this.serdeContext?.base64Encoder??fr)(s);else if(n.isTimestampSchema()&&s instanceof Date)switch(bi(n,this.settings)){case 5:r=s.toISOString().replace(".000Z","Z");break;case 6:r=Bs(s);break;case 7:r=String(s.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",s),r=Bs(s);break}else{if(n.isBigDecimalSchema()&&s)return s instanceof Ci?s.string:String(s);throw n.isMapSchema()||n.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${n.getName(!0)}`)}if((n.isBooleanSchema()||n.isNumericSchema()||n.isBigIntegerSchema()||n.isBigDecimalSchema())&&(r=String(s)),n.isStringSchema()&&(s===void 0&&n.isIdempotencyToken()?r=Ai():r=String(s)),r===null)throw new Error(`Unhandled schema-value pair ${n.getName(!0)}=${s}`);return r}writeSimpleInto(e,s,n,r){const a=this.writeSimple(e,s),c=_e.of(e),l=new Kt(a),[p,f]=this.getXmlnsAttribute(c,r);f&&n.addAttribute(p,f),n.addChildNode(l)}getXmlnsAttribute(e,s){const n=e.getMergedTraits(),[r,a]=n.xmlNamespace??[];return a&&a!==s?[r?`xmlns:${r}`:"xmlns",a]:[void 0,void 0]}}class Vo extends us{settings;constructor(e){super(),this.settings=e}createSerializer(){const e=new qo(this.settings);return e.setSerdeContext(this.serdeContext),e}createDeserializer(){const e=new Fo(this.settings);return e.setSerdeContext(this.serdeContext),e}}class Wo extends xi{codec;serializer;deserializer;mixin=new Uo;constructor(e){super(e);const s={timestampFormat:{useTrait:!0,default:5},httpBindings:!0,xmlNamespace:e.xmlNamespace,serviceNamespace:e.defaultNamespace};this.codec=new Vo(s),this.serializer=new ki(this.codec.createSerializer(),s),this.deserializer=new Ri(this.codec.createDeserializer(),s)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(e,s,n){const r=await super.serializeRequest(e,s,n),a=_e.of(e.input);if(!r.headers["content-type"]){const c=this.mixin.resolveRestContentType(this.getDefaultContentType(),a);c&&(r.headers["content-type"]=c)}return typeof r.body=="string"&&r.headers["content-type"]===this.getDefaultContentType()&&!r.body.startsWith("<?xml ")&&!this.hasUnstructuredPayloadBinding(a)&&(r.body='<?xml version="1.0" encoding="UTF-8"?>'+r.body),r}async deserializeResponse(e,s,n){return super.deserializeResponse(e,s,n)}async handleError(e,s,n,r,a){const c=jo(n,r)??"Unknown";if(r.Error&&typeof r.Error=="object")for(const _ of Object.keys(r.Error))r[_]=r.Error[_],_.toLowerCase()==="message"&&(r.message=r.Error[_]);r.RequestId&&!a.requestId&&(a.requestId=r.RequestId);const{errorSchema:l,errorMetadata:p}=await this.mixin.getErrorSchemaOrThrowBaseException(c,this.options.defaultNamespace,n,r,a),f=_e.of(l),E=r.Error?.message??r.Error?.Message??r.message??r.Message??"Unknown",S=We.for(l[1]).getErrorCtor(l)??Error,y=new S(E);await this.deserializeHttpMessage(l,s,n,r);const x={};for(const[_,H]of f.structIterator()){const W=H.getMergedTraits().xmlName??_,xe=r.Error?.[W]??r[W];x[_]=this.codec.createDeserializer().readSchema(H,xe)}throw this.mixin.decorateServiceException(Object.assign(y,p,{$fault:f.getMergedTraits().error,message:E},x),r)}getDefaultContentType(){return"application/xml"}hasUnstructuredPayloadBinding(e){for(const[,s]of e.structIterator())if(s.getMergedTraits().httpPayload)return!(s.isStructSchema()||s.isMapSchema()||s.isListSchema());return!1}}const Gt=[$.CRC32,$.CRC32C,$.CRC64NVME,$.SHA1,$.SHA256],Ko=[$.SHA256,$.SHA1,$.CRC32,$.CRC32C,$.CRC64NVME],Go=(t,{requestChecksumRequired:e,requestAlgorithmMember:s,requestChecksumCalculation:n})=>{if(!s)return n===De.WHEN_SUPPORTED||e?Wt:void 0;if(!t[s])return;const r=t[s];if(!Gt.includes(r))throw new Error(`The checksum algorithm "${r}" is not supported by the client. Select one of ${Gt}.`);return r},ds=t=>t===$.MD5?"content-md5":`x-amz-checksum-${t.toLowerCase()}`,Xo=(t,e)=>{const s=t.toLowerCase();for(const n of Object.keys(e))if(s===n.toLowerCase())return!0;return!1},Zo=(t,e)=>{const s=t.toLowerCase();for(const n of Object.keys(e))if(n.toLowerCase().startsWith(s))return!0;return!1},Ar=t=>t!==void 0&&typeof t!="string"&&!ArrayBuffer.isView(t)&&!vi(t),Yo=()=>{const e=new Array(8);for(let s=0;s<8;s++){const n=new Array(512);for(let r=0;r<256;r++){let a=BigInt(r);for(let c=0;c<8*(s+1);c++)a&1n?a=a>>1n^0x9a6c9329ac4bc9b5n:a=a>>1n;n[r*2]=Number(a>>32n&0xffffffffn),n[r*2+1]=Number(a&0xffffffffn)}e[s]=new Uint32Array(n)}return e};let Et,$e,Xt,Zt,Yt,Qt,Jt,es,ts;const Qo=()=>{Et||(Et=Yo(),[$e,Xt,Zt,Yt,Qt,Jt,es,ts]=Et)};class Jo{c1=0;c2=0;constructor(){Qo(),this.reset()}update(e){const s=e.length;let n=0,r=this.c1,a=this.c2;for(;n+8<=s;){const c=((a^e[n++])&255)<<1,l=((a>>>8^e[n++])&255)<<1,p=((a>>>16^e[n++])&255)<<1,f=((a>>>24^e[n++])&255)<<1,E=((r^e[n++])&255)<<1,S=((r>>>8^e[n++])&255)<<1,y=((r>>>16^e[n++])&255)<<1,x=((r>>>24^e[n++])&255)<<1;r=ts[c]^es[l]^Jt[p]^Qt[f]^Yt[E]^Zt[S]^Xt[y]^$e[x],a=ts[c+1]^es[l+1]^Jt[p+1]^Qt[f+1]^Yt[E+1]^Zt[S+1]^Xt[y+1]^$e[x+1]}for(;n<s;){const c=((a^e[n])&255)<<1;a=(a>>>8|(r&255)<<24)>>>0,r=r>>>8^$e[c],a^=$e[c+1],n++}this.c1=r,this.c2=a}async digest(){const e=this.c1^4294967295,s=this.c2^4294967295;return new Uint8Array([e>>>24,e>>>16&255,e>>>8&255,e&255,s>>>24,s>>>16&255,s>>>8&255,s&255])}reset(){this.c1=4294967295,this.c2=4294967295}}const ea=()=>bo,xr=(t,e)=>{switch(t){case $.MD5:return e.md5;case $.CRC32:return ea();case $.CRC32C:return Co;case $.CRC64NVME:return Jo;case $.SHA1:return e.sha1;case $.SHA256:return e.sha256;default:throw new Error(`Unsupported checksum algorithm: ${t}`)}},kr=(t,e)=>{const s=new t;return s.update(_i(e||"")),s.digest()},ta={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},sa=(t,e)=>(s,n)=>async r=>{if(!ye.isInstance(r.request)||Zo("x-amz-checksum-",r.request.headers))return s(r);const{request:a,input:c}=r,{body:l,headers:p}=a,{base64Encoder:f,streamHasher:E}=t,{requestChecksumRequired:S,requestAlgorithmMember:y}=e,x=await t.requestChecksumCalculation(),_=y?.name,H=y?.httpHeader;_&&!c[_]&&(x===De.WHEN_SUPPORTED||S)&&(c[_]=Wt,H&&(p[H]=Wt));const W=Go(c,{requestChecksumRequired:S,requestAlgorithmMember:y?.name,requestChecksumCalculation:x});let xe=l,ie=p;if(W){switch(W){case $.CRC32:G(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32","U");break;case $.CRC32C:G(n,"FLEXIBLE_CHECKSUMS_REQ_CRC32C","V");break;case $.CRC64NVME:G(n,"FLEXIBLE_CHECKSUMS_REQ_CRC64","W");break;case $.SHA1:G(n,"FLEXIBLE_CHECKSUMS_REQ_SHA1","X");break;case $.SHA256:G(n,"FLEXIBLE_CHECKSUMS_REQ_SHA256","Y");break}const Q=ds(W),pe=xr(W,t);if(Ar(l)){const{getAwsChunkedEncodingStream:ke,bodyLengthChecker:mt}=t;xe=ke(typeof t.requestStreamBufferSize=="number"&&t.requestStreamBufferSize>=8*1024?Pi(l,t.requestStreamBufferSize,n.logger):l,{base64Encoder:f,bodyLengthChecker:mt,checksumLocationName:Q,checksumAlgorithmFn:pe,streamHasher:E}),ie={...p,"content-encoding":p["content-encoding"]?`${p["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":p["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":Q},delete ie["content-length"]}else if(!Xo(Q,p)){const ke=await kr(pe,l);ie={...p,[Q]:f(ke)}}}try{return await s({...r,request:{...a,headers:ie,body:xe}})}catch(Q){if(Q instanceof Error&&Q.name==="InvalidChunkSizeError")try{Q.message.endsWith(".")||(Q.message+="."),Q.message+=" Set [requestStreamBufferSize=number e.g. 65_536] in client constructor to instruct AWS SDK to buffer your input stream."}catch{}throw Q}},na={name:"flexibleChecksumsInputMiddleware",toMiddleware:"serializerMiddleware",relation:"before",tags:["BODY_CHECKSUM"],override:!0},ra=(t,e)=>(s,n)=>async r=>{const a=r.input,{requestValidationModeMember:c}=e,l=await t.requestChecksumCalculation(),p=await t.responseChecksumValidation();switch(l){case De.WHEN_REQUIRED:G(n,"FLEXIBLE_CHECKSUMS_REQ_WHEN_REQUIRED","a");break;case De.WHEN_SUPPORTED:G(n,"FLEXIBLE_CHECKSUMS_REQ_WHEN_SUPPORTED","Z");break}switch(p){case ft.WHEN_REQUIRED:G(n,"FLEXIBLE_CHECKSUMS_RES_WHEN_REQUIRED","c");break;case ft.WHEN_SUPPORTED:G(n,"FLEXIBLE_CHECKSUMS_RES_WHEN_SUPPORTED","b");break}return c&&!a[c]&&p===ft.WHEN_SUPPORTED&&(a[c]="ENABLED"),s(r)},Rr=(t=[])=>{const e=[];for(const s of Ko)!t.includes(s)||!Gt.includes(s)||e.push(s);return e},ia=t=>{const e=t.lastIndexOf("-");if(e!==-1){const s=t.slice(e+1);if(!s.startsWith("0")){const n=parseInt(s,10);if(!isNaN(n)&&n>=1&&n<=1e4)return!0}}return!1},oa=async(t,{checksumAlgorithmFn:e,base64Encoder:s})=>s(await kr(e,t)),aa=async(t,{config:e,responseAlgorithms:s,logger:n})=>{const r=Rr(s),{body:a,headers:c}=t;for(const l of r){const p=ds(l),f=c[p];if(f){let E;try{E=xr(l,e)}catch(x){if(l===$.CRC64NVME){n?.warn(`Skipping ${$.CRC64NVME} checksum validation: ${x.message}`);continue}throw x}const{base64Encoder:S}=e;if(Ar(a)){t.body=Ii({expectedChecksum:f,checksumSourceLocation:p,checksum:new E,source:a,base64Encoder:S});return}const y=await oa(a,{checksumAlgorithmFn:E,base64Encoder:S});if(y===f)break;throw new Error(`Checksum mismatch: expected "${y}" but received "${f}" in response header "${p}".`)}}},ca={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},ua=(t,e)=>(s,n)=>async r=>{if(!ye.isInstance(r.request))return s(r);const a=r.input,c=await s(r),l=c.response,{requestValidationModeMember:p,responseAlgorithms:f}=e;if(p&&a[p]==="ENABLED"){const{clientName:E,commandName:S}=n;if(E==="S3Client"&&S==="GetObjectCommand"&&Rr(f).every(x=>{const _=ds(x),H=l.headers[_];return!H||ia(H)}))return c;await aa(l,{config:t,responseAlgorithms:f,logger:n.logger})}return c},da=(t,e)=>({applyToStack:s=>{s.add(sa(t,e),ta),s.addRelativeTo(ra(t,e),na),s.addRelativeTo(ua(t,e),ca)}}),la=t=>{const{requestChecksumCalculation:e,responseChecksumValidation:s,requestStreamBufferSize:n}=t;return Object.assign(t,{requestChecksumCalculation:st(e??_o),responseChecksumValidation:st(s??Po),requestStreamBufferSize:Number(n??0)})};const pa=t=>e=>async s=>{if(!ye.isInstance(s.request))return e(s);const{request:n}=s,{handlerProtocol:r=""}=t.requestHandler.metadata||{};if(r.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let a=n.hostname;n.port!=null&&(a+=`:${n.port}`),n.headers.host=a}return e(s)},ga={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},ha=t=>({applyToStack:e=>{e.add(pa(t),ga)}}),ma=()=>(t,e)=>async s=>{try{const n=await t(s),{clientName:r,commandName:a,logger:c,dynamoDbDocumentClientOptions:l={}}=e,{overrideInputFilterSensitiveLog:p,overrideOutputFilterSensitiveLog:f}=l,E=p??e.inputFilterSensitiveLog,S=f??e.outputFilterSensitiveLog,{$metadata:y,...x}=n.output;return c?.info?.({clientName:r,commandName:a,input:E(s.input),output:S(x),metadata:y}),n}catch(n){const{clientName:r,commandName:a,logger:c,dynamoDbDocumentClientOptions:l={}}=e,{overrideInputFilterSensitiveLog:p}=l,f=p??e.inputFilterSensitiveLog;throw c?.error?.({clientName:r,commandName:a,input:f(s.input),error:n,metadata:n.$metadata}),n}},fa={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Sa=t=>({applyToStack:e=>{e.add(ma(),fa)}}),Ea={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},ya=()=>t=>async e=>t(e),wa=t=>({applyToStack:e=>{e.add(ya(),Ea)}}),ba="content-length",Ca="x-amz-decoded-content-length";function Aa(){return(t,e)=>async s=>{const{request:n}=s;if(ye.isInstance(n)&&!(ba in n.headers)&&!(Ca in n.headers)){const r="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof e?.logger?.warn=="function"&&!(e.logger instanceof Sr)?e.logger.warn(r):console.warn(r)}return t({...s})}}const xa={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},ka=t=>({applyToStack:e=>{e.add(Aa(),xa)}}),Ra=t=>(e,s)=>async n=>{const r=await t.region(),a=t.region;let c=()=>{};s.__s3RegionRedirect&&(Object.defineProperty(t,"region",{writable:!1,value:async()=>s.__s3RegionRedirect}),c=()=>Object.defineProperty(t,"region",{writable:!0,value:a}));try{const l=await e(n);if(s.__s3RegionRedirect){c();const p=await t.region();if(r!==p)throw new Error("Region was not restored following S3 region redirect.")}return l}catch(l){throw c(),l}},va={tags:["REGION_REDIRECT","S3"],name:"regionRedirectEndpointMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"};function _a(t){return(e,s)=>async n=>{try{return await e(n)}catch(r){if(t.followRegionRedirects){const a=r?.$metadata?.httpStatusCode,c=s.commandName==="HeadBucketCommand",l=r?.$response?.headers?.["x-amz-bucket-region"];if(l&&(a===301||a===400&&(r?.name==="IllegalLocationConstraintException"||c))){try{const p=l;s.logger?.debug(`Redirecting from ${await t.region()} to ${p}`),s.__s3RegionRedirect=p}catch(p){throw new Error("Region redirect failed: "+p)}return e(n)}}throw r}}}const Pa={step:"initialize",tags:["REGION_REDIRECT","S3"],name:"regionRedirectMiddleware",override:!0},Ia=t=>({applyToStack:e=>{e.add(_a(t),Pa),e.addRelativeTo(Ra(t),va)}});class ls{data;lastPurgeTime=Date.now();static EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS=3e4;constructor(e={}){this.data=e}get(e){const s=this.data[e];if(s)return s}set(e,s){return this.data[e]=s,s}delete(e){delete this.data[e]}async purgeExpired(){const e=Date.now();if(!(this.lastPurgeTime+ls.EXPIRED_CREDENTIAL_PURGE_INTERVAL_MS>e))for(const s in this.data){const n=this.data[s];if(!n.isRefreshing){const r=await n.identity;r.expiration&&r.expiration.getTime()<e&&delete this.data[s]}}}}class yt{_identity;isRefreshing;accessed;constructor(e,s=!1,n=Date.now()){this._identity=e,this.isRefreshing=s,this.accessed=n}get identity(){return this.accessed=Date.now(),this._identity}}class ps{createSessionFn;cache;static REFRESH_WINDOW_MS=6e4;constructor(e,s=new ls){this.createSessionFn=e,this.cache=s}async getS3ExpressIdentity(e,s){const n=s.Bucket,{cache:r}=this,a=r.get(n);return a?a.identity.then(c=>(c.expiration?.getTime()??0)<Date.now()?r.set(n,new yt(this.getIdentity(n))).identity:((c.expiration?.getTime()??0)<Date.now()+ps.REFRESH_WINDOW_MS&&!a.isRefreshing&&(a.isRefreshing=!0,this.getIdentity(n).then(f=>{r.set(n,new yt(Promise.resolve(f)))})),c)):r.set(n,new yt(this.getIdentity(n))).identity}async getIdentity(e){await this.cache.purgeExpired().catch(r=>{console.warn(`Error while clearing expired entries in S3ExpressIdentityCache: 
`+r)});const s=await this.createSessionFn(e);if(!s.Credentials?.AccessKeyId||!s.Credentials?.SecretAccessKey)throw new Error("s3#createSession response credential missing AccessKeyId or SecretAccessKey.");return{accessKeyId:s.Credentials.AccessKeyId,secretAccessKey:s.Credentials.SecretAccessKey,sessionToken:s.Credentials.SessionToken,expiration:s.Credentials.Expiration?new Date(s.Credentials.Expiration):void 0}}}const Na="Directory",Ta="S3Express",Ma="sigv4-s3express",ss="X-Amz-S3session-Token",ns=ss.toLowerCase();class Oa extends Vt{async signWithCredentials(e,s,n){const r=Fs(s);e.headers[ns]=s.sessionToken;const a=this;return js(a,r),a.signRequest(e,n??{})}async presignWithCredentials(e,s,n){const r=Fs(s);return delete e.headers[ns],e.headers[ss]=s.sessionToken,e.query=e.query??{},e.query[ss]=s.sessionToken,js(this,r),this.presign(e,n)}}function Fs(t){return{accessKeyId:t.accessKeyId,secretAccessKey:t.secretAccessKey,expiration:t.expiration}}function js(t,e){const s=setTimeout(()=>{throw new Error("SignatureV4S3Express credential override was created but not called.")},10),n=t.credentialProvider,r=()=>(clearTimeout(s),t.credentialProvider=n,Promise.resolve(e));t.credentialProvider=r}const Da=t=>(e,s)=>async n=>{if(s.endpointV2){const r=s.endpointV2,a=r.properties?.authSchemes?.[0]?.name===Ma;if((r.properties?.backend===Ta||r.properties?.bucketType===Na)&&(G(s,"S3_EXPRESS_BUCKET","J"),s.isS3ExpressBucket=!0),a){const l=n.input.Bucket;if(l){const p=await t.s3ExpressIdentityProvider.getS3ExpressIdentity(await t.credentials(),{Bucket:l});s.s3ExpressIdentity=p,ye.isInstance(n.request)&&p.sessionToken&&(n.request.headers[ns]=p.sessionToken)}}}return e(n)},Ha={name:"s3ExpressMiddleware",step:"build",tags:["S3","S3_EXPRESS"],override:!0},Ua=t=>({applyToStack:e=>{e.add(Da(t),Ha)}}),Ba=async(t,e,s,n)=>{const r=await n.signWithCredentials(s,t,{});if(r.headers["X-Amz-Security-Token"]||r.headers["x-amz-security-token"])throw new Error("X-Amz-Security-Token must not be set for s3-express requests.");return r},La=t=>e=>{throw e},$a=(t,e)=>{},za=t=>(e,s)=>async n=>{if(!ye.isInstance(n.request))return e(n);const a=as(s).selectedHttpAuthScheme;if(!a)throw new Error("No HttpAuthScheme was selected: unable to sign request");const{httpAuthOption:{signingProperties:c={}},identity:l,signer:p}=a;let f;s.s3ExpressIdentity?f=await Ba(s.s3ExpressIdentity,c,n.request,await t.signer()):f=await p.sign(n.request,l,c);const E=await e({...n,request:f}).catch((p.errorHandler||La)(c));return(p.successHandler||$a)(E.response,c),E},Fa=t=>({applyToStack:e=>{e.addRelativeTo(za(t),Ni)}}),ja=(t,{session:e})=>{const[s,n]=e,{forcePathStyle:r,useAccelerateEndpoint:a,disableMultiregionAccessPoints:c,followRegionRedirects:l,s3ExpressIdentityProvider:p,bucketEndpoint:f,expectContinueHeader:E}=t;return Object.assign(t,{forcePathStyle:r??!1,useAccelerateEndpoint:a??!1,disableMultiregionAccessPoints:c??!1,followRegionRedirects:l??!1,s3ExpressIdentityProvider:p??new ps(async S=>s().send(new n({Bucket:S}))),bucketEndpoint:f??!1,expectContinueHeader:E??2097152})},qa={CopyObjectCommand:!0,UploadPartCopyCommand:!0,CompleteMultipartUploadCommand:!0},Va=3e3,Wa=t=>(e,s)=>async n=>{const r=await e(n),{response:a}=r;if(!gr.isInstance(a))return r;const{statusCode:c,body:l}=a;if(c<200||c>=300||!(typeof l?.stream=="function"||typeof l?.pipe=="function"||typeof l?.tee=="function"))return r;let f=l,E=l;l&&typeof l=="object"&&!(l instanceof Uint8Array)&&([f,E]=await Ti(l)),a.body=E;const S=await Ka(f,{streamCollector:async x=>Mi(x,Va)});typeof f?.destroy=="function"&&f.destroy();const y=t.utf8Encoder(S.subarray(S.length-16));if(S.length===0&&qa[s.commandName]){const x=new Error("S3 aborted request");throw x.name="InternalError",x}return y&&y.endsWith("</Error>")&&(a.statusCode=400),r},Ka=(t=new Uint8Array,e)=>t instanceof Uint8Array?Promise.resolve(t):e.streamCollector(t)||Promise.resolve(new Uint8Array),Ga={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},vr=t=>({applyToStack:e=>{e.addRelativeTo(Wa(t),Ga)}}),Xa=t=>typeof t=="string"&&t.indexOf("arn:")===0&&t.split(":").length>=6;function Za(t){return(e,s)=>async n=>{if(t.bucketEndpoint){const r=s.endpointV2;if(r){const a=n.input.Bucket;if(typeof a=="string")try{const c=new URL(a);s.endpointV2={...r,url:c}}catch(c){const l=`@aws-sdk/middleware-sdk-s3: bucketEndpoint=true was set but Bucket=${a} could not be parsed as URL.`;throw s.logger?.constructor?.name==="NoOpLogger"?console.warn(l):s.logger?.warn?.(l),c}}}return e(n)}}const Ya={name:"bucketEndpointMiddleware",override:!0,relation:"after",toMiddleware:"endpointV2Middleware"};function Qa({bucketEndpoint:t}){return e=>async s=>{const{input:{Bucket:n}}=s;if(!t&&typeof n=="string"&&!Xa(n)&&n.indexOf("/")>=0){const r=new Error(`Bucket name shouldn't contain '/', received '${n}'`);throw r.name="InvalidBucketName",r}return e({...s})}}const Ja={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},ec=t=>({applyToStack:e=>{e.add(Qa(t),Ja),e.addRelativeTo(Za(t),Ya)}}),tc=void 0;function sc(t){return t===void 0?!0:typeof t=="string"&&t.length<=50}function nc(t){const e=Oe(t.userAgentAppId??tc),{customUserAgent:s}=t;return Object.assign(t,{customUserAgent:typeof s=="string"?[[s]]:s,userAgentAppId:async()=>{const n=await e();if(!sc(n)){const r=t.logger?.constructor?.name==="NoOpLogger"||!t.logger?console:t.logger;typeof n!="string"?r?.warn("userAgentAppId must be a string or undefined."):n.length>50&&r?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n}})}const _r=(t,e=!1)=>{if(e){for(const s of t.split("."))if(!_r(s))return!1;return!0}return!(!Oi(t)||t.length<3||t.length>63||t!==t.toLowerCase()||Di(t))},qs=":",rc="/",ic=t=>{const e=t.split(qs);if(e.length<6)return null;const[s,n,r,a,c,...l]=e;if(s!=="arn"||n===""||r===""||l.join(qs)==="")return null;const p=l.map(f=>f.split(rc)).flat();return{partition:n,service:r,region:a,accountId:c,resourceId:p}},oc=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-6":{description:"Asia Pacific (New Zealand)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"aws global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"aws-cn global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"api.amazonwebservices.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"AWS European Sovereign Cloud (Germany)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"api.aws.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"aws-iso global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"api.aws.scloud",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"aws-iso-b global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"},"us-isob-west-1":{description:"US ISOB West"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"api.cloud-aws.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"aws-iso-e global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"api.aws.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"aws-iso-f global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"aws-us-gov global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}}],ac={partitions:oc};let cc=ac;const uc=t=>{const{partitions:e}=cc;for(const n of e){const{regions:r,outputs:a}=n;for(const[c,l]of Object.entries(r))if(c===t)return{...a,...l}}for(const n of e){const{regionRegex:r,outputs:a}=n;if(new RegExp(r).test(t))return{...a}}const s=e.find(n=>n.id==="aws");if(!s)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...s.outputs}},Pr={isVirtualHostableS3Bucket:_r,parseArn:ic,partition:uc};Er.aws=Pr;const dc=/\d{12}\.ddb/;async function lc(t,e,s){if(s.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&G(t,"PROTOCOL_RPC_V2_CBOR","M"),typeof e.retryStrategy=="function"){const a=await e.retryStrategy();typeof a.acquireInitialRetryToken=="function"?a.constructor?.name?.includes("Adaptive")?G(t,"RETRY_MODE_ADAPTIVE","F"):G(t,"RETRY_MODE_STANDARD","E"):G(t,"RETRY_MODE_LEGACY","D")}if(typeof e.accountIdEndpointMode=="function"){const a=t.endpointV2;switch(String(a?.url?.hostname).match(dc)&&G(t,"ACCOUNT_ID_ENDPOINT","O"),await e.accountIdEndpointMode?.()){case"disabled":G(t,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":G(t,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":G(t,"ACCOUNT_ID_MODE_REQUIRED","R");break}}const r=t.__smithy_context?.selectedHttpAuthScheme?.identity;if(r?.$source){const a=r;a.accountId&&G(t,"RESOLVED_ACCOUNT_ID","T");for(const[c,l]of Object.entries(a.$source??{}))G(t,c,l)}}const Vs="user-agent",wt="x-amz-user-agent",Ws=" ",bt="/",pc=/[^!$%&'*+\-.^_`|~\w]/g,gc=/[^!$%&'*+\-.^_`|~\w#]/g,Ks="-",hc=1024;function mc(t){let e="";for(const s in t){const n=t[s];if(e.length+n.length+1<=hc){e.length?e+=","+n:e+=n;continue}break}return e}const fc=t=>(e,s)=>async n=>{const{request:r}=n;if(!ye.isInstance(r))return e(n);const{headers:a}=r,c=s?.userAgent?.map(Ze)||[],l=(await t.defaultUserAgentProvider()).map(Ze);await lc(s,t,n);const p=s;l.push(`m/${mc(Object.assign({},s.__smithy_context?.features,p.__aws_sdk_context?.features))}`);const f=t?.customUserAgent?.map(Ze)||[],E=await t.userAgentAppId();E&&l.push(Ze(["app",`${E}`]));const S=[].concat([...l,...c,...f]).join(Ws),y=[...l.filter(x=>x.startsWith("aws-sdk-")),...f].join(Ws);return t.runtime!=="browser"?(y&&(a[wt]=a[wt]?`${a[Vs]} ${y}`:y),a[Vs]=S):a[wt]=S,e({...n,request:r})},Ze=t=>{const e=t[0].split(bt).map(c=>c.replace(pc,Ks)).join(bt),s=t[1]?.replace(gc,Ks),n=e.indexOf(bt),r=e.substring(0,n);let a=e.substring(n+1);return r==="api"&&(a=a.toLowerCase()),[r,a,s].filter(c=>c&&c.length>0).reduce((c,l,p)=>{switch(p){case 0:return l;case 1:return`${c}/${l}`;default:return`${c}#${l}`}},"")},Sc={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Ec=t=>({applyToStack:e=>{e.add(fc(t),Sc)}});class gs{sigv4aSigner;sigv4Signer;signerOptions;static sigv4aDependency(){return"none"}constructor(e){this.sigv4Signer=new Oa(e),this.signerOptions=e}async sign(e,s={}){return s.signingRegion==="*"?this.getSigv4aSigner().sign(e,s):this.sigv4Signer.sign(e,s)}async signWithCredentials(e,s,n={}){if(n.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`signWithCredentials with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.signWithCredentials(e,s,n)}async presign(e,s={}){if(s.signingRegion==="*")throw this.getSigv4aSigner(),new Error(`presign with signingRegion '*' is only supported when using the CRT dependency @aws-sdk/signature-v4-crt. Please check whether you have installed the "@aws-sdk/signature-v4-crt" package explicitly. You must also register the package by calling [require("@aws-sdk/signature-v4-crt");] or an ESM equivalent such as [import "@aws-sdk/signature-v4-crt";]. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`);return this.sigv4Signer.presign(e,s)}async presignWithCredentials(e,s,n={}){if(n.signingRegion==="*")throw new Error("Method presignWithCredentials is not supported for [signingRegion=*].");return this.sigv4Signer.presignWithCredentials(e,s,n)}getSigv4aSigner(){if(!this.sigv4aSigner)throw this.signerOptions.runtime==="node"?new Error("Neither CRT nor JS SigV4a implementation is available. Please load either @aws-sdk/signature-v4-crt or @aws-sdk/signature-v4a. For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt"):new Error("JS SigV4a implementation is not available or not a valid constructor. Please check whether you have installed the @aws-sdk/signature-v4a package explicitly. The CRT implementation is not available for browsers. You must also register the package by calling [require('@aws-sdk/signature-v4a');] or an ESM equivalent such as [import '@aws-sdk/signature-v4a';]. For more information please go to https://github.com/aws/aws-sdk-js-v3#using-javascript-non-crt-implementation-of-sigv4a");return this.sigv4aSigner}}const hs="required",i="type",g="rules",o="conditions",u="fn",d="argv",R="ref",I="assign",w="url",b="properties",Re="backend",ne="authSchemes",X="disableDoubleEncoding",Z="signingName",oe="signingRegion",C="headers",ms="signingRegionSet",yc=6,wc=!1,we=!0,fe="isSet",V="booleanEquals",A="error",nt="aws.partition",D="stringEquals",F="getAttr",j="name",L="substring",Gs="bucketSuffix",fs="parseURL",m="endpoint",h="tree",rt="aws.isVirtualHostableS3Bucket",it="{url#scheme}://{Bucket}.{url#authority}{url#path}",Ae="not",Xs="accessPointSuffix",tt="{url#scheme}://{url#authority}{url#path}",Ir="hardwareType",Nr="regionPrefix",Zs="bucketAliasSuffix",rs="outpostId",Pe="isValidHostLabel",Ss="sigv4a",Ke="s3-outposts",He="s3",Tr="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",Mr="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",Ys="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Or="aws.parseArn",Dr="bucketArn",Hr="arnType",ot="",Es="s3-object-lambda",Ur="accesspoint",ys="accessPointName",Qs="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",Js="mrapPartition",en="outpostType",tn="arnPrefix",Br="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",sn="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",nn="https://s3.{partitionResult#dnsSuffix}",Ie={[hs]:!1,[i]:"string"},Ne={[hs]:!0,default:!1,[i]:"boolean"},Be={[hs]:!1,[i]:"boolean"},Ee={[u]:V,[d]:[{[R]:"Accelerate"},!0]},z={[u]:V,[d]:[{[R]:"UseFIPS"},!0]},U={[u]:V,[d]:[{[R]:"UseDualStack"},!0]},q={[u]:fe,[d]:[{[R]:"Endpoint"}]},Lr={[u]:nt,[d]:[{[R]:"Region"}],[I]:"partitionResult"},rn={[u]:D,[d]:[{[u]:F,[d]:[{[R]:"partitionResult"},j]},"aws-cn"]},Fe={[u]:fe,[d]:[{[R]:"Bucket"}]},O={[R]:"Bucket"},on={[o]:[Ee],[A]:"S3Express does not support S3 Accelerate.",[i]:A},an={[o]:[q,{[u]:fs,[d]:[{[R]:"Endpoint"}],[I]:"url"}],[g]:[{[o]:[{[u]:fe,[d]:[{[R]:"DisableS3ExpressSessionAuth"}]},{[u]:V,[d]:[{[R]:"DisableS3ExpressSessionAuth"},!0]}],[g]:[{[o]:[{[u]:V,[d]:[{[u]:F,[d]:[{[R]:"url"},"isIp"]},!0]}],[g]:[{[o]:[{[u]:"uriEncode",[d]:[O],[I]:"uri_encoded_bucket"}],[g]:[{[m]:{[w]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[b]:{[Re]:"S3Express",[ne]:[{[X]:!0,[j]:"sigv4",[Z]:"s3express",[oe]:"{Region}"}]},[C]:{}},[i]:m}],[i]:h}],[i]:h},{[o]:[{[u]:rt,[d]:[O,!1]}],[g]:[{[m]:{[w]:it,[b]:{[Re]:"S3Express",[ne]:[{[X]:!0,[j]:"sigv4",[Z]:"s3express",[oe]:"{Region}"}]},[C]:{}},[i]:m}],[i]:h},{[A]:"S3Express bucket name is not a valid virtual hostable name.",[i]:A}],[i]:h},{[o]:[{[u]:V,[d]:[{[u]:F,[d]:[{[R]:"url"},"isIp"]},!0]}],[g]:[{[o]:[{[u]:"uriEncode",[d]:[O],[I]:"uri_encoded_bucket"}],[g]:[{[m]:{[w]:"{url#scheme}://{url#authority}/{uri_encoded_bucket}{url#path}",[b]:{[Re]:"S3Express",[ne]:[{[X]:!0,[j]:"sigv4-s3express",[Z]:"s3express",[oe]:"{Region}"}]},[C]:{}},[i]:m}],[i]:h}],[i]:h},{[o]:[{[u]:rt,[d]:[O,!1]}],[g]:[{[m]:{[w]:it,[b]:{[Re]:"S3Express",[ne]:[{[X]:!0,[j]:"sigv4-s3express",[Z]:"s3express",[oe]:"{Region}"}]},[C]:{}},[i]:m}],[i]:h},{[A]:"S3Express bucket name is not a valid virtual hostable name.",[i]:A}],[i]:h},ce={[u]:fs,[d]:[{[R]:"Endpoint"}],[I]:"url"},Ct={[u]:V,[d]:[{[u]:F,[d]:[{[R]:"url"},"isIp"]},!0]},$r={[R]:"url"},zr={[u]:"uriEncode",[d]:[O],[I]:"uri_encoded_bucket"},me={[Re]:"S3Express",[ne]:[{[X]:!0,[j]:"sigv4",[Z]:"s3express",[oe]:"{Region}"}]},v={},Fr={[u]:rt,[d]:[O,!1]},cn={[A]:"S3Express bucket name is not a valid virtual hostable name.",[i]:A},un={[u]:fe,[d]:[{[R]:"UseS3ExpressControlEndpoint"}]},dn={[u]:V,[d]:[{[R]:"UseS3ExpressControlEndpoint"},!0]},P={[u]:Ae,[d]:[q]},T={[u]:V,[d]:[{[R]:"UseDualStack"},!1]},N={[u]:V,[d]:[{[R]:"UseFIPS"},!1]},Ye={[A]:"Unrecognized S3Express bucket name format.",[i]:A},ln={[u]:Ae,[d]:[Fe]},pn={[R]:Ir},gn={[o]:[P],[A]:"Expected a endpoint to be specified but no endpoint was found",[i]:A},Qe={[ne]:[{[X]:!0,[j]:Ss,[Z]:Ke,[ms]:["*"]},{[X]:!0,[j]:"sigv4",[Z]:Ke,[oe]:"{Region}"}]},At={[u]:V,[d]:[{[R]:"ForcePathStyle"},!1]},bc={[R]:"ForcePathStyle"},K={[u]:V,[d]:[{[R]:"Accelerate"},!1]},J={[u]:D,[d]:[{[R]:"Region"},"aws-global"]},ee={[ne]:[{[X]:!0,[j]:"sigv4",[Z]:He,[oe]:"us-east-1"}]},M={[u]:Ae,[d]:[J]},te={[u]:V,[d]:[{[R]:"UseGlobalEndpoint"},!0]},hn={[w]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[b]:{[ne]:[{[X]:!0,[j]:"sigv4",[Z]:He,[oe]:"{Region}"}]},[C]:{}},Y={[ne]:[{[X]:!0,[j]:"sigv4",[Z]:He,[oe]:"{Region}"}]},se={[u]:V,[d]:[{[R]:"UseGlobalEndpoint"},!1]},mn={[w]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[b]:Y,[C]:{}},fn={[w]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[b]:Y,[C]:{}},Sn={[w]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[b]:Y,[C]:{}},xt={[u]:V,[d]:[{[u]:F,[d]:[$r,"isIp"]},!1]},kt={[w]:Tr,[b]:Y,[C]:{}},is={[w]:it,[b]:Y,[C]:{}},En={[m]:is,[i]:m},Rt={[w]:Mr,[b]:Y,[C]:{}},yn={[w]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[b]:Y,[C]:{}},Je={[A]:"Invalid region: region was not a valid DNS name.",[i]:A},ge={[R]:Dr},jr={[R]:Hr},vt={[u]:F,[d]:[ge,"service"]},ws={[R]:ys},wn={[o]:[U],[A]:"S3 Object Lambda does not support Dual-stack",[i]:A},bn={[o]:[Ee],[A]:"S3 Object Lambda does not support S3 Accelerate",[i]:A},Cn={[o]:[{[u]:fe,[d]:[{[R]:"DisableAccessPoints"}]},{[u]:V,[d]:[{[R]:"DisableAccessPoints"},!0]}],[A]:"Access points are not supported for this operation",[i]:A},_t={[o]:[{[u]:fe,[d]:[{[R]:"UseArnRegion"}]},{[u]:V,[d]:[{[R]:"UseArnRegion"},!1]},{[u]:Ae,[d]:[{[u]:D,[d]:[{[u]:F,[d]:[ge,"region"]},"{Region}"]}]}],[A]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[i]:A},qr={[u]:F,[d]:[{[R]:"bucketPartition"},j]},Vr={[u]:F,[d]:[ge,"accountId"]},Pt={[ne]:[{[X]:!0,[j]:"sigv4",[Z]:Es,[oe]:"{bucketArn#region}"}]},An={[A]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[i]:A},It={[A]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[i]:A},Nt={[A]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[i]:A},Tt={[A]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[i]:A},xn={[A]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[i]:A},kn={[A]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[i]:A},Le={[ne]:[{[X]:!0,[j]:"sigv4",[Z]:He,[oe]:"{bucketArn#region}"}]},Rn={[ne]:[{[X]:!0,[j]:Ss,[Z]:Ke,[ms]:["*"]},{[X]:!0,[j]:"sigv4",[Z]:Ke,[oe]:"{bucketArn#region}"}]},vn={[u]:Or,[d]:[O]},_n={[w]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[b]:Y,[C]:{}},Pn={[w]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[b]:Y,[C]:{}},In={[w]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[b]:Y,[C]:{}},Mt={[w]:Br,[b]:Y,[C]:{}},Nn={[w]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[b]:Y,[C]:{}},Tn={[R]:"UseObjectLambdaEndpoint"},Ot={[ne]:[{[X]:!0,[j]:"sigv4",[Z]:Es,[oe]:"{Region}"}]},Mn={[w]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[b]:Y,[C]:{}},On={[w]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[b]:Y,[C]:{}},Dn={[w]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[b]:Y,[C]:{}},Dt={[w]:tt,[b]:Y,[C]:{}},Hn={[w]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[b]:Y,[C]:{}},Ht=[{[R]:"Region"}],Cc=[{[R]:"Endpoint"}],Ac=[O],Ut=[Ee],Te=[q,ce],Un=[{[u]:fe,[d]:[{[R]:"DisableS3ExpressSessionAuth"}]},{[u]:V,[d]:[{[R]:"DisableS3ExpressSessionAuth"},!0]}],xc=[zr],Bt=[Fr],Se=[Lr],Lt=[z,U],je=[z,T],qe=[N,U],Ve=[N,T],Bn=[{[u]:L,[d]:[O,6,14,!0],[I]:"s3expressAvailabilityZoneId"},{[u]:L,[d]:[O,14,16,!0],[I]:"s3expressAvailabilityZoneDelim"},{[u]:D,[d]:[{[R]:"s3expressAvailabilityZoneDelim"},"--"]}],be=[{[o]:[z,U],[m]:{[w]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[b]:me,[C]:{}},[i]:m},{[o]:je,[m]:{[w]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[b]:me,[C]:{}},[i]:m},{[o]:qe,[m]:{[w]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[b]:me,[C]:{}},[i]:m},{[o]:Ve,[m]:{[w]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[b]:me,[C]:{}},[i]:m}],Ln=[{[u]:L,[d]:[O,6,15,!0],[I]:"s3expressAvailabilityZoneId"},{[u]:L,[d]:[O,15,17,!0],[I]:"s3expressAvailabilityZoneDelim"},{[u]:D,[d]:[{[R]:"s3expressAvailabilityZoneDelim"},"--"]}],$n=[{[u]:L,[d]:[O,6,19,!0],[I]:"s3expressAvailabilityZoneId"},{[u]:L,[d]:[O,19,21,!0],[I]:"s3expressAvailabilityZoneDelim"},{[u]:D,[d]:[{[R]:"s3expressAvailabilityZoneDelim"},"--"]}],zn=[{[u]:L,[d]:[O,6,20,!0],[I]:"s3expressAvailabilityZoneId"},{[u]:L,[d]:[O,20,22,!0],[I]:"s3expressAvailabilityZoneDelim"},{[u]:D,[d]:[{[R]:"s3expressAvailabilityZoneDelim"},"--"]}],Fn=[{[u]:L,[d]:[O,6,26,!0],[I]:"s3expressAvailabilityZoneId"},{[u]:L,[d]:[O,26,28,!0],[I]:"s3expressAvailabilityZoneDelim"},{[u]:D,[d]:[{[R]:"s3expressAvailabilityZoneDelim"},"--"]}],Ce=[{[o]:[z,U],[m]:{[w]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[b]:{[Re]:"S3Express",[ne]:[{[X]:!0,[j]:"sigv4-s3express",[Z]:"s3express",[oe]:"{Region}"}]},[C]:{}},[i]:m},{[o]:je,[m]:{[w]:"https://{Bucket}.s3express-fips-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[b]:{[Re]:"S3Express",[ne]:[{[X]:!0,[j]:"sigv4-s3express",[Z]:"s3express",[oe]:"{Region}"}]},[C]:{}},[i]:m},{[o]:qe,[m]:{[w]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.dualstack.{Region}.{partitionResult#dnsSuffix}",[b]:{[Re]:"S3Express",[ne]:[{[X]:!0,[j]:"sigv4-s3express",[Z]:"s3express",[oe]:"{Region}"}]},[C]:{}},[i]:m},{[o]:Ve,[m]:{[w]:"https://{Bucket}.s3express-{s3expressAvailabilityZoneId}.{Region}.{partitionResult#dnsSuffix}",[b]:{[Re]:"S3Express",[ne]:[{[X]:!0,[j]:"sigv4-s3express",[Z]:"s3express",[oe]:"{Region}"}]},[C]:{}},[i]:m}],jn=[O,0,7,!0],qn=[{[u]:L,[d]:[O,7,15,!0],[I]:"s3expressAvailabilityZoneId"},{[u]:L,[d]:[O,15,17,!0],[I]:"s3expressAvailabilityZoneDelim"},{[u]:D,[d]:[{[R]:"s3expressAvailabilityZoneDelim"},"--"]}],Vn=[{[u]:L,[d]:[O,7,16,!0],[I]:"s3expressAvailabilityZoneId"},{[u]:L,[d]:[O,16,18,!0],[I]:"s3expressAvailabilityZoneDelim"},{[u]:D,[d]:[{[R]:"s3expressAvailabilityZoneDelim"},"--"]}],Wn=[{[u]:L,[d]:[O,7,20,!0],[I]:"s3expressAvailabilityZoneId"},{[u]:L,[d]:[O,20,22,!0],[I]:"s3expressAvailabilityZoneDelim"},{[u]:D,[d]:[{[R]:"s3expressAvailabilityZoneDelim"},"--"]}],Kn=[{[u]:L,[d]:[O,7,21,!0],[I]:"s3expressAvailabilityZoneId"},{[u]:L,[d]:[O,21,23,!0],[I]:"s3expressAvailabilityZoneDelim"},{[u]:D,[d]:[{[R]:"s3expressAvailabilityZoneDelim"},"--"]}],Gn=[{[u]:L,[d]:[O,7,27,!0],[I]:"s3expressAvailabilityZoneId"},{[u]:L,[d]:[O,27,29,!0],[I]:"s3expressAvailabilityZoneDelim"},{[u]:D,[d]:[{[R]:"s3expressAvailabilityZoneDelim"},"--"]}],kc=[Fe],Xn=[{[u]:Pe,[d]:[{[R]:rs},!1]}],Zn=[{[u]:D,[d]:[{[R]:Nr},"beta"]}],Rc=["*"],Yn=[{[u]:Pe,[d]:[{[R]:"Region"},!1]}],ve=[{[u]:D,[d]:[{[R]:"Region"},"us-east-1"]}],$t=[{[u]:D,[d]:[jr,Ur]}],Qn=[{[u]:F,[d]:[ge,"resourceId[1]"],[I]:ys},{[u]:Ae,[d]:[{[u]:D,[d]:[ws,ot]}]}],vc=[ge,"resourceId[1]"],Jn=[U],zt=[{[u]:Ae,[d]:[{[u]:D,[d]:[{[u]:F,[d]:[ge,"region"]},ot]}]}],er=[{[u]:Ae,[d]:[{[u]:fe,[d]:[{[u]:F,[d]:[ge,"resourceId[2]"]}]}]}],_c=[ge,"resourceId[2]"],Ft=[{[u]:nt,[d]:[{[u]:F,[d]:[ge,"region"]}],[I]:"bucketPartition"}],tr=[{[u]:D,[d]:[qr,{[u]:F,[d]:[{[R]:"partitionResult"},j]}]}],jt=[{[u]:Pe,[d]:[{[u]:F,[d]:[ge,"region"]},!0]}],qt=[{[u]:Pe,[d]:[Vr,!1]}],sr=[{[u]:Pe,[d]:[ws,!1]}],et=[z],nr=[{[u]:Pe,[d]:[{[R]:"Region"},!0]}],Pc={parameters:{Bucket:Ie,Region:Ie,UseFIPS:Ne,UseDualStack:Ne,Endpoint:Ie,ForcePathStyle:Ne,Accelerate:Ne,UseGlobalEndpoint:Ne,UseObjectLambdaEndpoint:Be,Key:Ie,Prefix:Ie,CopySource:Ie,DisableAccessPoints:Be,DisableMultiRegionAccessPoints:Ne,UseArnRegion:Be,UseS3ExpressControlEndpoint:Be,DisableS3ExpressSessionAuth:Be},[g]:[{[o]:[{[u]:fe,[d]:Ht}],[g]:[{[o]:[Ee,z],error:"Accelerate cannot be used with FIPS",[i]:A},{[o]:[U,q],error:"Cannot set dual-stack in combination with a custom endpoint.",[i]:A},{[o]:[q,z],error:"A custom endpoint cannot be combined with FIPS",[i]:A},{[o]:[q,Ee],error:"A custom endpoint cannot be combined with S3 Accelerate",[i]:A},{[o]:[z,Lr,rn],error:"Partition does not support FIPS",[i]:A},{[o]:[Fe,{[u]:L,[d]:[O,0,yc,we],[I]:Gs},{[u]:D,[d]:[{[R]:Gs},"--x-s3"]}],[g]:[on,an,{[o]:[un,dn],[g]:[{[o]:Se,[g]:[{[o]:[zr,P],[g]:[{[o]:Lt,endpoint:{[w]:"https://s3express-control-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[b]:me,[C]:v},[i]:m},{[o]:je,endpoint:{[w]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[b]:me,[C]:v},[i]:m},{[o]:qe,endpoint:{[w]:"https://s3express-control.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[b]:me,[C]:v},[i]:m},{[o]:Ve,endpoint:{[w]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[b]:me,[C]:v},[i]:m}],[i]:h}],[i]:h}],[i]:h},{[o]:Bt,[g]:[{[o]:Se,[g]:[{[o]:Un,[g]:[{[o]:Bn,[g]:be,[i]:h},{[o]:Ln,[g]:be,[i]:h},{[o]:$n,[g]:be,[i]:h},{[o]:zn,[g]:be,[i]:h},{[o]:Fn,[g]:be,[i]:h},Ye],[i]:h},{[o]:Bn,[g]:Ce,[i]:h},{[o]:Ln,[g]:Ce,[i]:h},{[o]:$n,[g]:Ce,[i]:h},{[o]:zn,[g]:Ce,[i]:h},{[o]:Fn,[g]:Ce,[i]:h},Ye],[i]:h}],[i]:h},cn],[i]:h},{[o]:[Fe,{[u]:L,[d]:jn,[I]:Xs},{[u]:D,[d]:[{[R]:Xs},"--xa-s3"]}],[g]:[on,an,{[o]:Bt,[g]:[{[o]:Se,[g]:[{[o]:Un,[g]:[{[o]:qn,[g]:be,[i]:h},{[o]:Vn,[g]:be,[i]:h},{[o]:Wn,[g]:be,[i]:h},{[o]:Kn,[g]:be,[i]:h},{[o]:Gn,[g]:be,[i]:h},Ye],[i]:h},{[o]:qn,[g]:Ce,[i]:h},{[o]:Vn,[g]:Ce,[i]:h},{[o]:Wn,[g]:Ce,[i]:h},{[o]:Kn,[g]:Ce,[i]:h},{[o]:Gn,[g]:Ce,[i]:h},Ye],[i]:h}],[i]:h},cn],[i]:h},{[o]:[ln,un,dn],[g]:[{[o]:Se,[g]:[{[o]:Te,endpoint:{[w]:tt,[b]:me,[C]:v},[i]:m},{[o]:Lt,endpoint:{[w]:"https://s3express-control-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[b]:me,[C]:v},[i]:m},{[o]:je,endpoint:{[w]:"https://s3express-control-fips.{Region}.{partitionResult#dnsSuffix}",[b]:me,[C]:v},[i]:m},{[o]:qe,endpoint:{[w]:"https://s3express-control.dualstack.{Region}.{partitionResult#dnsSuffix}",[b]:me,[C]:v},[i]:m},{[o]:Ve,endpoint:{[w]:"https://s3express-control.{Region}.{partitionResult#dnsSuffix}",[b]:me,[C]:v},[i]:m}],[i]:h}],[i]:h},{[o]:[Fe,{[u]:L,[d]:[O,49,50,we],[I]:Ir},{[u]:L,[d]:[O,8,12,we],[I]:Nr},{[u]:L,[d]:jn,[I]:Zs},{[u]:L,[d]:[O,32,49,we],[I]:rs},{[u]:nt,[d]:Ht,[I]:"regionPartition"},{[u]:D,[d]:[{[R]:Zs},"--op-s3"]}],[g]:[{[o]:Xn,[g]:[{[o]:Bt,[g]:[{[o]:[{[u]:D,[d]:[pn,"e"]}],[g]:[{[o]:Zn,[g]:[gn,{[o]:Te,endpoint:{[w]:"https://{Bucket}.ec2.{url#authority}",[b]:Qe,[C]:v},[i]:m}],[i]:h},{endpoint:{[w]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[b]:Qe,[C]:v},[i]:m}],[i]:h},{[o]:[{[u]:D,[d]:[pn,"o"]}],[g]:[{[o]:Zn,[g]:[gn,{[o]:Te,endpoint:{[w]:"https://{Bucket}.op-{outpostId}.{url#authority}",[b]:Qe,[C]:v},[i]:m}],[i]:h},{endpoint:{[w]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[b]:Qe,[C]:v},[i]:m}],[i]:h},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[i]:A}],[i]:h},{error:"Invalid Outposts Bucket alias - it must be a valid bucket name.",[i]:A}],[i]:h},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[i]:A}],[i]:h},{[o]:kc,[g]:[{[o]:[q,{[u]:Ae,[d]:[{[u]:fe,[d]:[{[u]:fs,[d]:Cc}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[i]:A},{[o]:[At,Fr],[g]:[{[o]:Se,[g]:[{[o]:Yn,[g]:[{[o]:[Ee,rn],error:"S3 Accelerate cannot be used in this region",[i]:A},{[o]:[U,z,K,P,J],endpoint:{[w]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[b]:ee,[C]:v},[i]:m},{[o]:[U,z,K,P,M,te],[g]:[{endpoint:hn,[i]:m}],[i]:h},{[o]:[U,z,K,P,M,se],endpoint:hn,[i]:m},{[o]:[T,z,K,P,J],endpoint:{[w]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[b]:ee,[C]:v},[i]:m},{[o]:[T,z,K,P,M,te],[g]:[{endpoint:mn,[i]:m}],[i]:h},{[o]:[T,z,K,P,M,se],endpoint:mn,[i]:m},{[o]:[U,N,Ee,P,J],endpoint:{[w]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[b]:ee,[C]:v},[i]:m},{[o]:[U,N,Ee,P,M,te],[g]:[{endpoint:fn,[i]:m}],[i]:h},{[o]:[U,N,Ee,P,M,se],endpoint:fn,[i]:m},{[o]:[U,N,K,P,J],endpoint:{[w]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[b]:ee,[C]:v},[i]:m},{[o]:[U,N,K,P,M,te],[g]:[{endpoint:Sn,[i]:m}],[i]:h},{[o]:[U,N,K,P,M,se],endpoint:Sn,[i]:m},{[o]:[T,N,K,q,ce,Ct,J],endpoint:{[w]:Tr,[b]:ee,[C]:v},[i]:m},{[o]:[T,N,K,q,ce,xt,J],endpoint:{[w]:it,[b]:ee,[C]:v},[i]:m},{[o]:[T,N,K,q,ce,Ct,M,te],[g]:[{[o]:ve,endpoint:kt,[i]:m},{endpoint:kt,[i]:m}],[i]:h},{[o]:[T,N,K,q,ce,xt,M,te],[g]:[{[o]:ve,endpoint:is,[i]:m},En],[i]:h},{[o]:[T,N,K,q,ce,Ct,M,se],endpoint:kt,[i]:m},{[o]:[T,N,K,q,ce,xt,M,se],endpoint:is,[i]:m},{[o]:[T,N,Ee,P,J],endpoint:{[w]:Mr,[b]:ee,[C]:v},[i]:m},{[o]:[T,N,Ee,P,M,te],[g]:[{[o]:ve,endpoint:Rt,[i]:m},{endpoint:Rt,[i]:m}],[i]:h},{[o]:[T,N,Ee,P,M,se],endpoint:Rt,[i]:m},{[o]:[T,N,K,P,J],endpoint:{[w]:Ys,[b]:ee,[C]:v},[i]:m},{[o]:[T,N,K,P,M,te],[g]:[{[o]:ve,endpoint:{[w]:Ys,[b]:Y,[C]:v},[i]:m},{endpoint:yn,[i]:m}],[i]:h},{[o]:[T,N,K,P,M,se],endpoint:yn,[i]:m}],[i]:h},Je],[i]:h}],[i]:h},{[o]:[q,ce,{[u]:D,[d]:[{[u]:F,[d]:[$r,"scheme"]},"http"]},{[u]:rt,[d]:[O,we]},At,N,T,K],[g]:[{[o]:Se,[g]:[{[o]:Yn,[g]:[En],[i]:h},Je],[i]:h}],[i]:h},{[o]:[At,{[u]:Or,[d]:Ac,[I]:Dr}],[g]:[{[o]:[{[u]:F,[d]:[ge,"resourceId[0]"],[I]:Hr},{[u]:Ae,[d]:[{[u]:D,[d]:[jr,ot]}]}],[g]:[{[o]:[{[u]:D,[d]:[vt,Es]}],[g]:[{[o]:$t,[g]:[{[o]:Qn,[g]:[wn,bn,{[o]:zt,[g]:[Cn,{[o]:er,[g]:[_t,{[o]:Ft,[g]:[{[o]:Se,[g]:[{[o]:tr,[g]:[{[o]:jt,[g]:[{[o]:[{[u]:D,[d]:[Vr,ot]}],error:"Invalid ARN: Missing account id",[i]:A},{[o]:qt,[g]:[{[o]:sr,[g]:[{[o]:Te,endpoint:{[w]:Qs,[b]:Pt,[C]:v},[i]:m},{[o]:et,endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[b]:Pt,[C]:v},[i]:m},{endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[b]:Pt,[C]:v},[i]:m}],[i]:h},An],[i]:h},It],[i]:h},Nt],[i]:h},Tt],[i]:h}],[i]:h}],[i]:h},xn],[i]:h},{error:"Invalid ARN: bucket ARN is missing a region",[i]:A}],[i]:h},kn],[i]:h},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[i]:A}],[i]:h},{[o]:$t,[g]:[{[o]:Qn,[g]:[{[o]:zt,[g]:[{[o]:$t,[g]:[{[o]:zt,[g]:[Cn,{[o]:er,[g]:[_t,{[o]:Ft,[g]:[{[o]:Se,[g]:[{[o]:[{[u]:D,[d]:[qr,"{partitionResult#name}"]}],[g]:[{[o]:jt,[g]:[{[o]:[{[u]:D,[d]:[vt,He]}],[g]:[{[o]:qt,[g]:[{[o]:sr,[g]:[{[o]:Ut,error:"Access Points do not support S3 Accelerate",[i]:A},{[o]:Lt,endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[b]:Le,[C]:v},[i]:m},{[o]:je,endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[b]:Le,[C]:v},[i]:m},{[o]:qe,endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[b]:Le,[C]:v},[i]:m},{[o]:[N,T,q,ce],endpoint:{[w]:Qs,[b]:Le,[C]:v},[i]:m},{[o]:Ve,endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[b]:Le,[C]:v},[i]:m}],[i]:h},An],[i]:h},It],[i]:h},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[i]:A}],[i]:h},Nt],[i]:h},Tt],[i]:h}],[i]:h}],[i]:h},xn],[i]:h}],[i]:h}],[i]:h},{[o]:[{[u]:Pe,[d]:[ws,we]}],[g]:[{[o]:Jn,error:"S3 MRAP does not support dual-stack",[i]:A},{[o]:et,error:"S3 MRAP does not support FIPS",[i]:A},{[o]:Ut,error:"S3 MRAP does not support S3 Accelerate",[i]:A},{[o]:[{[u]:V,[d]:[{[R]:"DisableMultiRegionAccessPoints"},we]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[i]:A},{[o]:[{[u]:nt,[d]:Ht,[I]:Js}],[g]:[{[o]:[{[u]:D,[d]:[{[u]:F,[d]:[{[R]:Js},j]},{[u]:F,[d]:[ge,"partition"]}]}],[g]:[{endpoint:{[w]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[b]:{[ne]:[{[X]:we,name:Ss,[Z]:He,[ms]:Rc}]},[C]:v},[i]:m}],[i]:h},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[i]:A}],[i]:h}],[i]:h},{error:"Invalid Access Point Name",[i]:A}],[i]:h},kn],[i]:h},{[o]:[{[u]:D,[d]:[vt,Ke]}],[g]:[{[o]:Jn,error:"S3 Outposts does not support Dual-stack",[i]:A},{[o]:et,error:"S3 Outposts does not support FIPS",[i]:A},{[o]:Ut,error:"S3 Outposts does not support S3 Accelerate",[i]:A},{[o]:[{[u]:fe,[d]:[{[u]:F,[d]:[ge,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[i]:A},{[o]:[{[u]:F,[d]:vc,[I]:rs}],[g]:[{[o]:Xn,[g]:[_t,{[o]:Ft,[g]:[{[o]:Se,[g]:[{[o]:tr,[g]:[{[o]:jt,[g]:[{[o]:qt,[g]:[{[o]:[{[u]:F,[d]:_c,[I]:en}],[g]:[{[o]:[{[u]:F,[d]:[ge,"resourceId[3]"],[I]:ys}],[g]:[{[o]:[{[u]:D,[d]:[{[R]:en},Ur]}],[g]:[{[o]:Te,endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[b]:Rn,[C]:v},[i]:m},{endpoint:{[w]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[b]:Rn,[C]:v},[i]:m}],[i]:h},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[i]:A}],[i]:h},{error:"Invalid ARN: expected an access point name",[i]:A}],[i]:h},{error:"Invalid ARN: Expected a 4-component resource",[i]:A}],[i]:h},It],[i]:h},Nt],[i]:h},Tt],[i]:h}],[i]:h}],[i]:h},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[i]:A}],[i]:h},{error:"Invalid ARN: The Outpost Id was not set",[i]:A}],[i]:h},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[i]:A}],[i]:h},{error:"Invalid ARN: No ARN type specified",[i]:A}],[i]:h},{[o]:[{[u]:L,[d]:[O,0,4,wc],[I]:tn},{[u]:D,[d]:[{[R]:tn},"arn:"]},{[u]:Ae,[d]:[{[u]:fe,[d]:[vn]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[i]:A},{[o]:[{[u]:V,[d]:[bc,we]},vn],error:"Path-style addressing cannot be used with ARN buckets",[i]:A},{[o]:xc,[g]:[{[o]:Se,[g]:[{[o]:[K],[g]:[{[o]:[U,P,z,J],endpoint:{[w]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[b]:ee,[C]:v},[i]:m},{[o]:[U,P,z,M,te],[g]:[{endpoint:_n,[i]:m}],[i]:h},{[o]:[U,P,z,M,se],endpoint:_n,[i]:m},{[o]:[T,P,z,J],endpoint:{[w]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[b]:ee,[C]:v},[i]:m},{[o]:[T,P,z,M,te],[g]:[{endpoint:Pn,[i]:m}],[i]:h},{[o]:[T,P,z,M,se],endpoint:Pn,[i]:m},{[o]:[U,P,N,J],endpoint:{[w]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[b]:ee,[C]:v},[i]:m},{[o]:[U,P,N,M,te],[g]:[{endpoint:In,[i]:m}],[i]:h},{[o]:[U,P,N,M,se],endpoint:In,[i]:m},{[o]:[T,q,ce,N,J],endpoint:{[w]:Br,[b]:ee,[C]:v},[i]:m},{[o]:[T,q,ce,N,M,te],[g]:[{[o]:ve,endpoint:Mt,[i]:m},{endpoint:Mt,[i]:m}],[i]:h},{[o]:[T,q,ce,N,M,se],endpoint:Mt,[i]:m},{[o]:[T,P,N,J],endpoint:{[w]:sn,[b]:ee,[C]:v},[i]:m},{[o]:[T,P,N,M,te],[g]:[{[o]:ve,endpoint:{[w]:sn,[b]:Y,[C]:v},[i]:m},{endpoint:Nn,[i]:m}],[i]:h},{[o]:[T,P,N,M,se],endpoint:Nn,[i]:m}],[i]:h},{error:"Path-style addressing cannot be used with S3 Accelerate",[i]:A}],[i]:h}],[i]:h}],[i]:h},{[o]:[{[u]:fe,[d]:[Tn]},{[u]:V,[d]:[Tn,we]}],[g]:[{[o]:Se,[g]:[{[o]:nr,[g]:[wn,bn,{[o]:Te,endpoint:{[w]:tt,[b]:Ot,[C]:v},[i]:m},{[o]:et,endpoint:{[w]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[b]:Ot,[C]:v},[i]:m},{endpoint:{[w]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[b]:Ot,[C]:v},[i]:m}],[i]:h},Je],[i]:h}],[i]:h},{[o]:[ln],[g]:[{[o]:Se,[g]:[{[o]:nr,[g]:[{[o]:[z,U,P,J],endpoint:{[w]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[b]:ee,[C]:v},[i]:m},{[o]:[z,U,P,M,te],[g]:[{endpoint:Mn,[i]:m}],[i]:h},{[o]:[z,U,P,M,se],endpoint:Mn,[i]:m},{[o]:[z,T,P,J],endpoint:{[w]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[b]:ee,[C]:v},[i]:m},{[o]:[z,T,P,M,te],[g]:[{endpoint:On,[i]:m}],[i]:h},{[o]:[z,T,P,M,se],endpoint:On,[i]:m},{[o]:[N,U,P,J],endpoint:{[w]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[b]:ee,[C]:v},[i]:m},{[o]:[N,U,P,M,te],[g]:[{endpoint:Dn,[i]:m}],[i]:h},{[o]:[N,U,P,M,se],endpoint:Dn,[i]:m},{[o]:[N,T,q,ce,J],endpoint:{[w]:tt,[b]:ee,[C]:v},[i]:m},{[o]:[N,T,q,ce,M,te],[g]:[{[o]:ve,endpoint:Dt,[i]:m},{endpoint:Dt,[i]:m}],[i]:h},{[o]:[N,T,q,ce,M,se],endpoint:Dt,[i]:m},{[o]:[N,T,P,J],endpoint:{[w]:nn,[b]:ee,[C]:v},[i]:m},{[o]:[N,T,P,M,te],[g]:[{[o]:ve,endpoint:{[w]:nn,[b]:Y,[C]:v},[i]:m},{endpoint:Hn,[i]:m}],[i]:h},{[o]:[N,T,P,M,se],endpoint:Hn,[i]:m}],[i]:h},Je],[i]:h}],[i]:h}],[i]:h},{error:"A region must be set when sending requests to S3.",[i]:A}]},Ic=Pc,Nc=new Hi({size:50,params:["Accelerate","Bucket","DisableAccessPoints","DisableMultiRegionAccessPoints","DisableS3ExpressSessionAuth","Endpoint","ForcePathStyle","Region","UseArnRegion","UseDualStack","UseFIPS","UseGlobalEndpoint","UseObjectLambdaEndpoint","UseS3ExpressControlEndpoint"]}),Wr=(t,e={})=>Nc.get(t,()=>Ui(Ic,{endpointParams:t,logger:e.logger}));Er.aws=Pr;const Tc=t=>async(e,s,n)=>{if(!n)throw new Error("Could not find `input` for `defaultEndpointRuleSetHttpAuthSchemeParametersProvider`");const r=await t(e,s,n),a=as(s)?.commandInstance?.constructor?.getEndpointParameterInstructions;if(!a)throw new Error(`getEndpointParameterInstructions() is not defined on '${s.commandName}'`);const c=await Bi(n,{getEndpointParameterInstructions:a},e);return Object.assign(r,c)},Mc=async(t,e,s)=>({operation:as(e).operation,region:await st(t.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()}),Oc=Tc(Mc);function Kr(t){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(e,s)=>({signingProperties:{config:e,context:s}})}}function Gr(t){return{schemeId:"aws.auth#sigv4a",signingProperties:{name:"s3",region:t.region},propertiesExtractor:(e,s)=>({signingProperties:{config:e,context:s}})}}const Dc=(t,e,s)=>r=>{const c=t(r).properties?.authSchemes;if(!c)return e(r);const l=[];for(const p of c){const{name:f,properties:E={},...S}=p,y=f.toLowerCase();f!==y&&console.warn(`HttpAuthScheme has been normalized with lowercasing: '${f}' to '${y}'`);let x;if(y==="sigv4a"){x="aws.auth#sigv4a";const W=c.find(xe=>{const ie=xe.name.toLowerCase();return ie!=="sigv4a"&&ie.startsWith("sigv4")});if(gs.sigv4aDependency()==="none"&&W)continue}else if(y.startsWith("sigv4"))x="aws.auth#sigv4";else throw new Error(`Unknown HttpAuthScheme found in '@smithy.rules#endpointRuleSet': '${y}'`);const _=s[x];if(!_)throw new Error(`Could not find HttpAuthOption create function for '${x}'`);const H=_(r);H.schemeId=x,H.signingProperties={...H.signingProperties||{},...S,...E},l.push(H)}return l},Hc=t=>{const e=[];switch(t.operation){default:e.push(Kr(t)),e.push(Gr(t))}return e},Uc=Dc(Wr,Hc,{"aws.auth#sigv4":Kr,"aws.auth#sigv4a":Gr}),Bc=t=>{const e=Oo(t),s=Mo(e);return Object.assign(s,{authSchemePreference:st(t.authSchemePreference??[])})},Lc=t=>Object.assign(t,{useFipsEndpoint:t.useFipsEndpoint??!1,useDualstackEndpoint:t.useDualstackEndpoint??!1,forcePathStyle:t.forcePathStyle??!1,useAccelerateEndpoint:t.useAccelerateEndpoint??!1,useGlobalEndpoint:t.useGlobalEndpoint??!1,disableMultiregionAccessPoints:t.disableMultiregionAccessPoints??!1,defaultSigningName:"s3",clientContextParams:t.clientContextParams??{}}),Xr={ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},DisableS3ExpressSessionAuth:{type:"clientContextParams",name:"disableS3ExpressSessionAuth"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}};class re extends Li{constructor(e){super(e),Object.setPrototypeOf(this,re.prototype)}}class bs extends re{name="NoSuchUpload";$fault="client";constructor(e){super({name:"NoSuchUpload",$fault:"client",...e}),Object.setPrototypeOf(this,bs.prototype)}}class Cs extends re{name="AccessDenied";$fault="client";constructor(e){super({name:"AccessDenied",$fault:"client",...e}),Object.setPrototypeOf(this,Cs.prototype)}}class As extends re{name="ObjectNotInActiveTierError";$fault="client";constructor(e){super({name:"ObjectNotInActiveTierError",$fault:"client",...e}),Object.setPrototypeOf(this,As.prototype)}}class xs extends re{name="BucketAlreadyExists";$fault="client";constructor(e){super({name:"BucketAlreadyExists",$fault:"client",...e}),Object.setPrototypeOf(this,xs.prototype)}}class ks extends re{name="BucketAlreadyOwnedByYou";$fault="client";constructor(e){super({name:"BucketAlreadyOwnedByYou",$fault:"client",...e}),Object.setPrototypeOf(this,ks.prototype)}}class Rs extends re{name="NoSuchBucket";$fault="client";constructor(e){super({name:"NoSuchBucket",$fault:"client",...e}),Object.setPrototypeOf(this,Rs.prototype)}}class vs extends re{name="InvalidObjectState";$fault="client";StorageClass;AccessTier;constructor(e){super({name:"InvalidObjectState",$fault:"client",...e}),Object.setPrototypeOf(this,vs.prototype),this.StorageClass=e.StorageClass,this.AccessTier=e.AccessTier}}class _s extends re{name="NoSuchKey";$fault="client";constructor(e){super({name:"NoSuchKey",$fault:"client",...e}),Object.setPrototypeOf(this,_s.prototype)}}class Ps extends re{name="NotFound";$fault="client";constructor(e){super({name:"NotFound",$fault:"client",...e}),Object.setPrototypeOf(this,Ps.prototype)}}class Is extends re{name="EncryptionTypeMismatch";$fault="client";constructor(e){super({name:"EncryptionTypeMismatch",$fault:"client",...e}),Object.setPrototypeOf(this,Is.prototype)}}class Ns extends re{name="InvalidRequest";$fault="client";constructor(e){super({name:"InvalidRequest",$fault:"client",...e}),Object.setPrototypeOf(this,Ns.prototype)}}class Ts extends re{name="InvalidWriteOffset";$fault="client";constructor(e){super({name:"InvalidWriteOffset",$fault:"client",...e}),Object.setPrototypeOf(this,Ts.prototype)}}class Ms extends re{name="TooManyParts";$fault="client";constructor(e){super({name:"TooManyParts",$fault:"client",...e}),Object.setPrototypeOf(this,Ms.prototype)}}class Os extends re{name="IdempotencyParameterMismatch";$fault="client";constructor(e){super({name:"IdempotencyParameterMismatch",$fault:"client",...e}),Object.setPrototypeOf(this,Os.prototype)}}class Ds extends re{name="ObjectAlreadyInActiveTierError";$fault="client";constructor(e){super({name:"ObjectAlreadyInActiveTierError",$fault:"client",...e}),Object.setPrototypeOf(this,Ds.prototype)}}const $c="ACL",zc="AccessDenied",rr="AccessKeyId",Fc="AccessTier",Zr="Bucket",jc="BucketAlreadyExists",qc="BucketAlreadyOwnedByYou",at="BucketKeyEnabled",Vc="Body",Wc="ChecksumAlgorithm",Kc="CacheControl",Yr="ChecksumCRC32",Qr="ChecksumCRC32C",Jr="ChecksumCRC64NVME",Gc="Cache-Control",Xc="Content-Disposition",Zc="ContentDisposition",Yc="Content-Encoding",Qc="ContentEncoding",Jc="ContentLanguage",eu="Content-Language",tu="Content-Length",su="ContentLength",nu="Content-MD5",ru="ContentMD5",ei="ChecksumSHA1",ti="ChecksumSHA256",iu="CreateSessionOutput",ou="CreateSessionResult",au="CreateSessionRequest",cu="CreateSession",uu="ChecksumType",du="Content-Type",lu="ContentType",ir="Credentials",os="Expiration",pu="ExpectedBucketOwner",gu="EncryptionTypeMismatch",or="ETag",ar="Expires",hu="GrantFullControl",mu="GrantRead",fu="GrantReadACP",Su="GrantWriteACP",Eu="IfMatch",yu="If-Match",wu="IfNoneMatch",bu="If-None-Match",Cu="InvalidObjectState",Au="IdempotencyParameterMismatch",xu="InvalidRequest",ku="InvalidWriteOffset",Ru="Key",vu="Metadata",_u="NotFound",Pu="NoSuchBucket",Iu="NoSuchKey",Nu="NoSuchUpload",Tu="ObjectAlreadyInActiveTierError",Mu="ObjectLockLegalHoldStatus",Ou="ObjectLockMode",Du="ObjectLockRetainUntilDate",Hu="ObjectNotInActiveTierError",Uu="PutObject",Bu="PutObjectOutput",Lu="PutObjectRequest",$u="RequestCharged",zu="RequestPayer",cr="SecretAccessKey",Fu="StreamingBlob",si="StorageClass",ju="SessionCredentialValue",qu="SessionCredentials",Vu="SessionMode",ct="ServerSideEncryption",ni="SSECustomerAlgorithm",ri="SSECustomerKey",ii="SSECustomerKeyMD5",Ge="SSEKMSEncryptionContext",Xe="SSEKMSKeyId",ur="SessionToken",Wu="Size",Ku="TooManyParts",Gu="Tagging",Xu="VersionId",Zu="WriteOffsetBytes",Yu="WebsiteRedirectLocation",de="client",le="error",oi="http",Qu="httpChecksum",he="httpError",k="httpHeader",Ju="httpPrefixHeaders",ai="smithy.ts.sdk.synthetic.com.amazonaws.s3",ed="streaming",Me="xmlName",td="x-amz-acl",ci="x-amz-checksum-crc32",ui="x-amz-checksum-crc32c",di="x-amz-checksum-crc64nvme",li="x-amz-checksum-sha1",pi="x-amz-checksum-sha256",sd="x-amz-create-session-mode",nd="x-amz-checksum-type",rd="x-amz-expiration",id="x-amz-expected-bucket-owner",od="x-amz-grant-full-control",ad="x-amz-grant-read",cd="x-amz-grant-read-acp",ud="x-amz-grant-write-acp",dd="x-amz-meta-",ld="x-amz-object-lock-legal-hold",pd="x-amz-object-lock-mode",gd="x-amz-object-lock-retain-until-date",hd="x-amz-object-size",md="x-amz-request-charged",fd="x-amz-request-payer",Sd="x-amz-storage-class",Ed="x-amz-sdk-checksum-algorithm",ut="x-amz-server-side-encryption",dt="x-amz-server-side-encryption-aws-kms-key-id",lt="x-amz-server-side-encryption-bucket-key-enabled",pt="x-amz-server-side-encryption-context",gi="x-amz-server-side-encryption-customer-algorithm",yd="x-amz-server-side-encryption-customer-key",hi="x-amz-server-side-encryption-customer-key-MD5",wd="x-amz-tagging",bd="x-amz-version-id",Cd="x-amz-write-offset-bytes",Ad="x-amz-website-redirect-location",B="com.amazonaws.s3",mi=We.for(ai);var xd=[-3,ai,"S3ServiceException",0,[],[]];mi.registerError(xd,re);const ae=We.for(B);var kd=[-3,B,zc,{[le]:de,[he]:403},[],[]];ae.registerError(kd,Cs);var Rd=[-3,B,jc,{[le]:de,[he]:409},[],[]];ae.registerError(Rd,xs);var vd=[-3,B,qc,{[le]:de,[he]:409},[],[]];ae.registerError(vd,ks);var _d=[-3,B,gu,{[le]:de,[he]:400},[],[]];ae.registerError(_d,Is);var Pd=[-3,B,Au,{[le]:de,[he]:400},[],[]];ae.registerError(Pd,Os);var Id=[-3,B,Cu,{[le]:de,[he]:403},[si,Fc],[0,0]];ae.registerError(Id,vs);var Nd=[-3,B,xu,{[le]:de,[he]:400},[],[]];ae.registerError(Nd,Ns);var Td=[-3,B,ku,{[le]:de,[he]:400},[],[]];ae.registerError(Td,Ts);var Md=[-3,B,Pu,{[le]:de,[he]:404},[],[]];ae.registerError(Md,Rs);var Od=[-3,B,Iu,{[le]:de,[he]:404},[],[]];ae.registerError(Od,_s);var Dd=[-3,B,Nu,{[le]:de,[he]:404},[],[]];ae.registerError(Dd,bs);var Hd=[-3,B,_u,{[le]:de},[],[]];ae.registerError(Hd,Ps);var Ud=[-3,B,Tu,{[le]:de,[he]:403},[],[]];ae.registerError(Ud,Ds);var Bd=[-3,B,Hu,{[le]:de,[he]:403},[],[]];ae.registerError(Bd,As);var Ld=[-3,B,Ku,{[le]:de,[he]:400},[],[]];ae.registerError(Ld,Ms);const $d=[mi,ae];var dr=[0,B,ju,8,0],zd=[0,B,ri,8,0],gt=[0,B,Ge,8,0],ht=[0,B,Xe,8,0],Fd=[0,B,Fu,{[ed]:1},42],jd=[3,B,iu,{[Me]:ou},[ir,ct,Xe,Ge,at],[[()=>Kd,{[Me]:ir}],[0,{[k]:ut}],[()=>ht,{[k]:dt}],[()=>gt,{[k]:pt}],[2,{[k]:lt}]],1],qd=[3,B,au,0,[Zr,Vu,ct,Xe,Ge,at],[[0,1],[0,{[k]:sd}],[0,{[k]:ut}],[()=>ht,{[k]:dt}],[()=>gt,{[k]:pt}],[2,{[k]:lt}]],1],Vd=[3,B,Bu,0,[os,or,Yr,Qr,Jr,ei,ti,uu,ct,Xu,ni,ii,Xe,Ge,at,Wu,$u],[[0,{[k]:rd}],[0,{[k]:or}],[0,{[k]:ci}],[0,{[k]:ui}],[0,{[k]:di}],[0,{[k]:li}],[0,{[k]:pi}],[0,{[k]:nd}],[0,{[k]:ut}],[0,{[k]:bd}],[0,{[k]:gi}],[0,{[k]:hi}],[()=>ht,{[k]:dt}],[()=>gt,{[k]:pt}],[2,{[k]:lt}],[1,{[k]:hd}],[0,{[k]:md}]]],Wd=[3,B,Lu,0,[Zr,Ru,$c,Vc,Kc,Zc,Qc,Jc,su,ru,lu,Wc,Yr,Qr,Jr,ei,ti,ar,Eu,wu,hu,mu,fu,Su,Zu,vu,ct,si,Yu,ni,ri,ii,Xe,Ge,at,zu,Gu,Ou,Du,Mu,pu],[[0,1],[0,1],[0,{[k]:td}],[()=>Fd,16],[0,{[k]:Gc}],[0,{[k]:Xc}],[0,{[k]:Yc}],[0,{[k]:eu}],[1,{[k]:tu}],[0,{[k]:nu}],[0,{[k]:du}],[0,{[k]:Ed}],[0,{[k]:ci}],[0,{[k]:ui}],[0,{[k]:di}],[0,{[k]:li}],[0,{[k]:pi}],[4,{[k]:ar}],[0,{[k]:yu}],[0,{[k]:bu}],[0,{[k]:od}],[0,{[k]:ad}],[0,{[k]:cd}],[0,{[k]:ud}],[1,{[k]:Cd}],[128,{[Ju]:dd}],[0,{[k]:ut}],[0,{[k]:Sd}],[0,{[k]:Ad}],[0,{[k]:gi}],[()=>zd,{[k]:yd}],[0,{[k]:hi}],[()=>ht,{[k]:dt}],[()=>gt,{[k]:pt}],[2,{[k]:lt}],[0,{[k]:fd}],[0,{[k]:wd}],[0,{[k]:pd}],[5,{[k]:gd}],[0,{[k]:ld}],[0,{[k]:id}]],2],Kd=[3,B,qu,0,[rr,cr,ur,os],[[0,{[Me]:rr}],[()=>dr,{[Me]:cr}],[()=>dr,{[Me]:ur}],[4,{[Me]:os}]],4],Gd=[9,B,cu,{[oi]:["GET","/?session",200]},()=>qd,()=>jd],Xd=[9,B,Uu,{[Qu]:"-",[oi]:["PUT","/{Key+}?x-id=PutObject",200]},()=>Wd,()=>Vd];class Zd extends yr.classBuilder().ep({...Xr,DisableS3ExpressSessionAuth:{type:"staticContextParams",value:!0},Bucket:{type:"contextParams",name:"Bucket"}}).m(function(e,s,n,r){return[wr(n,e.getEndpointParameterInstructions()),vr(n)]}).s("AmazonS3","CreateSession",{}).n("S3Client","CreateSessionCommand").sc(Gd).build(){}const Yd="3.988.0",Qd={version:Yd},Jd={};function Sl(){return typeof window<"u"?window:typeof self<"u"?self:Jd}const el=({serviceId:t,clientVersion:e})=>async s=>{const n=typeof window<"u"?window.navigator:void 0,r=n?.userAgent??"",a=n?.userAgentData?.platform??lr.os(r)??"other",c=void 0,l=n?.userAgentData?.brands??[],p=l[l.length-1],f=p?.brand??lr.browser(r)??"unknown",E=p?.version??"unknown",S=[["aws-sdk-js",e],["ua","2.1"],[`os/${a}`,c],["lang/js"],["md/browser",`${f}_${E}`]];t&&S.push([`api/${t}`,e]);const y=await s?.userAgentAppId?.();return y&&S.push([`app/${y}`]),S},lr={os(t){if(/iPhone|iPad|iPod/.test(t))return"iOS";if(/Macintosh|Mac OS X/.test(t))return"macOS";if(/Windows NT/.test(t))return"Windows";if(/Android/.test(t))return"Android";if(/Linux/.test(t))return"Linux"},browser(t){if(/EdgiOS|EdgA|Edg\//.test(t))return"Microsoft Edge";if(/Firefox\//.test(t))return"Firefox";if(/Chrome\//.test(t))return"Chrome";if(/Safari\//.test(t))return"Safari"}},tl=t=>({apiVersion:"2006-03-01",base64Decoder:t?.base64Decoder??mr,base64Encoder:t?.base64Encoder??fr,disableHostPrefix:t?.disableHostPrefix??!1,endpointProvider:t?.endpointProvider??Wr,extensions:t?.extensions??[],getAwsChunkedEncodingStream:t?.getAwsChunkedEncodingStream??ji,httpAuthSchemeProvider:t?.httpAuthSchemeProvider??Uc,httpAuthSchemes:t?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4"),signer:new Cr},{schemeId:"aws.auth#sigv4a",identityProvider:e=>e.getIdentityProvider("aws.auth#sigv4a"),signer:new To}],logger:t?.logger??new Sr,protocol:t?.protocol??Wo,protocolSettings:t?.protocolSettings??{defaultNamespace:"com.amazonaws.s3",errorTypeRegistries:$d,xmlNamespace:"http://s3.amazonaws.com/doc/2006-03-01/",version:"2006-03-01",serviceTarget:"AmazonS3"},sdkStreamMixin:t?.sdkStreamMixin??Fi,serviceId:t?.serviceId??"S3",signerConstructor:t?.signerConstructor??gs,signingEscapePath:t?.signingEscapePath??!1,urlParser:t?.urlParser??zi,useArnRegion:t?.useArnRegion??void 0,utf8Decoder:t?.utf8Decoder??$i,utf8Encoder:t?.utf8Encoder??hr}),sl=t=>{const e=qi(t),s=()=>e().then(so),n=tl(t);return{...n,...t,runtime:"browser",defaultsMode:e,bodyLengthChecker:t?.bodyLengthChecker??Yi,credentialDefaultProvider:t?.credentialDefaultProvider??(r=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:t?.defaultUserAgentProvider??el({serviceId:n.serviceId,clientVersion:Qd.version}),eventStreamSerdeProvider:t?.eventStreamSerdeProvider??Zi,maxAttempts:t?.maxAttempts??Xi,md5:t?.md5??Gi,region:t?.region??to("Region is missing"),requestHandler:eo.create(t?.requestHandler??s),retryMode:t?.retryMode??(async()=>(await s()).retryMode||Ki),sha1:t?.sha1??xo,sha256:t?.sha256??Ao,streamCollector:t?.streamCollector??Wi,streamHasher:t?.streamHasher??Vi,useDualstackEndpoint:t?.useDualstackEndpoint??(()=>Promise.resolve(Ji)),useFipsEndpoint:t?.useFipsEndpoint??(()=>Promise.resolve(Qi))}},nl=t=>({setRegion(e){t.region=e},region(){return t.region}}),rl=t=>({region:t.region()}),il=t=>{const e=t.httpAuthSchemes;let s=t.httpAuthSchemeProvider,n=t.credentials;return{setHttpAuthScheme(r){const a=e.findIndex(c=>c.schemeId===r.schemeId);a===-1?e.push(r):e.splice(a,1,r)},httpAuthSchemes(){return e},setHttpAuthSchemeProvider(r){s=r},httpAuthSchemeProvider(){return s},setCredentials(r){n=r},credentials(){return n}}},ol=t=>({httpAuthSchemes:t.httpAuthSchemes(),httpAuthSchemeProvider:t.httpAuthSchemeProvider(),credentials:t.credentials()}),al=(t,e)=>{const s=Object.assign(nl(t),no(t),ro(t),il(t));return e.forEach(n=>n.configure(s)),Object.assign(t,rl(s),io(s),oo(s),ol(s))};class El extends ao{config;constructor(...[e]){const s=sl(e||{});super(s),this.initConfig=s;const n=Lc(s),r=nc(n),a=la(r),c=co(a),l=uo(c),p=l,f=lo(p),E=po(f),S=Bc(E),y=ja(S,{session:[()=>this,Zd]}),x=al(y,e?.extensions||[]);this.config=x,this.middlewareStack.use(go(this.config)),this.middlewareStack.use(Ec(this.config)),this.middlewareStack.use(ho(this.config)),this.middlewareStack.use(mo(this.config)),this.middlewareStack.use(ha(this.config)),this.middlewareStack.use(Sa(this.config)),this.middlewareStack.use(wa(this.config)),this.middlewareStack.use(fo(this.config,{httpAuthSchemeParametersProvider:Oc,identityProviderConfigProvider:async _=>new Eo({"aws.auth#sigv4":_.credentials,"aws.auth#sigv4a":_.credentials})})),this.middlewareStack.use(So(this.config)),this.middlewareStack.use(ec(this.config)),this.middlewareStack.use(vo(this.config)),this.middlewareStack.use(Ia(this.config)),this.middlewareStack.use(Ua(this.config)),this.middlewareStack.use(Fa(this.config))}destroy(){super.destroy()}}function cl(t){return e=>async s=>{const n={...s.input},r=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const a of r){const c=n[a.target];if(c){let l;typeof c=="string"?ll(c,t)?l=t.base64Decoder(c):(l=t.utf8Decoder(c),n[a.target]=t.base64Encoder(l)):(l=ArrayBuffer.isView(c)?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):new Uint8Array(c),n[a.target]=t.base64Encoder(l));const p=new t.md5;p.update(l),n[a.hash]=t.base64Encoder(await p.digest())}}return e({...s,input:n})}}const ul={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},dl=t=>({applyToStack:e=>{e.add(cl(t),ul)}});function ll(t,e){if(!/^(?:[A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t))return!1;try{return e.base64Decoder(t).length===32}catch{return!1}}class yl extends yr.classBuilder().ep({...Xr,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(e,s,n,r){return[wr(n,e.getEndpointParameterInstructions()),da(n,{requestAlgorithmMember:{httpHeader:"x-amz-sdk-checksum-algorithm",name:"ChecksumAlgorithm"},requestChecksumRequired:!1}),ka(),vr(n),dl(n)]}).s("AmazonS3","PutObject",{}).n("S3Client","PutObjectCommand").sc(Xd).build(){}function pl(t){const{port:e,query:s}=t;let{protocol:n,path:r,hostname:a}=t;n&&n.slice(-1)!==":"&&(n+=":"),e&&(a+=`:${e}`),r&&r.charAt(0)!=="/"&&(r=`/${r}`);let c=s?yo(s):"";c&&c[0]!=="?"&&(c=`?${c}`);let l="";if(t.username!=null||t.password!=null){const f=t.username??"",E=t.password??"";l=`${f}:${E}@`}let p="";return t.fragment&&(p=`#${t.fragment}`),`${n}//${l}${a}${r}${c}${p}`}const gl="UNSIGNED-PAYLOAD",hl="X-Amz-Content-Sha256";class pr{signer;constructor(e){const s={service:e.signingName||e.service||"s3",uriEscapePath:e.uriEscapePath||!1,applyChecksum:e.applyChecksum||!1,...e};this.signer=new gs(s)}presign(e,{unsignableHeaders:s=new Set,hoistableHeaders:n=new Set,unhoistableHeaders:r=new Set,...a}={}){return this.prepareRequest(e,{unsignableHeaders:s,unhoistableHeaders:r,hoistableHeaders:n}),this.signer.presign(e,{expiresIn:900,unsignableHeaders:s,unhoistableHeaders:r,...a})}presignWithCredentials(e,s,{unsignableHeaders:n=new Set,hoistableHeaders:r=new Set,unhoistableHeaders:a=new Set,...c}={}){return this.prepareRequest(e,{unsignableHeaders:n,unhoistableHeaders:a,hoistableHeaders:r}),this.signer.presignWithCredentials(e,s,{expiresIn:900,unsignableHeaders:n,unhoistableHeaders:a,...c})}prepareRequest(e,{unsignableHeaders:s=new Set,unhoistableHeaders:n=new Set,hoistableHeaders:r=new Set}={}){s.add("content-type"),Object.keys(e.headers).map(p=>p.toLowerCase()).filter(p=>p.startsWith("x-amz-server-side-encryption")).forEach(p=>{r.has(p)||n.add(p)}),e.headers[hl]=gl;const a=e.headers.host,c=e.port,l=`${e.hostname}${e.port!=null?":"+c:""}`;(!a||a===e.hostname&&e.port!=null)&&(e.headers.host=l)}}const wl=async(t,e,s={})=>{let n,r;if(typeof t.config.endpointProvider=="function"){const y=(await wo(e.input,e.constructor,t.config)).properties?.authSchemes?.[0];y?.name==="sigv4a"?r=y?.signingRegionSet?.join(","):r=y?.signingRegion,n=new pr({...t.config,signingName:y?.signingName,region:async()=>r})}else n=new pr(t.config);const a=(S,y)=>async x=>{const{request:_}=x;if(!ye.isInstance(_))throw new Error("Request to be presigned is not an valid HTTP request.");delete _.headers["amz-sdk-invocation-id"],delete _.headers["amz-sdk-request"],delete _.headers["x-amz-user-agent"];let H;const W={...s,signingRegion:s.signingRegion??y.signing_region??r,signingService:s.signingService??y.signing_service};return y.s3ExpressIdentity?H=await n.presignWithCredentials(_,y.s3ExpressIdentity,W):H=await n.presign(_,W),{response:{},output:{$metadata:{httpStatusCode:200},presigned:H}}},c="presignInterceptMiddleware",l=t.middlewareStack.clone();l.addRelativeTo(a,{name:c,relation:"before",toMiddleware:"awsAuthMiddleware",override:!0});const p=e.resolveMiddleware(l,t.config,{}),{output:f}=await p({input:e.input}),{presigned:E}=f;return pl(E)};export{yl as P,El as S,wl as g,Sl as l};
