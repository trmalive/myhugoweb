import{q as P}from"./md-vendor_d3-quadtree-CSANTnla.js";import{t as R}from"./md-vendor_d3-timer-DdKHrDhs.js";import{d as b}from"./md-vendor_d3-dispatch-kxCwF96_.js";function Z(n,o){var s,p=1;n==null&&(n=0),o==null&&(o=0);function y(){var c,l=s.length,g,M=0,i=0;for(c=0;c<l;++c)g=s[c],M+=g.x,i+=g.y;for(M=(M/l-n)*p,i=(i/l-o)*p,c=0;c<l;++c)g=s[c],g.x-=M,g.y-=i}return y.initialize=function(c){s=c},y.x=function(c){return arguments.length?(n=+c,y):n},y.y=function(c){return arguments.length?(o=+c,y):o},y.strength=function(c){return arguments.length?(p=+c,y):p},y}function T(n){return function(){return n}}function B(n){return(n()-.5)*1e-6}function C(n){return n.x+n.vx}function G(n){return n.y+n.vy}function _(n){var o,s,p,y=1,c=1;typeof n!="function"&&(n=T(n==null?1:+n));function l(){for(var i,m=o.length,N,v,f,x,r,t,e=0;e<c;++e)for(N=P(o,C,G).visitAfter(g),i=0;i<m;++i)v=o[i],r=s[v.index],t=r*r,f=v.x+v.vx,x=v.y+v.vy,N.visit(u);function u(h,a,z,A,D){var d=h.data,j=h.r,w=r+j;if(d){if(d.index>v.index){var I=f-d.x-d.vx,S=x-d.y-d.vy,E=I*I+S*S;E<w*w&&(I===0&&(I=B(p),E+=I*I),S===0&&(S=B(p),E+=S*S),E=(w-(E=Math.sqrt(E)))/E*y,v.vx+=(I*=E)*(w=(j*=j)/(t+j)),v.vy+=(S*=E)*w,d.vx-=I*(w=1-w),d.vy-=S*w)}return}return a>f+w||A<f-w||z>x+w||D<x-w}}function g(i){if(i.data)return i.r=s[i.data.index];for(var m=i.r=0;m<4;++m)i[m]&&i[m].r>i.r&&(i.r=i[m].r)}function M(){if(o){var i,m=o.length,N;for(s=new Array(m),i=0;i<m;++i)N=o[i],s[N.index]=+n(N,i,o)}}return l.initialize=function(i,m){o=i,p=m,M()},l.iterations=function(i){return arguments.length?(c=+i,l):c},l.strength=function(i){return arguments.length?(y=+i,l):y},l.radius=function(i){return arguments.length?(n=typeof i=="function"?i:T(+i),M(),l):n},l}function H(n){return n.index}function $(n,o){var s=n.get(o);if(!s)throw new Error("node not found: "+o);return s}function k(n){var o=H,s=N,p,y=T(30),c,l,g,M,i,m=1;n==null&&(n=[]);function N(t){return 1/Math.min(g[t.source.index],g[t.target.index])}function v(t){for(var e=0,u=n.length;e<m;++e)for(var h=0,a,z,A,D,d,j,w;h<u;++h)a=n[h],z=a.source,A=a.target,D=A.x+A.vx-z.x-z.vx||B(i),d=A.y+A.vy-z.y-z.vy||B(i),j=Math.sqrt(D*D+d*d),j=(j-c[h])/j*t*p[h],D*=j,d*=j,A.vx-=D*(w=M[h]),A.vy-=d*w,z.vx+=D*(w=1-w),z.vy+=d*w}function f(){if(l){var t,e=l.length,u=n.length,h=new Map(l.map((z,A)=>[o(z,A,l),z])),a;for(t=0,g=new Array(e);t<u;++t)a=n[t],a.index=t,typeof a.source!="object"&&(a.source=$(h,a.source)),typeof a.target!="object"&&(a.target=$(h,a.target)),g[a.source.index]=(g[a.source.index]||0)+1,g[a.target.index]=(g[a.target.index]||0)+1;for(t=0,M=new Array(u);t<u;++t)a=n[t],M[t]=g[a.source.index]/(g[a.source.index]+g[a.target.index]);p=new Array(u),x(),c=new Array(u),r()}}function x(){if(l)for(var t=0,e=n.length;t<e;++t)p[t]=+s(n[t],t,n)}function r(){if(l)for(var t=0,e=n.length;t<e;++t)c[t]=+y(n[t],t,n)}return v.initialize=function(t,e){l=t,i=e,f()},v.links=function(t){return arguments.length?(n=t,f(),v):n},v.id=function(t){return arguments.length?(o=t,v):o},v.iterations=function(t){return arguments.length?(m=+t,v):m},v.strength=function(t){return arguments.length?(s=typeof t=="function"?t:T(+t),x(),v):s},v.distance=function(t){return arguments.length?(y=typeof t=="function"?t:T(+t),r(),v):y},v}const J=1664525,K=1013904223,F=4294967296;function L(){let n=1;return()=>(n=(J*n+K)%F)/F}function O(n){return n.x}function Q(n){return n.y}var U=10,V=Math.PI*(3-Math.sqrt(5));function q(n){var o,s=1,p=.001,y=1-Math.pow(p,1/300),c=0,l=.6,g=new Map,M=R(N),i=b("tick","end"),m=L();n==null&&(n=[]);function N(){v(),i.call("tick",o),s<p&&(M.stop(),i.call("end",o))}function v(r){var t,e=n.length,u;r===void 0&&(r=1);for(var h=0;h<r;++h)for(s+=(c-s)*y,g.forEach(function(a){a(s)}),t=0;t<e;++t)u=n[t],u.fx==null?u.x+=u.vx*=l:(u.x=u.fx,u.vx=0),u.fy==null?u.y+=u.vy*=l:(u.y=u.fy,u.vy=0);return o}function f(){for(var r=0,t=n.length,e;r<t;++r){if(e=n[r],e.index=r,e.fx!=null&&(e.x=e.fx),e.fy!=null&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var u=U*Math.sqrt(.5+r),h=r*V;e.x=u*Math.cos(h),e.y=u*Math.sin(h)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function x(r){return r.initialize&&r.initialize(n,m),r}return f(),o={tick:v,restart:function(){return M.restart(N),o},stop:function(){return M.stop(),o},nodes:function(r){return arguments.length?(n=r,f(),g.forEach(x),o):n},alpha:function(r){return arguments.length?(s=+r,o):s},alphaMin:function(r){return arguments.length?(p=+r,o):p},alphaDecay:function(r){return arguments.length?(y=+r,o):+y},alphaTarget:function(r){return arguments.length?(c=+r,o):c},velocityDecay:function(r){return arguments.length?(l=1-r,o):1-l},randomSource:function(r){return arguments.length?(m=r,g.forEach(x),o):m},force:function(r,t){return arguments.length>1?(t==null?g.delete(r):g.set(r,x(t)),o):g.get(r)},find:function(r,t,e){var u=0,h=n.length,a,z,A,D,d;for(e==null?e=1/0:e*=e,u=0;u<h;++u)D=n[u],a=r-D.x,z=t-D.y,A=a*a+z*z,A<e&&(d=D,e=A);return d},on:function(r,t){return arguments.length>1?(i.on(r,t),o):i.on(r)}}}function nn(){var n,o,s,p,y=T(-30),c,l=1,g=1/0,M=.81;function i(f){var x,r=n.length,t=P(n,O,Q).visitAfter(N);for(p=f,x=0;x<r;++x)o=n[x],t.visit(v)}function m(){if(n){var f,x=n.length,r;for(c=new Array(x),f=0;f<x;++f)r=n[f],c[r.index]=+y(r,f,n)}}function N(f){var x=0,r,t,e=0,u,h,a;if(f.length){for(u=h=a=0;a<4;++a)(r=f[a])&&(t=Math.abs(r.value))&&(x+=r.value,e+=t,u+=t*r.x,h+=t*r.y);f.x=u/e,f.y=h/e}else{r=f,r.x=r.data.x,r.y=r.data.y;do x+=c[r.data.index];while(r=r.next)}f.value=x}function v(f,x,r,t){if(!f.value)return!0;var e=f.x-o.x,u=f.y-o.y,h=t-x,a=e*e+u*u;if(h*h/M<a)return a<g&&(e===0&&(e=B(s),a+=e*e),u===0&&(u=B(s),a+=u*u),a<l&&(a=Math.sqrt(l*a)),o.vx+=e*f.value*p/a,o.vy+=u*f.value*p/a),!0;if(f.length||a>=g)return;(f.data!==o||f.next)&&(e===0&&(e=B(s),a+=e*e),u===0&&(u=B(s),a+=u*u),a<l&&(a=Math.sqrt(l*a)));do f.data!==o&&(h=c[f.data.index]*p/a,o.vx+=e*h,o.vy+=u*h);while(f=f.next)}return i.initialize=function(f,x){n=f,s=x,m()},i.strength=function(f){return arguments.length?(y=typeof f=="function"?f:T(+f),m(),i):y},i.distanceMin=function(f){return arguments.length?(l=f*f,i):Math.sqrt(l)},i.distanceMax=function(f){return arguments.length?(g=f*f,i):Math.sqrt(g)},i.theta=function(f){return arguments.length?(M=f*f,i):Math.sqrt(M)},i}export{_ as a,Z as c,k as l,nn as m,q as s};
