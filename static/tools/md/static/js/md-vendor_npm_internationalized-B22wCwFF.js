let g=new Map,y=!1;try{y=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let c=!1;try{c=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const x={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class O{format(t){let e="";if(!y&&this.options.signDisplay!=null?e=W(this.numberFormatter,this.options.signDisplay,t):e=this.numberFormatter.format(t),this.options.style==="unit"&&!c){var i;let{unit:r,unitDisplay:n="short",locale:o}=this.resolvedOptions();if(!r)return e;let l=(i=x[r])===null||i===void 0?void 0:i[n];e+=l[o]||l.default}return e}formatToParts(t){return this.numberFormatter.formatToParts(t)}formatRange(t,e){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(t,e);if(e<t)throw new RangeError("End date must be >= start date");return`${this.format(t)} – ${this.format(e)}`}formatRangeToParts(t,e){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(t,e);if(e<t)throw new RangeError("End date must be >= start date");let i=this.numberFormatter.formatToParts(t),r=this.numberFormatter.formatToParts(e);return[...i.map(n=>({...n,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...r.map(n=>({...n,source:"endRange"}))]}resolvedOptions(){let t=this.numberFormatter.resolvedOptions();return!y&&this.options.signDisplay!=null&&(t={...t,signDisplay:this.options.signDisplay}),!c&&this.options.style==="unit"&&(t={...t,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),t}constructor(t,e={}){this.numberFormatter=V(t,e),this.options=e}}function V(s,t={}){let{numberingSystem:e}=t;if(e&&s.includes("-nu-")&&(s.includes("-u-")||(s+="-u-"),s+=`-nu-${e}`),t.style==="unit"&&!c){var i;let{unit:o,unitDisplay:l="short"}=t;if(!o)throw new Error('unit option must be provided with style: "unit"');if(!(!((i=x[o])===null||i===void 0)&&i[l]))throw new Error(`Unsupported unit ${o} with unitDisplay = ${l}`);t={...t,style:"decimal"}}let r=s+(t?Object.entries(t).sort((o,l)=>o[0]<l[0]?-1:1).join():"");if(g.has(r))return g.get(r);let n=new Intl.NumberFormat(s,t);return g.set(r,n),n}function W(s,t,e){if(t==="auto")return s.format(e);if(t==="never")return s.format(Math.abs(e));{let i=!1;if(t==="always"?i=e>0||Object.is(e,0):t==="exceptZero"&&(Object.is(e,-0)||Object.is(e,0)?e=Math.abs(e):i=e>0),i){let r=s.format(-e),n=s.format(e),o=r.replace(n,"").replace(/\u200e|\u061C/,"");return[...o].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),r.replace(n,"!!!").replace(o,"+").replace("!!!",n)}else return s.format(e)}}const z=new RegExp("^.*\\(.*\\).*$"),G=["latn","arab","hanidec","deva","beng","fullwide"];class L{parse(t){return b(this.locale,this.options,t).parse(t)}isValidPartialNumber(t,e,i){return b(this.locale,this.options,t).isValidPartialNumber(t,e,i)}getNumberingSystem(t){return b(this.locale,this.options,t).options.numberingSystem}constructor(t,e={}){this.locale=t,this.options=e}}const P=new Map;function b(s,t,e){let i=w(s,t);if(!s.includes("-nu-")&&!i.isValidPartialNumber(e)){for(let r of G)if(r!==i.options.numberingSystem){let n=w(s+(s.includes("-u-")?"-nu-":"-u-nu-")+r,t);if(n.isValidPartialNumber(e))return n}}return i}function w(s,t){let e=s+(t?Object.entries(t).sort((r,n)=>r[0]<n[0]?-1:1).join():""),i=P.get(e);return i||(i=new Z(s,t),P.set(e,i)),i}class Z{parse(t){let e=this.sanitize(t);if(this.symbols.group&&(e=u(e,this.symbols.group,"")),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(e=e.replace(this.symbols.minusSign,"-")),e=e.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let o=e.indexOf("-");e=e.replace("-",""),e=e.replace("+","");let l=e.indexOf(".");l===-1&&(l=e.length),e=e.replace(".",""),l-2===0?e=`0.${e}`:l-2===-1?e=`0.0${e}`:l-2===-2?e="0.00":e=`${e.slice(0,l-2)}.${e.slice(l-2)}`,o>-1&&(e=`-${e}`)}let i=e?+e:NaN;if(isNaN(i))return NaN;if(this.options.style==="percent"){var r,n;let o={...this.options,style:"decimal",minimumFractionDigits:Math.min(((r=this.options.minimumFractionDigits)!==null&&r!==void 0?r:0)+2,20),maximumFractionDigits:Math.min(((n=this.options.maximumFractionDigits)!==null&&n!==void 0?n:0)+2,20)};return new L(this.locale,o).parse(new O(this.locale,o).format(i))}return this.options.currencySign==="accounting"&&z.test(t)&&(i=-1*i),i}sanitize(t){return t=t.replace(this.symbols.literals,""),this.symbols.minusSign&&(t=t.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(t=t.replace(",",this.symbols.decimal),t=t.replace("،",this.symbols.decimal)),this.symbols.group&&(t=u(t,".",this.symbols.group))),this.symbols.group==="’"&&t.includes("'")&&(t=u(t,"'",this.symbols.group)),this.options.locale==="fr-FR"&&this.symbols.group&&(t=u(t," ",this.symbols.group),t=u(t,/\u00A0/g,this.symbols.group)),t}isValidPartialNumber(t,e=-1/0,i=1/0){return t=this.sanitize(t),this.symbols.minusSign&&t.startsWith(this.symbols.minusSign)&&e<0?t=t.slice(this.symbols.minusSign.length):this.symbols.plusSign&&t.startsWith(this.symbols.plusSign)&&i>0&&(t=t.slice(this.symbols.plusSign.length)),this.symbols.group&&t.startsWith(this.symbols.group)||this.symbols.decimal&&t.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(t=u(t,this.symbols.group,"")),t=t.replace(this.symbols.numeral,""),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,"")),t.length===0)}constructor(t,e={}){this.locale=t,e.roundingIncrement!==1&&e.roundingIncrement!=null&&(e.maximumFractionDigits==null&&e.minimumFractionDigits==null?(e.maximumFractionDigits=0,e.minimumFractionDigits=0):e.maximumFractionDigits==null?e.maximumFractionDigits=e.minimumFractionDigits:e.minimumFractionDigits==null&&(e.minimumFractionDigits=e.maximumFractionDigits)),this.formatter=new Intl.NumberFormat(t,e),this.options=this.formatter.resolvedOptions(),this.symbols=U(t,this.formatter,this.options,e);var i,r;this.options.style==="percent"&&(((i=this.options.minimumFractionDigits)!==null&&i!==void 0?i:0)>18||((r=this.options.maximumFractionDigits)!==null&&r!==void 0?r:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const D=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),K=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function U(s,t,e,i){var r,n,o,l;let f=new Intl.NumberFormat(s,{...e,minimumSignificantDigits:1,maximumSignificantDigits:21,roundingIncrement:1,roundingPriority:"auto",roundingMode:"halfExpand"}),d=f.formatToParts(-10000.111),v=f.formatToParts(10000.111),N=K.map(a=>f.formatToParts(a));var p;let E=(p=(r=d.find(a=>a.type==="minusSign"))===null||r===void 0?void 0:r.value)!==null&&p!==void 0?p:"-",h=(n=v.find(a=>a.type==="plusSign"))===null||n===void 0?void 0:n.value;!h&&(i?.signDisplay==="exceptZero"||i?.signDisplay==="always")&&(h="+");let R=(o=new Intl.NumberFormat(s,{...e,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(a=>a.type==="decimal"))===null||o===void 0?void 0:o.value,I=(l=d.find(a=>a.type==="group"))===null||l===void 0?void 0:l.value,j=d.filter(a=>!D.has(a.type)).map(a=>F(a.value)),M=N.flatMap(a=>a.filter(m=>!D.has(m.type)).map(m=>F(m.value))),$=[...new Set([...j,...M])].sort((a,m)=>m.length-a.length),T=$.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${$.join("|")}|[\\p{White_Space}]`,"gu"),S=[...new Intl.NumberFormat(e.locale,{useGrouping:!1}).format(9876543210)].reverse(),C=new Map(S.map((a,m)=>[a,m])),A=new RegExp(`[${S.join("")}]`,"g");return{minusSign:E,plusSign:h,decimal:R,group:I,literals:T,numeral:A,index:a=>String(C.get(a))}}function u(s,t,e){return s.replaceAll?s.replaceAll(t,e):s.split(t).join(e)}function F(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}export{O as $,L as a};
