import{l as pn,K as Sn,W as _n,t as be,c as F,f as Me,A as M,I as jn,i as we,w as Ve,Q as m,R as Hn,r as le,p as Kn,n as se,P as Gn,J as Yn,d as Jn,T as Ne,ac as Je}from"./md-vendor_npm_vue-CxEGiCke.js";function W(e){return typeof e=="function"}function An(e){return e==null}const pe=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function en(e){return Number(e)>=0}function Qn(e){const n=parseFloat(e);return isNaN(n)?e:n}function Xn(e){return typeof e=="object"&&e!==null}function Zn(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function dn(e){if(!Xn(e)||Zn(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let n=e;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function Ee(e,n){return Object.keys(n).forEach(t=>{if(dn(n[t])&&dn(e[t])){e[t]||(e[t]={}),Ee(e[t],n[t]);return}e[t]=n[t]}),e}function Ae(e){const n=e.split(".");if(!n.length)return"";let t=String(n[0]);for(let i=1;i<n.length;i++){if(en(n[i])){t+=`[${n[i]}]`;continue}t+=`.${n[i]}`}return t}const xn={};function et(e){return xn[e]}function cn(e,n,t){typeof t.value=="object"&&(t.value=E(t.value)),!t.enumerable||t.get||t.set||!t.configurable||!t.writable||n==="__proto__"?Object.defineProperty(e,n,t):e[n]=t.value}function E(e){if(typeof e!="object")return e;var n=0,t,i,l,u=Object.prototype.toString.call(e);if(u==="[object Object]"?l=Object.create(e.__proto__||null):u==="[object Array]"?l=Array(e.length):u==="[object Set]"?(l=new Set,e.forEach(function(c){l.add(E(c))})):u==="[object Map]"?(l=new Map,e.forEach(function(c,d){l.set(E(d),E(c))})):u==="[object Date]"?l=new Date(+e):u==="[object RegExp]"?l=new RegExp(e.source,e.flags):u==="[object DataView]"?l=new e.constructor(E(e.buffer)):u==="[object ArrayBuffer]"?l=e.slice(0):u.slice(-6)==="Array]"&&(l=new e.constructor(e)),l){for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)cn(l,i[n],Object.getOwnPropertyDescriptor(e,i[n]));for(n=0,i=Object.getOwnPropertyNames(e);n<i.length;n++)Object.hasOwnProperty.call(l,t=i[n])&&l[t]===e[t]||cn(l,t,Object.getOwnPropertyDescriptor(e,t))}return l||e}const nn=Symbol("vee-validate-form"),nt=Symbol("vee-validate-form-context"),tt=Symbol("vee-validate-field-instance"),Be=Symbol("Default empty value"),rt=typeof window<"u";function Qe(e){return W(e)&&!!e.__locatorRef}function ue(e){return!!e&&W(e.parse)&&e.__type==="VVTypedSchema"}function ke(e){return!!e&&W(e.validate)}function Fe(e){return e==="checkbox"||e==="radio"}function it(e){return pe(e)||Array.isArray(e)}function at(e){return Array.isArray(e)?e.length===0:pe(e)&&Object.keys(e).length===0}function Re(e){return/^\[.+\]$/i.test(e)}function lt(e){return En(e)&&e.multiple}function En(e){return e.tagName==="SELECT"}function ut(e,n){const t=![!1,null,void 0,0].includes(n.multiple)&&!Number.isNaN(n.multiple);return e==="select"&&"multiple"in n&&t}function ot(e,n){return!ut(e,n)&&n.type!=="file"&&!Fe(n.type)}function Fn(e){return tn(e)&&e.target&&"submit"in e.target}function tn(e){return e?!!(typeof Event<"u"&&W(Event)&&e instanceof Event||e&&e.srcElement):!1}function fn(e,n){return n in e&&e[n]!==Be}function Y(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var t,i,l;if(Array.isArray(e)){if(t=e.length,t!=n.length)return!1;for(i=t;i--!==0;)if(!Y(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!Y(i[1],n.get(i[0])))return!1;return!0}if(hn(e)&&hn(n))return!(e.size!==n.size||e.name!==n.name||e.lastModified!==n.lastModified||e.type!==n.type);if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(t=e.length,t!=n.length)return!1;for(i=t;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(e=vn(e),n=vn(n),l=Object.keys(e),t=l.length,t!==Object.keys(n).length)return!1;for(i=t;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,l[i]))return!1;for(i=t;i--!==0;){var u=l[i];if(!Y(e[u],n[u]))return!1}return!0}return e!==e&&n!==n}function vn(e){return Object.fromEntries(Object.entries(e).filter(([,n])=>n!==void 0))}function hn(e){return rt?e instanceof File:!1}function rn(e){return Re(e)?e.replace(/\[|\]/gi,""):e}function Q(e,n,t){return e?Re(n)?e[rn(n)]:(n||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((l,u)=>it(l)&&u in l?l[u]:t,e):t}function he(e,n,t){if(Re(n)){e[rn(n)]=t;return}const i=n.split(/\.|\[(\d+)\]/).filter(Boolean);let l=e;for(let u=0;u<i.length;u++){if(u===i.length-1){l[i[u]]=t;return}(!(i[u]in l)||An(l[i[u]]))&&(l[i[u]]=en(i[u+1])?[]:{}),l=l[i[u]]}}function Ge(e,n){if(Array.isArray(e)&&en(n)){e.splice(Number(n),1);return}pe(e)&&delete e[n]}function mn(e,n){if(Re(n)){delete e[rn(n)];return}const t=n.split(/\.|\[(\d+)\]/).filter(Boolean);let i=e;for(let u=0;u<t.length;u++){if(u===t.length-1){Ge(i,t[u]);break}if(!(t[u]in i)||An(i[t[u]]))break;i=i[t[u]]}const l=t.map((u,c)=>Q(e,t.slice(0,c).join(".")));for(let u=l.length-1;u>=0;u--)if(at(l[u])){if(u===0){Ge(e,t[0]);continue}Ge(l[u-1],t[u-1])}}function ne(e){return Object.keys(e)}function In(e,n=void 0){const t=Ne();return t?.provides[e]||Jn(e,n)}function yn(e,n,t){if(Array.isArray(e)){const i=[...e],l=i.findIndex(u=>Y(u,n));return l>=0?i.splice(l,1):i.push(n),i}return Y(e,n)?t:n}function gn(e,n=0){let t=null,i=[];return function(...l){return t&&clearTimeout(t),t=setTimeout(()=>{const u=e(...l);i.forEach(c=>c(u)),i=[]},n),new Promise(u=>i.push(u))}}function st(e,n){return pe(n)&&n.number?Qn(e):e}function Xe(e,n){let t;return async function(...l){const u=e(...l);t=u;const c=await u;return u!==t?c:(t=void 0,n(c,l))}}function Ze(e){return Array.isArray(e)?e:e?[e]:[]}function Ce(e,n){const t={};for(const i in e)n.includes(i)||(t[i]=e[i]);return t}function dt(e){let n=null,t=[];return function(...i){const l=se(()=>{if(n!==l)return;const u=e(...i);t.forEach(c=>c(u)),t=[],n=null});return n=l,new Promise(u=>t.push(u))}}function Cn(e,n,t){return n.slots.default?typeof e=="string"||!e?n.slots.default(t()):{default:()=>{var i,l;return(l=(i=n.slots).default)===null||l===void 0?void 0:l.call(i,t())}}:n.slots.default}function Ye(e){if(Pn(e))return e._value}function Pn(e){return"_value"in e}function ct(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function Te(e){if(!tn(e))return e;const n=e.target;if(Fe(n.type)&&Pn(n))return Ye(n);if(n.type==="file"&&n.files){const t=Array.from(n.files);return n.multiple?t:t[0]}if(lt(n))return Array.from(n.options).filter(t=>t.selected&&!t.disabled).map(Ye);if(En(n)){const t=Array.from(n.options).find(i=>i.selected);return t?Ye(t):n.value}return ct(n)}function Mn(e){const n={};return Object.defineProperty(n,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?pe(e)&&e._$$isNormalized?e:pe(e)?Object.keys(e).reduce((t,i)=>{const l=ft(e[i]);return e[i]!==!1&&(t[i]=bn(l)),t},n):typeof e!="string"?n:e.split("|").reduce((t,i)=>{const l=vt(i);return l.name&&(t[l.name]=bn(l.params)),t},n):n}function ft(e){return e===!0?[]:Array.isArray(e)||pe(e)?e:[e]}function bn(e){const n=t=>typeof t=="string"&&t[0]==="@"?ht(t.slice(1)):t;return Array.isArray(e)?e.map(n):e instanceof RegExp?[e]:Object.keys(e).reduce((t,i)=>(t[i]=n(e[i]),t),{})}const vt=e=>{let n=[];const t=e.split(":")[0];return e.includes(":")&&(n=e.split(":").slice(1).join(":").split(",")),{name:t,params:n}};function ht(e){const n=t=>{var i;return(i=Q(t,e))!==null&&i!==void 0?i:t[e]};return n.__locatorRef=e,n}function mt(e){return Array.isArray(e)?e.filter(Qe):ne(e).filter(n=>Qe(e[n])).map(n=>e[n])}const yt={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let gt=Object.assign({},yt);const Oe=()=>gt;async function wn(e,n,t={}){const i=t?.bails,l={name:t?.name||"{field}",rules:n,label:t?.label,bails:i??!0,formData:t?.values||{}},u=await bt(l,e);return Object.assign(Object.assign({},u),{valid:!u.errors.length})}async function bt(e,n){const t=e.rules;if(ue(t)||ke(t))return Vt(n,Object.assign(Object.assign({},e),{rules:t}));if(W(t)||Array.isArray(t)){const d={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:n},v=Array.isArray(t)?t:[t],s=v.length,y=[];for(let V=0;V<s;V++){const A=v[V],O=await A(n,d);if(!(typeof O!="string"&&!Array.isArray(O)&&O)){if(Array.isArray(O))y.push(...O);else{const $=typeof O=="string"?O:kn(d);y.push($)}if(e.bails)return{errors:y}}}return{errors:y}}const i=Object.assign(Object.assign({},e),{rules:Mn(t)}),l=[],u=Object.keys(i.rules),c=u.length;for(let d=0;d<c;d++){const v=u[d],s=await pt(i,n,{name:v,params:i.rules[v]});if(s.error&&(l.push(s.error),e.bails))return{errors:l}}return{errors:l}}function Ot(e){return!!e&&e.name==="ValidationError"}function Bn(e){return{__type:"VVTypedSchema",async parse(t,i){var l;try{return{output:await e.validate(t,{abortEarly:!1,context:i?.formData||{}}),errors:[]}}catch(u){if(!Ot(u))throw u;if(!(!((l=u.inner)===null||l===void 0)&&l.length)&&u.errors.length)return{errors:[{path:u.path,errors:u.errors}]};const c=u.inner.reduce((d,v)=>{const s=v.path||"";return d[s]||(d[s]={errors:[],path:s}),d[s].errors.push(...v.errors),d},{});return{errors:Object.values(c)}}}}}async function Vt(e,n){const i=await(ue(n.rules)?n.rules:Bn(n.rules)).parse(e,{formData:n.formData}),l=[];for(const u of i.errors)u.errors.length&&l.push(...u.errors);return{value:i.value,errors:l}}async function pt(e,n,t){const i=et(t.name);if(!i)throw new Error(`No such validator '${t.name}' exists.`);const l=St(t.params,e.formData),u={field:e.label||e.name,name:e.name,label:e.label,value:n,form:e.formData,rule:Object.assign(Object.assign({},t),{params:l})},c=await i(n,l,u);return typeof c=="string"?{error:c}:{error:c?void 0:kn(u)}}function kn(e){const n=Oe().generateMessage;return n?n(e):"Field is invalid"}function St(e,n){const t=i=>Qe(i)?i(n):i;return Array.isArray(e)?e.map(t):Object.keys(e).reduce((i,l)=>(i[l]=t(e[l]),i),{})}async function _t(e,n){const i=await(ue(e)?e:Bn(e)).parse(E(n),{formData:E(n)}),l={},u={};for(const c of i.errors){const d=c.errors,v=(c.path||"").replace(/\["(\d+)"\]/g,(s,y)=>`[${y}]`);l[v]={valid:!d.length,errors:d},d.length&&(u[v]=d[0])}return{valid:!i.errors.length,results:l,errors:u,values:i.value,source:"schema"}}async function jt(e,n,t){const l=ne(e).map(async s=>{var y,V,A;const O=(y=t?.names)===null||y===void 0?void 0:y[s],I=await wn(Q(n,s),e[s],{name:O?.name||s,label:O?.label,values:n,bails:(A=(V=t?.bailsMap)===null||V===void 0?void 0:V[s])!==null&&A!==void 0?A:!0});return Object.assign(Object.assign({},I),{path:s})});let u=!0;const c=await Promise.all(l),d={},v={};for(const s of c)d[s.path]={valid:s.valid,errors:s.errors},s.valid||(u=!1,v[s.path]=s.errors[0]);return{valid:u,results:d,errors:v,source:"schema"}}let On=0;function At(e,n){const{value:t,initialValue:i,setInitialValue:l}=Et(e,n.modelValue,n.form);if(!n.form){let v=function(O){var I;"value"in O&&(t.value=O.value),"errors"in O&&y(O.errors),"touched"in O&&(A.touched=(I=O.touched)!==null&&I!==void 0?I:A.touched),"initialValue"in O&&l(O.initialValue)};const{errors:s,setErrors:y}=Ct(),V=On>=Number.MAX_SAFE_INTEGER?0:++On,A=It(t,i,s,n.schema);return{id:V,path:e,value:t,initialValue:i,meta:A,flags:{pendingUnmount:{[V]:!1},pendingReset:!1},errors:s,setState:v}}const u=n.form.createPathState(e,{bails:n.bails,label:n.label,type:n.type,validate:n.validate,schema:n.schema}),c=F(()=>u.errors);function d(v){var s,y,V;"value"in v&&(t.value=v.value),"errors"in v&&((s=n.form)===null||s===void 0||s.setFieldError(M(e),v.errors)),"touched"in v&&((y=n.form)===null||y===void 0||y.setFieldTouched(M(e),(V=v.touched)!==null&&V!==void 0?V:!1)),"initialValue"in v&&l(v.initialValue)}return{id:Array.isArray(u.id)?u.id[u.id.length-1]:u.id,path:e,value:t,errors:c,meta:u,initialValue:i,flags:u.__flags,setState:d}}function Et(e,n,t){const i=le(M(n));function l(){return t?Q(t.initialValues.value,M(e),M(i)):M(i)}function u(s){if(!t){i.value=s;return}t.setFieldInitialValue(M(e),s,!0)}const c=F(l);if(!t)return{value:le(l()),initialValue:c,setInitialValue:u};const d=Ft(n,t,c,e);return t.stageInitialValue(M(e),d,!0),{value:F({get(){return Q(t.values,M(e))},set(s){t.setFieldValue(M(e),s,!1)}}),initialValue:c,setInitialValue:u}}function Ft(e,n,t,i){return we(e)?M(e):e!==void 0?e:Q(n.values,M(i),M(t))}function It(e,n,t,i){const l=F(()=>{var c,d,v;return(v=(d=(c=m(i))===null||c===void 0?void 0:c.describe)===null||d===void 0?void 0:d.call(c).required)!==null&&v!==void 0?v:!1}),u=Me({touched:!1,pending:!1,valid:!0,required:l,validated:!!M(t).length,initialValue:F(()=>M(n)),dirty:F(()=>!Y(M(e),M(n)))});return Ve(t,c=>{u.valid=!c.length},{immediate:!0,flush:"sync"}),u}function Ct(){const e=le([]);return{errors:e,setErrors:n=>{e.value=Ze(n)}}}function Pt(e,n,t){return Fe(t?.type)?wt(e,n,t):Tn(e,n,t)}function Tn(e,n,t){const{initialValue:i,validateOnMount:l,bails:u,type:c,checkedValue:d,label:v,validateOnValueUpdate:s,uncheckedValue:y,controlled:V,keepValueOnUnmount:A,syncVModel:O,form:I}=Mt(t),$=V?In(nn):void 0,p=I||$,D=F(()=>Ae(m(e))),R=F(()=>{if(m(p?.schema))return;const j=M(n);return ke(j)||ue(j)||W(j)||Array.isArray(j)?j:Mn(j)}),de=!W(R.value)&&ue(m(n)),{id:K,value:X,initialValue:Z,meta:k,setState:ie,errors:U,flags:z}=At(D,{modelValue:i,form:p,bails:u,label:v,type:c,validate:R.value?T:void 0,schema:de?n:void 0}),L=F(()=>U.value[0]);O&&Bt({value:X,prop:O,handleChange:_,shouldValidate:()=>s&&!z.pendingReset});const ae=(h,j=!1)=>{k.touched=!0,j&&x()};async function ce(h){var j,P;if(p?.validateSchema){const{results:C}=await p.validateSchema(h);return(j=C[m(D)])!==null&&j!==void 0?j:{valid:!0,errors:[]}}return R.value?wn(X.value,R.value,{name:m(D),label:m(v),values:(P=p?.values)!==null&&P!==void 0?P:{},bails:u}):{valid:!0,errors:[]}}const x=Xe(async()=>(k.pending=!0,k.validated=!0,ce("validated-only")),h=>(z.pendingUnmount[G.id]||(ie({errors:h.errors}),k.pending=!1,k.valid=h.valid),h)),ee=Xe(async()=>ce("silent"),h=>(k.valid=h.valid,h));function T(h){return h?.mode==="silent"?ee():x()}function _(h,j=!0){const P=Te(h);_e(P,j)}jn(()=>{if(l)return x();(!p||!p.validateSchema)&&ee()});function me(h){k.touched=h}function fe(h){var j;const P=h&&"value"in h?h.value:Z.value;ie({value:E(P),initialValue:E(P),touched:(j=h?.touched)!==null&&j!==void 0?j:!1,errors:h?.errors||[]}),k.pending=!1,k.validated=!1,ee()}const ye=Ne();function _e(h,j=!0){X.value=ye&&O?st(h,ye.props.modelModifiers):h,(j?x:ee)()}function Ie(h){ie({errors:Array.isArray(h)?h:[h]})}const an=F({get(){return X.value},set(h){_e(h,s)}}),G={id:K,name:D,label:v,value:an,meta:k,errors:U,errorMessage:L,type:c,checkedValue:d,uncheckedValue:y,bails:u,keepValueOnUnmount:A,resetField:fe,handleReset:()=>fe(),validate:T,handleChange:_,handleBlur:ae,setState:ie,setTouched:me,setErrors:Ie,setValue:_e};if(Je(tt,G),we(n)&&typeof M(n)!="function"&&Ve(n,(h,j)=>{Y(h,j)||(k.validated?x():ee())},{deep:!0}),!p)return G;const Ue=F(()=>{const h=R.value;return!h||W(h)||ke(h)||ue(h)||Array.isArray(h)?{}:Object.keys(h).reduce((j,P)=>{const C=mt(h[P]).map(ve=>ve.__locatorRef).reduce((ve,oe)=>{const te=Q(p.values,oe)||p.values[oe];return te!==void 0&&(ve[oe]=te),ve},{});return Object.assign(j,C),j},{})});return Ve(Ue,(h,j)=>{if(!Object.keys(h).length)return;!Y(h,j)&&(k.validated?x():ee())}),Yn(()=>{var h;const j=(h=m(G.keepValueOnUnmount))!==null&&h!==void 0?h:m(p.keepValuesOnUnmount),P=m(D);if(j||!p||z.pendingUnmount[G.id]){p?.removePathState(P,K);return}z.pendingUnmount[G.id]=!0;const C=p.getPathState(P);if(Array.isArray(C?.id)&&C?.multiple?C?.id.includes(G.id):C?.id===G.id){if(C?.multiple&&Array.isArray(C.value)){const oe=C.value.findIndex(te=>Y(te,m(G.checkedValue)));if(oe>-1){const te=[...C.value];te.splice(oe,1),p.setFieldValue(P,te)}Array.isArray(C.id)&&C.id.splice(C.id.indexOf(G.id),1)}else p.unsetPathValue(m(D));p.removePathState(P,K)}}),G}function Mt(e){const n=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),t=!!e?.syncVModel,i=typeof e?.syncVModel=="string"?e.syncVModel:e?.modelPropName||"modelValue",l=t&&!("initialValue"in(e||{}))?xe(Ne(),i):e?.initialValue;if(!e)return Object.assign(Object.assign({},n()),{initialValue:l});const u="valueProp"in e?e.valueProp:e.checkedValue,c="standalone"in e?!e.standalone:e.controlled,d=e?.modelPropName||e?.syncVModel||!1;return Object.assign(Object.assign(Object.assign({},n()),e||{}),{initialValue:l,controlled:c??!0,checkedValue:u,syncVModel:d})}function wt(e,n,t){const i=t?.standalone?void 0:In(nn),l=t?.checkedValue,u=t?.uncheckedValue;function c(d){const v=d.handleChange,s=F(()=>{const V=m(d.value),A=m(l);return Array.isArray(V)?V.findIndex(O=>Y(O,A))>=0:Y(A,V)});function y(V,A=!0){var O,I;if(s.value===((O=V?.target)===null||O===void 0?void 0:O.checked)){A&&d.validate();return}const $=m(e),p=i?.getPathState($),D=Te(V);let R=(I=m(l))!==null&&I!==void 0?I:D;i&&p?.multiple&&p.type==="checkbox"?R=yn(Q(i.values,$)||[],R,void 0):t?.type==="checkbox"&&(R=yn(m(d.value),R,m(u))),v(R,A)}return Object.assign(Object.assign({},d),{checked:s,checkedValue:l,uncheckedValue:u,handleChange:y})}return c(Tn(e,n,t))}function Bt({prop:e,value:n,handleChange:t,shouldValidate:i}){const l=Ne();if(!l||!e)return;const u=typeof e=="string"?e:"modelValue",c=`update:${u}`;u in l.props&&(Ve(n,d=>{Y(d,xe(l,u))||l.emit(c,d)}),Ve(()=>xe(l,u),d=>{if(d===Be&&n.value===void 0)return;const v=d===Be?void 0:d;Y(v,n.value)||t(v,i())}))}function xe(e,n){if(e)return e.props[n]}const kt=pn({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>Oe().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:Be},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(e,n){const t=be(e,"rules"),i=be(e,"name"),l=be(e,"label"),u=be(e,"uncheckedValue"),c=be(e,"keepValue"),{errors:d,value:v,errorMessage:s,validate:y,handleChange:V,handleBlur:A,setTouched:O,resetField:I,handleReset:$,meta:p,checked:D,setErrors:R,setValue:de}=Pt(i,t,{validateOnMount:e.validateOnMount,bails:e.bails,standalone:e.standalone,type:n.attrs.type,initialValue:Nt(e,n),checkedValue:n.attrs.value,uncheckedValue:u,label:l,validateOnValueUpdate:e.validateOnModelUpdate,keepValueOnUnmount:c,syncVModel:!0}),K=function(z,L=!0){V(z,L)},X=F(()=>{const{validateOnInput:U,validateOnChange:z,validateOnBlur:L,validateOnModelUpdate:ae}=Tt(e);function ce(_){A(_,L),W(n.attrs.onBlur)&&n.attrs.onBlur(_)}function x(_){K(_,U),W(n.attrs.onInput)&&n.attrs.onInput(_)}function ee(_){K(_,z),W(n.attrs.onChange)&&n.attrs.onChange(_)}const T={name:e.name,onBlur:ce,onInput:x,onChange:ee};return T["onUpdate:modelValue"]=_=>K(_,ae),T}),Z=F(()=>{const U=Object.assign({},X.value);Fe(n.attrs.type)&&D&&(U.checked=D.value);const z=Vn(e,n);return ot(z,n.attrs)&&(U.value=v.value),U}),k=F(()=>Object.assign(Object.assign({},X.value),{modelValue:v.value}));function ie(){return{field:Z.value,componentField:k.value,value:v.value,meta:p,errors:d.value,errorMessage:s.value,validate:y,resetField:I,handleChange:K,handleInput:U=>K(U,!1),handleReset:$,handleBlur:X.value.onBlur,setTouched:O,setErrors:R,setValue:de}}return n.expose({value:v,meta:p,errors:d,errorMessage:s,setErrors:R,setTouched:O,setValue:de,reset:I,validate:y,handleChange:V}),()=>{const U=Sn(Vn(e,n)),z=Cn(U,n,ie);return U?_n(U,Object.assign(Object.assign({},n.attrs),Z.value),z):z}}});function Vn(e,n){let t=e.as||"";return!e.as&&!n.slots.default&&(t="input"),t}function Tt(e){var n,t,i,l;const{validateOnInput:u,validateOnChange:c,validateOnBlur:d,validateOnModelUpdate:v}=Oe();return{validateOnInput:(n=e.validateOnInput)!==null&&n!==void 0?n:u,validateOnChange:(t=e.validateOnChange)!==null&&t!==void 0?t:c,validateOnBlur:(i=e.validateOnBlur)!==null&&i!==void 0?i:d,validateOnModelUpdate:(l=e.validateOnModelUpdate)!==null&&l!==void 0?l:v}}function Nt(e,n){return Fe(n.attrs.type)?fn(e,"modelValue")?e.modelValue:void 0:fn(e,"modelValue")?e.modelValue:n.attrs.value}const qt=kt;let Rt=0;const Pe=["bails","fieldsCount","id","multiple","type","validate"];function Nn(e){const n=e?.initialValues||{},t=Object.assign({},m(n)),i=M(e?.validationSchema);return i&&ue(i)&&W(i.cast)?E(i.cast(t)||{}):E(t)}function Ut(e){var n;const t=Rt++,i=e?.name||"Form";let l=0;const u=le(!1),c=le(!1),d=le(0),v=[],s=Me(Nn(e)),y=le([]),V=le({}),A=le({}),O=dt(()=>{A.value=y.value.reduce((a,r)=>(a[Ae(m(r.path))]=r,a),{})});function I(a,r){const o=_(a);if(!o){typeof a=="string"&&(V.value[Ae(a)]=Ze(r));return}if(typeof a=="string"){const f=Ae(a);V.value[f]&&delete V.value[f]}o.errors=Ze(r),o.valid=!o.errors.length}function $(a){ne(a).forEach(r=>{I(r,a[r])})}e?.initialErrors&&$(e.initialErrors);const p=F(()=>{const a=y.value.reduce((r,o)=>(o.errors.length&&(r[m(o.path)]=o.errors),r),{});return Object.assign(Object.assign({},V.value),a)}),D=F(()=>ne(p.value).reduce((a,r)=>{const o=p.value[r];return o?.length&&(a[r]=o[0]),a},{})),R=F(()=>y.value.reduce((a,r)=>(a[m(r.path)]={name:m(r.path)||"",label:r.label||""},a),{})),de=F(()=>y.value.reduce((a,r)=>{var o;return a[m(r.path)]=(o=r.bails)!==null&&o!==void 0?o:!0,a},{})),K=Object.assign({},e?.initialErrors||{}),X=(n=e?.keepValuesOnUnmount)!==null&&n!==void 0?n:!1,{initialValues:Z,originalInitialValues:k,setInitialValues:ie}=zt(y,s,e),U=Dt(y,s,k,D),z=F(()=>y.value.reduce((a,r)=>{const o=Q(s,m(r.path));return he(a,m(r.path),o),a},{})),L=e?.validationSchema;function ae(a,r){var o,f;const b=F(()=>Q(Z.value,m(a))),S=A.value[m(a)],g=r?.type==="checkbox"||r?.type==="radio";if(S&&g){S.multiple=!0;const re=l++;return Array.isArray(S.id)?S.id.push(re):S.id=[S.id,re],S.fieldsCount++,S.__flags.pendingUnmount[re]=!1,S}const B=F(()=>Q(s,m(a))),N=m(a),q=fe.findIndex(re=>re===N);q!==-1&&fe.splice(q,1);const w=F(()=>{var re,je,We,qe;const He=m(L);if(ue(He))return(je=(re=He.describe)===null||re===void 0?void 0:re.call(He,m(a)).required)!==null&&je!==void 0?je:!1;const Ke=m(r?.schema);return ue(Ke)&&(qe=(We=Ke.describe)===null||We===void 0?void 0:We.call(Ke).required)!==null&&qe!==void 0?qe:!1}),H=l++,J=Me({id:H,path:a,touched:!1,pending:!1,valid:!0,validated:!!(!((o=K[N])===null||o===void 0)&&o.length),required:w,initialValue:b,errors:Gn([]),bails:(f=r?.bails)!==null&&f!==void 0?f:!1,label:r?.label,type:r?.type||"default",value:B,multiple:!1,__flags:{pendingUnmount:{[H]:!1},pendingReset:!1},fieldsCount:1,validate:r?.validate,dirty:F(()=>!Y(M(B),M(b)))});return y.value.push(J),A.value[N]=J,O(),D.value[N]&&!K[N]&&se(()=>{ge(N,{mode:"silent"})}),we(a)&&Ve(a,re=>{O();const je=E(B.value);A.value[re]=J,se(()=>{he(s,re,je)})}),J}const ce=gn(on,5),x=gn(on,5),ee=Xe(async a=>await(a==="silent"?ce():x()),(a,[r])=>{const o=ne(j.errorBag.value),b=[...new Set([...ne(a.results),...y.value.map(S=>S.path),...o])].sort().reduce((S,g)=>{var B;const N=g,q=_(N)||me(N),w=((B=a.results[N])===null||B===void 0?void 0:B.errors)||[],H=m(q?.path)||N,J=Lt({errors:w,valid:!w.length},S.results[H]);return S.results[H]=J,J.valid||(S.errors[H]=J.errors[0]),q&&V.value[H]&&delete V.value[H],q?(q.valid=J.valid,r==="silent"||r==="validated-only"&&!q.validated||I(q,J.errors),S):(I(H,w),S)},{valid:a.valid,results:{},errors:{},source:a.source});return a.values&&(b.values=a.values,b.source=a.source),ne(b.results).forEach(S=>{var g;const B=_(S);B&&r!=="silent"&&(r==="validated-only"&&!B.validated||I(B,(g=b.results[S])===null||g===void 0?void 0:g.errors))}),b});function T(a){y.value.forEach(a)}function _(a){const r=typeof a=="string"?Ae(a):a;return typeof r=="string"?A.value[r]:r}function me(a){return y.value.filter(o=>a.startsWith(m(o.path))).reduce((o,f)=>o?f.path.length>o.path.length?f:o:f,void 0)}let fe=[],ye;function _e(a){return fe.push(a),ye||(ye=se(()=>{[...fe].sort().reverse().forEach(o=>{mn(s,o)}),fe=[],ye=null})),ye}function Ie(a){return function(o,f){return function(S){return S instanceof Event&&(S.preventDefault(),S.stopPropagation()),T(g=>g.touched=!0),u.value=!0,d.value++,Se().then(g=>{const B=E(s);if(g.valid&&typeof o=="function"){const N=E(z.value);let q=a?N:B;return g.values&&(q=g.source==="schema"?g.values:Object.assign({},q,g.values)),o(q,{evt:S,controlledValues:N,setErrors:$,setFieldError:I,setTouched:De,setFieldTouched:te,setValues:ve,setFieldValue:P,resetForm:ze,resetField:ln})}!g.valid&&typeof f=="function"&&f({values:B,evt:S,errors:g.errors,results:g.results})}).then(g=>(u.value=!1,g),g=>{throw u.value=!1,g})}}}const G=Ie(!1);G.withControlled=Ie(!0);function Ue(a,r){const o=y.value.findIndex(b=>b.path===a&&(Array.isArray(b.id)?b.id.includes(r):b.id===r)),f=y.value[o];if(!(o===-1||!f)){if(se(()=>{ge(a,{mode:"silent",warn:!1})}),f.multiple&&f.fieldsCount&&f.fieldsCount--,Array.isArray(f.id)){const b=f.id.indexOf(r);b>=0&&f.id.splice(b,1),delete f.__flags.pendingUnmount[r]}(!f.multiple||f.fieldsCount<=0)&&(y.value.splice(o,1),un(a),O(),delete A.value[a])}}function h(a){ne(A.value).forEach(r=>{r.startsWith(a)&&delete A.value[r]}),y.value=y.value.filter(r=>!r.path.startsWith(a)),se(()=>{O()})}const j={name:i,formId:t,values:s,controlledValues:z,errorBag:p,errors:D,schema:L,submitCount:d,meta:U,isSubmitting:u,isValidating:c,fieldArrays:v,keepValuesOnUnmount:X,validateSchema:M(L)?ee:void 0,validate:Se,setFieldError:I,validateField:ge,setFieldValue:P,setValues:ve,setErrors:$,setFieldTouched:te,setTouched:De,resetForm:ze,resetField:ln,handleSubmit:G,useFieldModel:$n,defineInputBinds:Wn,defineComponentBinds:qn,defineField:$e,stageInitialValue:zn,unsetInitialValue:un,setFieldInitialValue:Le,createPathState:ae,getPathState:_,unsetPathValue:_e,removePathState:Ue,initialValues:Z,getAllPathStates:()=>y.value,destroyPath:h,isFieldTouched:Rn,isFieldDirty:Un,isFieldValid:Dn};function P(a,r,o=!0){const f=E(r),b=typeof a=="string"?a:a.path;_(b)||ae(b),he(s,b,f),o&&ge(b)}function C(a,r=!0){ne(s).forEach(o=>{delete s[o]}),ne(a).forEach(o=>{P(o,a[o],!1)}),r&&Se()}function ve(a,r=!0){Ee(s,a),v.forEach(o=>o&&o.reset()),r&&Se()}function oe(a,r){const o=_(m(a))||ae(a);return F({get(){return o.value},set(f){var b;const S=m(a);P(S,f,(b=m(r))!==null&&b!==void 0?b:!1)}})}function te(a,r){const o=_(a);o&&(o.touched=r)}function Rn(a){const r=_(a);return r?r.touched:y.value.filter(o=>o.path.startsWith(a)).some(o=>o.touched)}function Un(a){const r=_(a);return r?r.dirty:y.value.filter(o=>o.path.startsWith(a)).some(o=>o.dirty)}function Dn(a){const r=_(a);return r?r.valid:y.value.filter(o=>o.path.startsWith(a)).every(o=>o.valid)}function De(a){if(typeof a=="boolean"){T(r=>{r.touched=a});return}ne(a).forEach(r=>{te(r,!!a[r])})}function ln(a,r){var o;const f=r&&"value"in r?r.value:Q(Z.value,a),b=_(a);b&&(b.__flags.pendingReset=!0),Le(a,E(f),!0),P(a,f,!1),te(a,(o=r?.touched)!==null&&o!==void 0?o:!1),I(a,r?.errors||[]),se(()=>{b&&(b.__flags.pendingReset=!1)})}function ze(a,r){let o=E(a?.values?a.values:k.value);o=r?.force?o:Ee(k.value,o),o=ue(L)&&W(L.cast)?L.cast(o):o,ie(o,{force:r?.force}),T(f=>{var b;f.__flags.pendingReset=!0,f.validated=!1,f.touched=((b=a?.touched)===null||b===void 0?void 0:b[m(f.path)])||!1,P(m(f.path),Q(o,m(f.path)),!1),I(m(f.path),void 0)}),r?.force?C(o,!1):ve(o,!1),$(a?.errors||{}),d.value=a?.submitCount||0,se(()=>{Se({mode:"silent"}),T(f=>{f.__flags.pendingReset=!1})})}async function Se(a){const r=a?.mode||"force";if(r==="force"&&T(g=>g.validated=!0),j.validateSchema)return j.validateSchema(r);c.value=!0;const o=await Promise.all(y.value.map(g=>g.validate?g.validate(a).then(B=>({key:m(g.path),valid:B.valid,errors:B.errors,value:B.value})):Promise.resolve({key:m(g.path),valid:!0,errors:[],value:void 0})));c.value=!1;const f={},b={},S={};for(const g of o)f[g.key]={valid:g.valid,errors:g.errors},g.value&&he(S,g.key,g.value),g.errors.length&&(b[g.key]=g.errors[0]);return{valid:o.every(g=>g.valid),results:f,errors:b,values:S,source:"fields"}}async function ge(a,r){var o;const f=_(a);if(f&&r?.mode!=="silent"&&(f.validated=!0),L){const{results:b}=await ee(r?.mode||"validated-only");return b[a]||{errors:[],valid:!0}}return f?.validate?f.validate(r):(!f&&(o=r?.warn),Promise.resolve({errors:[],valid:!0}))}function un(a){mn(Z.value,a)}function zn(a,r,o=!1){Le(a,r),he(s,a,r),o&&!e?.initialValues&&he(k.value,a,E(r))}function Le(a,r,o=!1){he(Z.value,a,E(r)),o&&he(k.value,a,E(r))}async function on(){const a=M(L);if(!a)return{valid:!0,results:{},errors:{},source:"none"};c.value=!0;const r=ke(a)||ue(a)?await _t(a,s):await jt(a,s,{names:R.value,bailsMap:de.value});return c.value=!1,r}const Ln=G((a,{evt:r})=>{Fn(r)&&r.target.submit()});jn(()=>{if(e?.initialErrors&&$(e.initialErrors),e?.initialTouched&&De(e.initialTouched),e?.validateOnMount){Se();return}j.validateSchema&&j.validateSchema("silent")}),we(L)&&Ve(L,()=>{var a;(a=j.validateSchema)===null||a===void 0||a.call(j,"validated-only")}),Je(nn,j);function $e(a,r){const o=W(r)?void 0:r?.label,f=_(m(a))||ae(a,{label:o}),b=()=>W(r)?r(Ce(f,Pe)):r||{};function S(){var w;f.touched=!0,((w=b().validateOnBlur)!==null&&w!==void 0?w:Oe().validateOnBlur)&&ge(m(f.path))}function g(){var w;((w=b().validateOnInput)!==null&&w!==void 0?w:Oe().validateOnInput)&&se(()=>{ge(m(f.path))})}function B(){var w;((w=b().validateOnChange)!==null&&w!==void 0?w:Oe().validateOnChange)&&se(()=>{ge(m(f.path))})}const N=F(()=>{const w={onChange:B,onInput:g,onBlur:S};return W(r)?Object.assign(Object.assign({},w),r(Ce(f,Pe)).props||{}):r?.props?Object.assign(Object.assign({},w),r.props(Ce(f,Pe))):w});return[oe(a,()=>{var w,H,J;return(J=(w=b().validateOnModelUpdate)!==null&&w!==void 0?w:(H=Oe())===null||H===void 0?void 0:H.validateOnModelUpdate)!==null&&J!==void 0?J:!0}),N]}function $n(a){return Array.isArray(a)?a.map(r=>oe(r,!0)):oe(a)}function Wn(a,r){const[o,f]=$e(a,r);function b(){f.value.onBlur()}function S(B){const N=Te(B);P(m(a),N,!1),f.value.onInput()}function g(B){const N=Te(B);P(m(a),N,!1),f.value.onChange()}return F(()=>Object.assign(Object.assign({},f.value),{onBlur:b,onInput:S,onChange:g,value:o.value}))}function qn(a,r){const[o,f]=$e(a,r),b=_(m(a));function S(g){o.value=g}return F(()=>{const g=W(r)?r(Ce(b,Pe)):r||{};return Object.assign({[g.model||"modelValue"]:o.value,[`onUpdate:${g.model||"modelValue"}`]:S},f.value)})}const sn=Object.assign(Object.assign({},j),{values:Hn(s),handleReset:()=>ze(),submitForm:Ln});return Je(nt,sn),sn}function Dt(e,n,t,i){const l={touched:"some",pending:"some",valid:"every"},u=F(()=>!Y(n,M(t)));function c(){const v=e.value;return ne(l).reduce((s,y)=>{const V=l[y];return s[y]=v[V](A=>A[y]),s},{})}const d=Me(c());return Kn(()=>{const v=c();d.touched=v.touched,d.valid=v.valid,d.pending=v.pending}),F(()=>Object.assign(Object.assign({initialValues:M(t)},d),{valid:d.valid&&!ne(i.value).length,dirty:u.value}))}function zt(e,n,t){const i=Nn(t),l=le(i),u=le(E(i));function c(d,v){v?.force?(l.value=E(d),u.value=E(d)):(l.value=Ee(E(l.value)||{},E(d)),u.value=Ee(E(u.value)||{},E(d))),v?.updateFields&&e.value.forEach(s=>{if(s.touched)return;const V=Q(l.value,m(s.path));he(n,m(s.path),E(V))})}return{initialValues:l,originalInitialValues:u,setInitialValues:c}}function Lt(e,n){return n?{valid:e.valid&&n.valid,errors:[...e.errors,...n.errors]}:e}const $t=pn({name:"Form",inheritAttrs:!1,props:{as:{type:null,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1},name:{type:String,default:"Form"}},setup(e,n){const t=be(e,"validationSchema"),i=be(e,"keepValues"),{errors:l,errorBag:u,values:c,meta:d,isSubmitting:v,isValidating:s,submitCount:y,controlledValues:V,validate:A,validateField:O,handleReset:I,resetForm:$,handleSubmit:p,setErrors:D,setFieldError:R,setFieldValue:de,setValues:K,setFieldTouched:X,setTouched:Z,resetField:k}=Ut({validationSchema:t.value?t:void 0,initialValues:e.initialValues,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:i,name:e.name}),ie=p((T,{evt:_})=>{Fn(_)&&_.target.submit()},e.onInvalidSubmit),U=e.onSubmit?p(e.onSubmit,e.onInvalidSubmit):ie;function z(T){tn(T)&&T.preventDefault(),I(),typeof n.attrs.onReset=="function"&&n.attrs.onReset()}function L(T,_){return p(typeof T=="function"&&!_?T:_,e.onInvalidSubmit)(T)}function ae(){return E(c)}function ce(){return E(d.value)}function x(){return E(l.value)}function ee(){return{meta:d.value,errors:l.value,errorBag:u.value,values:c,isSubmitting:v.value,isValidating:s.value,submitCount:y.value,controlledValues:V.value,validate:A,validateField:O,handleSubmit:L,handleReset:I,submitForm:ie,setErrors:D,setFieldError:R,setFieldValue:de,setValues:K,setFieldTouched:X,setTouched:Z,resetForm:$,resetField:k,getValues:ae,getMeta:ce,getErrors:x}}return n.expose({setFieldError:R,setErrors:D,setFieldValue:de,setValues:K,setFieldTouched:X,setTouched:Z,resetForm:$,validate:A,validateField:O,resetField:k,getValues:ae,getMeta:ce,getErrors:x,values:c,meta:d,errors:l}),function(){const _=e.as==="form"?e.as:e.as?Sn(e.as):null,me=Cn(_,n,ee);return _?_n(_,Object.assign(Object.assign(Object.assign({},_==="form"?{novalidate:!0}:{}),n.attrs),{onSubmit:U,onReset:z}),me):me}}}),Ht=$t;export{Ht as F,qt as a,rn as c,Re as i};
