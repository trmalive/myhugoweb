{{ define "main" }}
<main class="main list" role="main">
	{{- with .Title }}
	<header class="main__header">
		<h1 class="main__title">{{ . }}</h1>
	</header>
	{{- end }}
	{{- with .Content }}
	<div class="content main__content clearfix">
		{{ . }}
	</div>
	{{- end }}

    <div class="tool-grid">
        {{ range $.Site.Data.tools }}
        <div class="tool-card">
            <div class="tool-header">
                <div class="tool-icon">
                    <img src="{{ .icon }}" alt="{{ .name }}">
                </div>
                <div class="tool-info">
                    <h3 class="tool-title">{{ .name }}</h3>
                    <span class="tool-category {{ .category_color }}">{{ .category }}</span>
                </div>
            </div>
            <div class="tool-body">
                <p class="tool-desc">{{ .description }}</p>
            </div>
            <div class="tool-footer">
                <button class="tool-btn copy-btn" data-link="{{ .url | absURL }}">
                    <svg viewBox="0 0 24 24" width="14" height="14" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                    拷贝链接
                </button>
                <a href="{{ .url | absURL }}" class="tool-btn start-btn" target="_blank">
                    <svg viewBox="0 0 24 24" width="14" height="14" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>
                    开始使用
                </a>
            </div>
        </div>
        {{ end }}
    </div>
</main>

<script>
    document.querySelectorAll('.copy-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const link = btn.getAttribute('data-link');
            navigator.clipboard.writeText(link).then(() => {
                const originalText = btn.innerHTML;
                btn.innerHTML = '已复制';
                setTimeout(() => {
                    btn.innerHTML = originalText;
                }, 2000);
            });
        });
    });
</script>
{{ end }}
